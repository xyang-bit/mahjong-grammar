(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rf={exports:{}},Oo={},sf={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),Yg=Symbol.for("react.portal"),Kg=Symbol.for("react.fragment"),Xg=Symbol.for("react.strict_mode"),Zg=Symbol.for("react.profiler"),Jg=Symbol.for("react.provider"),ey=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),ny=Symbol.for("react.suspense"),ry=Symbol.for("react.memo"),iy=Symbol.for("react.lazy"),ed=Symbol.iterator;function sy(t){return t===null||typeof t!="object"?null:(t=ed&&t[ed]||t["@@iterator"],typeof t=="function"?t:null)}var of={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,af={};function Vr(t,e,n){this.props=t,this.context=e,this.refs=af,this.updater=n||of}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uf(){}uf.prototype=Vr.prototype;function pu(t,e,n){this.props=t,this.context=e,this.refs=af,this.updater=n||of}var mu=pu.prototype=new uf;mu.constructor=pu;lf(mu,Vr.prototype);mu.isPureReactComponent=!0;var td=Array.isArray,cf=Object.prototype.hasOwnProperty,gu={current:null},df={key:!0,ref:!0,__self:!0,__source:!0};function hf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cf.call(e,r)&&!df.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:is,type:t,key:s,ref:o,props:i,_owner:gu.current}}function oy(t,e){return{$$typeof:is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yu(t){return typeof t=="object"&&t!==null&&t.$$typeof===is}function ly(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nd=/\/+/g;function ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ly(""+t.key):e.toString(36)}function Os(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case is:case Yg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ml(o,0):r,td(i)?(n="",t!=null&&(n=t.replace(nd,"$&/")+"/"),Os(i,e,n,"",function(u){return u})):i!=null&&(yu(i)&&(i=oy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",td(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+ml(s,l);o+=Os(s,e,n,a,i)}else if(a=sy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+ml(s,l++),o+=Os(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vs(t,e,n){if(t==null)return t;var r=[],i=0;return Os(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ay(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},Fs={transition:null},uy={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Fs,ReactCurrentOwner:gu};function ff(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:vs,forEach:function(t,e,n){vs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vs(t,function(){e++}),e},toArray:function(t){return vs(t,function(e){return e})||[]},only:function(t){if(!yu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=Vr;B.Fragment=Kg;B.Profiler=Zg;B.PureComponent=pu;B.StrictMode=Xg;B.Suspense=ny;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uy;B.act=ff;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)cf.call(e,a)&&!df.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:is,type:t.type,key:i,ref:s,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:ey,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jg,_context:t},t.Consumer=t};B.createElement=hf;B.createFactory=function(t){var e=hf.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:ty,render:t}};B.isValidElement=yu;B.lazy=function(t){return{$$typeof:iy,_payload:{_status:-1,_result:t},_init:ay}};B.memo=function(t,e){return{$$typeof:ry,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=Fs.transition;Fs.transition={};try{t()}finally{Fs.transition=e}};B.unstable_act=ff;B.useCallback=function(t,e){return Ge.current.useCallback(t,e)};B.useContext=function(t){return Ge.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};B.useEffect=function(t,e){return Ge.current.useEffect(t,e)};B.useId=function(){return Ge.current.useId()};B.useImperativeHandle=function(t,e,n){return Ge.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Ge.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Ge.current.useReducer(t,e,n)};B.useRef=function(t){return Ge.current.useRef(t)};B.useState=function(t){return Ge.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Ge.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Ge.current.useTransition()};B.version="18.3.1";sf.exports=B;var ee=sf.exports;const cy=Qg(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=ee,hy=Symbol.for("react.element"),fy=Symbol.for("react.fragment"),py=Object.prototype.hasOwnProperty,my=dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gy={key:!0,ref:!0,__self:!0,__source:!0};function pf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)py.call(e,r)&&!gy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hy,type:t,key:s,ref:o,props:i,_owner:my.current}}Oo.Fragment=fy;Oo.jsx=pf;Oo.jsxs=pf;rf.exports=Oo;var v=rf.exports,ea={},mf={exports:{}},at={},gf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,A){var j=N.length;N.push(A);e:for(;0<j;){var ae=j-1>>>1,ye=N[ae];if(0<i(ye,A))N[ae]=A,N[j]=ye,j=ae;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var A=N[0],j=N.pop();if(j!==A){N[0]=j;e:for(var ae=0,ye=N.length,tr=ye>>>1;ae<tr;){var zt=2*(ae+1)-1,Me=N[zt],Oe=zt+1,Mt=N[Oe];if(0>i(Me,j))Oe<ye&&0>i(Mt,Me)?(N[ae]=Mt,N[Oe]=j,ae=Oe):(N[ae]=Me,N[zt]=j,ae=zt);else if(Oe<ye&&0>i(Mt,j))N[ae]=Mt,N[Oe]=j,ae=Oe;else break e}}return A}function i(N,A){var j=N.sortIndex-A.sortIndex;return j!==0?j:N.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,c=3,y=!1,g=!1,L=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=N)r(u),A.sortIndex=A.expirationTime,e(a,A);else break;A=n(u)}}function w(N){if(L=!1,m(N),!g)if(n(a)!==null)g=!0,Jr(T);else{var A=n(u);A!==null&&Pn(w,A.startTime-N)}}function T(N,A){g=!1,L&&(L=!1,p(C),C=-1),y=!0;var j=c;try{for(m(A),d=n(a);d!==null&&(!(d.expirationTime>A)||N&&!X());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,c=d.priorityLevel;var ye=ae(d.expirationTime<=A);A=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===n(a)&&r(a),m(A)}else r(a);d=n(a)}if(d!==null)var tr=!0;else{var zt=n(u);zt!==null&&Pn(w,zt.startTime-A),tr=!1}return tr}finally{d=null,c=j,y=!1}}var k=!1,_=null,C=-1,O=5,I=-1;function X(){return!(t.unstable_now()-I<O)}function Z(){if(_!==null){var N=t.unstable_now();I=N;var A=!0;try{A=_(!0,N)}finally{A?Nn():(k=!1,_=null)}}else k=!1}var Nn;if(typeof f=="function")Nn=function(){f(Z)};else if(typeof MessageChannel<"u"){var ms=new MessageChannel,hl=ms.port2;ms.port1.onmessage=Z,Nn=function(){hl.postMessage(null)}}else Nn=function(){b(Z,0)};function Jr(N){_=N,k||(k=!0,Nn())}function Pn(N,A){C=b(function(){N(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,Jr(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(c){case 1:case 2:case 3:var A=3;break;default:A=c}var j=c;c=A;try{return N()}finally{c=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,A){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var j=c;c=N;try{return A()}finally{c=j}},t.unstable_scheduleCallback=function(N,A,j){var ae=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ae+j:ae):j=ae,N){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=j+ye,N={id:h++,callback:A,priorityLevel:N,startTime:j,expirationTime:ye,sortIndex:-1},j>ae?(N.sortIndex=j,e(u,N),n(a)===null&&N===n(u)&&(L?(p(C),C=-1):L=!0,Pn(w,j-ae))):(N.sortIndex=ye,e(a,N),g||y||(g=!0,Jr(T))),N},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(N){var A=c;return function(){var j=c;c=A;try{return N.apply(this,arguments)}finally{c=j}}}})(yf);gf.exports=yf;var yy=gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy=ee,lt=yy;function x(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vf=new Set,Ri={};function Xn(t,e){Rr(t,e),Rr(t+"Capture",e)}function Rr(t,e){for(Ri[t]=e,t=0;t<e.length;t++)vf.add(e[t])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=Object.prototype.hasOwnProperty,_y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rd={},id={};function Ly(t){return ta.call(id,t)?!0:ta.call(rd,t)?!1:_y.test(t)?id[t]=!0:(rd[t]=!0,!1)}function wy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cy(t,e,n,r){if(e===null||typeof e>"u"||wy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new Qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new Qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new Qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new Qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new Qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new Qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new Qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new Qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new Qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var vu=/[\-:]([a-z])/g;function _u(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vu,_u);Ae[e]=new Qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vu,_u);Ae[e]=new Qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vu,_u);Ae[e]=new Qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new Qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new Qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lu(t,e,n,r){var i=Ae.hasOwnProperty(e)?Ae[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cy(e,n,i,r)&&(n=null),r||i===null?Ly(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var en=vy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_s=Symbol.for("react.element"),or=Symbol.for("react.portal"),lr=Symbol.for("react.fragment"),wu=Symbol.for("react.strict_mode"),na=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),Lf=Symbol.for("react.context"),Cu=Symbol.for("react.forward_ref"),ra=Symbol.for("react.suspense"),ia=Symbol.for("react.suspense_list"),xu=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),wf=Symbol.for("react.offscreen"),sd=Symbol.iterator;function ti(t){return t===null||typeof t!="object"?null:(t=sd&&t[sd]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,gl;function fi(t){if(gl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gl=e&&e[1]||""}return`
`+gl+t}var yl=!1;function vl(t,e){if(!t||yl)return"";yl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{yl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fi(t):""}function xy(t){switch(t.tag){case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return t=vl(t.type,!1),t;case 11:return t=vl(t.type.render,!1),t;case 1:return t=vl(t.type,!0),t;default:return""}}function sa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lr:return"Fragment";case or:return"Portal";case na:return"Profiler";case wu:return"StrictMode";case ra:return"Suspense";case ia:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lf:return(t.displayName||"Context")+".Consumer";case _f:return(t._context.displayName||"Context")+".Provider";case Cu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xu:return e=t.displayName||null,e!==null?e:sa(t.type)||"Memo";case rn:e=t._payload,t=t._init;try{return sa(t(e))}catch{}}return null}function Ey(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sa(e);case 8:return e===wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sy(t){var e=Cf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ls(t){t._valueTracker||(t._valueTracker=Sy(t))}function xf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oa(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function od(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ef(t,e){e=e.checked,e!=null&&Lu(t,"checked",e,!1)}function la(t,e){Ef(t,e);var n=Cn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?aa(t,e.type,n):e.hasOwnProperty("defaultValue")&&aa(t,e.type,Cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ld(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function aa(t,e,n){(e!=="number"||Ys(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pi=Array.isArray;function _r(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ua(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ad(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(x(92));if(pi(n)){if(1<n.length)throw Error(x(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cn(n)}}function Sf(t,e){var n=Cn(e.value),r=Cn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ud(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ws,If=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ws=ws||document.createElement("div"),ws.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ws.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Di(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ky=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(t){ky.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yi[e]=yi[t]})});function Tf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yi.hasOwnProperty(t)&&yi[t]?(""+e).trim():e+"px"}function Nf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Tf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Iy=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(t,e){if(e){if(Iy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function ha(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=null;function Eu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pa=null,Lr=null,wr=null;function cd(t){if(t=ls(t)){if(typeof pa!="function")throw Error(x(280));var e=t.stateNode;e&&(e=Wo(e),pa(t.stateNode,t.type,e))}}function Pf(t){Lr?wr?wr.push(t):wr=[t]:Lr=t}function Rf(){if(Lr){var t=Lr,e=wr;if(wr=Lr=null,cd(t),e)for(t=0;t<e.length;t++)cd(e[t])}}function Df(t,e){return t(e)}function bf(){}var _l=!1;function Af(t,e,n){if(_l)return t(e,n);_l=!0;try{return Df(t,e,n)}finally{_l=!1,(Lr!==null||wr!==null)&&(bf(),Rf())}}function bi(t,e){var n=t.stateNode;if(n===null)return null;var r=Wo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(x(231,e,typeof n));return n}var ma=!1;if(Qt)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){ma=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{ma=!1}function Ty(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var vi=!1,Ks=null,Xs=!1,ga=null,Ny={onError:function(t){vi=!0,Ks=t}};function Py(t,e,n,r,i,s,o,l,a){vi=!1,Ks=null,Ty.apply(Ny,arguments)}function Ry(t,e,n,r,i,s,o,l,a){if(Py.apply(this,arguments),vi){if(vi){var u=Ks;vi=!1,Ks=null}else throw Error(x(198));Xs||(Xs=!0,ga=u)}}function Zn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dd(t){if(Zn(t)!==t)throw Error(x(188))}function Dy(t){var e=t.alternate;if(!e){if(e=Zn(t),e===null)throw Error(x(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dd(i),t;if(s===r)return dd(i),e;s=s.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?t:e}function Mf(t){return t=Dy(t),t!==null?Of(t):null}function Of(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Of(t);if(e!==null)return e;t=t.sibling}return null}var Ff=lt.unstable_scheduleCallback,hd=lt.unstable_cancelCallback,by=lt.unstable_shouldYield,Ay=lt.unstable_requestPaint,ge=lt.unstable_now,zy=lt.unstable_getCurrentPriorityLevel,Su=lt.unstable_ImmediatePriority,jf=lt.unstable_UserBlockingPriority,Zs=lt.unstable_NormalPriority,My=lt.unstable_LowPriority,Hf=lt.unstable_IdlePriority,Fo=null,Dt=null;function Oy(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Hy,Fy=Math.log,jy=Math.LN2;function Hy(t){return t>>>=0,t===0?32:31-(Fy(t)/jy|0)|0}var Cs=64,xs=4194304;function mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Js(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=mi(l):(s&=o,s!==0&&(r=mi(s)))}else o=n&~i,o!==0?r=mi(o):s!==0&&(r=mi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Et(e),i=1<<n,r|=t[n],e&=~i;return r}function Uy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Et(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Uy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function ya(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uf(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function Ll(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ss(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Et(e),t[e]=n}function By(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Et(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ku(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Et(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Y=0;function Wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bf,Iu,$f,Vf,qf,va=!1,Es=[],dn=null,hn=null,fn=null,Ai=new Map,zi=new Map,on=[],$y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fd(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":Ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(e.pointerId)}}function ri(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ls(e),e!==null&&Iu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Vy(t,e,n,r,i){switch(e){case"focusin":return dn=ri(dn,t,e,n,r,i),!0;case"dragenter":return hn=ri(hn,t,e,n,r,i),!0;case"mouseover":return fn=ri(fn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ai.set(s,ri(Ai.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zi.set(s,ri(zi.get(s)||null,t,e,n,r,i)),!0}return!1}function Gf(t){var e=zn(t.target);if(e!==null){var n=Zn(e);if(n!==null){if(e=n.tag,e===13){if(e=zf(n),e!==null){t.blockedOn=e,qf(t.priority,function(){$f(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_a(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fa=r,n.target.dispatchEvent(r),fa=null}else return e=ls(n),e!==null&&Iu(e),t.blockedOn=n,!1;e.shift()}return!0}function pd(t,e,n){js(t)&&n.delete(e)}function qy(){va=!1,dn!==null&&js(dn)&&(dn=null),hn!==null&&js(hn)&&(hn=null),fn!==null&&js(fn)&&(fn=null),Ai.forEach(pd),zi.forEach(pd)}function ii(t,e){t.blockedOn===e&&(t.blockedOn=null,va||(va=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,qy)))}function Mi(t){function e(i){return ii(i,t)}if(0<Es.length){ii(Es[0],t);for(var n=1;n<Es.length;n++){var r=Es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&ii(dn,t),hn!==null&&ii(hn,t),fn!==null&&ii(fn,t),Ai.forEach(e),zi.forEach(e),n=0;n<on.length;n++)r=on[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)Gf(n),n.blockedOn===null&&on.shift()}var Cr=en.ReactCurrentBatchConfig,eo=!0;function Gy(t,e,n,r){var i=Y,s=Cr.transition;Cr.transition=null;try{Y=1,Tu(t,e,n,r)}finally{Y=i,Cr.transition=s}}function Qy(t,e,n,r){var i=Y,s=Cr.transition;Cr.transition=null;try{Y=4,Tu(t,e,n,r)}finally{Y=i,Cr.transition=s}}function Tu(t,e,n,r){if(eo){var i=_a(t,e,n,r);if(i===null)Pl(t,e,r,to,n),fd(t,r);else if(Vy(i,t,e,n,r))r.stopPropagation();else if(fd(t,r),e&4&&-1<$y.indexOf(t)){for(;i!==null;){var s=ls(i);if(s!==null&&Bf(s),s=_a(t,e,n,r),s===null&&Pl(t,e,r,to,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pl(t,e,r,null,n)}}var to=null;function _a(t,e,n,r){if(to=null,t=Eu(r),t=zn(t),t!==null)if(e=Zn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return to=t,null}function Qf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zy()){case Su:return 1;case jf:return 4;case Zs:case My:return 16;case Hf:return 536870912;default:return 16}default:return 16}}var an=null,Nu=null,Hs=null;function Yf(){if(Hs)return Hs;var t,e=Nu,n=e.length,r,i="value"in an?an.value:an.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hs=i.slice(t,1<r?1-r:void 0)}function Us(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function md(){return!1}function ut(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ss:md,this.isPropagationStopped=md,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),e}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=ut(qr),os=he({},qr,{view:0,detail:0}),Yy=ut(os),wl,Cl,si,jo=he({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(wl=t.screenX-si.screenX,Cl=t.screenY-si.screenY):Cl=wl=0,si=t),wl)},movementY:function(t){return"movementY"in t?t.movementY:Cl}}),gd=ut(jo),Ky=he({},jo,{dataTransfer:0}),Xy=ut(Ky),Zy=he({},os,{relatedTarget:0}),xl=ut(Zy),Jy=he({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),e1=ut(Jy),t1=he({},qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n1=ut(t1),r1=he({},qr,{data:0}),yd=ut(r1),i1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o1[t])?!!e[t]:!1}function Ru(){return l1}var a1=he({},os,{key:function(t){if(t.key){var e=i1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Us(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(t){return t.type==="keypress"?Us(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Us(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u1=ut(a1),c1=he({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=ut(c1),d1=he({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),h1=ut(d1),f1=he({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),p1=ut(f1),m1=he({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g1=ut(m1),y1=[9,13,27,32],Du=Qt&&"CompositionEvent"in window,_i=null;Qt&&"documentMode"in document&&(_i=document.documentMode);var v1=Qt&&"TextEvent"in window&&!_i,Kf=Qt&&(!Du||_i&&8<_i&&11>=_i),_d=String.fromCharCode(32),Ld=!1;function Xf(t,e){switch(t){case"keyup":return y1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ar=!1;function _1(t,e){switch(t){case"compositionend":return Zf(e);case"keypress":return e.which!==32?null:(Ld=!0,_d);case"textInput":return t=e.data,t===_d&&Ld?null:t;default:return null}}function L1(t,e){if(ar)return t==="compositionend"||!Du&&Xf(t,e)?(t=Yf(),Hs=Nu=an=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kf&&e.locale!=="ko"?null:e.data;default:return null}}var w1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w1[t.type]:e==="textarea"}function Jf(t,e,n,r){Pf(r),e=no(e,"onChange"),0<e.length&&(n=new Pu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Li=null,Oi=null;function C1(t){cp(t,0)}function Ho(t){var e=dr(t);if(xf(e))return t}function x1(t,e){if(t==="change")return e}var ep=!1;if(Qt){var El;if(Qt){var Sl="oninput"in document;if(!Sl){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),Sl=typeof Cd.oninput=="function"}El=Sl}else El=!1;ep=El&&(!document.documentMode||9<document.documentMode)}function xd(){Li&&(Li.detachEvent("onpropertychange",tp),Oi=Li=null)}function tp(t){if(t.propertyName==="value"&&Ho(Oi)){var e=[];Jf(e,Oi,t,Eu(t)),Af(C1,e)}}function E1(t,e,n){t==="focusin"?(xd(),Li=e,Oi=n,Li.attachEvent("onpropertychange",tp)):t==="focusout"&&xd()}function S1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(Oi)}function k1(t,e){if(t==="click")return Ho(e)}function I1(t,e){if(t==="input"||t==="change")return Ho(e)}function T1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:T1;function Fi(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ta.call(e,i)||!It(t[i],e[i]))return!1}return!0}function Ed(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sd(t,e){var n=Ed(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ed(n)}}function np(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?np(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rp(){for(var t=window,e=Ys();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ys(t.document)}return e}function bu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function N1(t){var e=rp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&np(n.ownerDocument.documentElement,n)){if(r!==null&&bu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Sd(n,s);var o=Sd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P1=Qt&&"documentMode"in document&&11>=document.documentMode,ur=null,La=null,wi=null,wa=!1;function kd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wa||ur==null||ur!==Ys(r)||(r=ur,"selectionStart"in r&&bu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wi&&Fi(wi,r)||(wi=r,r=no(La,"onSelect"),0<r.length&&(e=new Pu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ur)))}function ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cr={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},kl={},ip={};Qt&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function Uo(t){if(kl[t])return kl[t];if(!cr[t])return t;var e=cr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ip)return kl[t]=e[n];return t}var sp=Uo("animationend"),op=Uo("animationiteration"),lp=Uo("animationstart"),ap=Uo("transitionend"),up=new Map,Id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){up.set(t,e),Xn(e,[t])}for(var Il=0;Il<Id.length;Il++){var Tl=Id[Il],R1=Tl.toLowerCase(),D1=Tl[0].toUpperCase()+Tl.slice(1);kn(R1,"on"+D1)}kn(sp,"onAnimationEnd");kn(op,"onAnimationIteration");kn(lp,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(ap,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b1=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function Td(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ry(r,e,void 0,t),t.currentTarget=null}function cp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Td(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Td(i,l,u),s=a}}}if(Xs)throw t=ga,Xs=!1,ga=null,t}function se(t,e){var n=e[ka];n===void 0&&(n=e[ka]=new Set);var r=t+"__bubble";n.has(r)||(dp(e,t,2,!1),n.add(r))}function Nl(t,e,n){var r=0;e&&(r|=4),dp(n,t,r,e)}var Is="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[Is]){t[Is]=!0,vf.forEach(function(n){n!=="selectionchange"&&(b1.has(n)||Nl(n,!1,t),Nl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Is]||(e[Is]=!0,Nl("selectionchange",!1,e))}}function dp(t,e,n,r){switch(Qf(e)){case 1:var i=Gy;break;case 4:i=Qy;break;default:i=Tu}n=i.bind(null,e,n,t),i=void 0,!ma||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=zn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Af(function(){var u=s,h=Eu(n),d=[];e:{var c=up.get(t);if(c!==void 0){var y=Pu,g=t;switch(t){case"keypress":if(Us(n)===0)break e;case"keydown":case"keyup":y=u1;break;case"focusin":g="focus",y=xl;break;case"focusout":g="blur",y=xl;break;case"beforeblur":case"afterblur":y=xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=h1;break;case sp:case op:case lp:y=e1;break;case ap:y=p1;break;case"scroll":y=Yy;break;case"wheel":y=g1;break;case"copy":case"cut":case"paste":y=n1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=vd}var L=(e&4)!==0,b=!L&&t==="scroll",p=L?c!==null?c+"Capture":null:c;L=[];for(var f=u,m;f!==null;){m=f;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,p!==null&&(w=bi(f,p),w!=null&&L.push(Hi(f,w,m)))),b)break;f=f.return}0<L.length&&(c=new y(c,g,null,n,h),d.push({event:c,listeners:L}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",c&&n!==fa&&(g=n.relatedTarget||n.fromElement)&&(zn(g)||g[Yt]))break e;if((y||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?zn(g):null,g!==null&&(b=Zn(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(L=gd,w="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(L=vd,w="onPointerLeave",p="onPointerEnter",f="pointer"),b=y==null?c:dr(y),m=g==null?c:dr(g),c=new L(w,f+"leave",y,n,h),c.target=b,c.relatedTarget=m,w=null,zn(h)===u&&(L=new L(p,f+"enter",g,n,h),L.target=m,L.relatedTarget=b,w=L),b=w,y&&g)t:{for(L=y,p=g,f=0,m=L;m;m=rr(m))f++;for(m=0,w=p;w;w=rr(w))m++;for(;0<f-m;)L=rr(L),f--;for(;0<m-f;)p=rr(p),m--;for(;f--;){if(L===p||p!==null&&L===p.alternate)break t;L=rr(L),p=rr(p)}L=null}else L=null;y!==null&&Nd(d,c,y,L,!1),g!==null&&b!==null&&Nd(d,b,g,L,!0)}}e:{if(c=u?dr(u):window,y=c.nodeName&&c.nodeName.toLowerCase(),y==="select"||y==="input"&&c.type==="file")var T=x1;else if(wd(c))if(ep)T=I1;else{T=S1;var k=E1}else(y=c.nodeName)&&y.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(T=k1);if(T&&(T=T(t,u))){Jf(d,T,n,h);break e}k&&k(t,c,u),t==="focusout"&&(k=c._wrapperState)&&k.controlled&&c.type==="number"&&aa(c,"number",c.value)}switch(k=u?dr(u):window,t){case"focusin":(wd(k)||k.contentEditable==="true")&&(ur=k,La=u,wi=null);break;case"focusout":wi=La=ur=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,kd(d,n,h);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":kd(d,n,h)}var _;if(Du)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ar?Xf(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Kf&&n.locale!=="ko"&&(ar||C!=="onCompositionStart"?C==="onCompositionEnd"&&ar&&(_=Yf()):(an=h,Nu="value"in an?an.value:an.textContent,ar=!0)),k=no(u,C),0<k.length&&(C=new yd(C,t,null,n,h),d.push({event:C,listeners:k}),_?C.data=_:(_=Zf(n),_!==null&&(C.data=_)))),(_=v1?_1(t,n):L1(t,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(h=new yd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=_))}cp(d,e)})}function Hi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function no(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bi(t,n),s!=null&&r.unshift(Hi(t,s,i)),s=bi(t,e),s!=null&&r.push(Hi(t,s,i))),t=t.return}return r}function rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=bi(n,s),a!=null&&o.unshift(Hi(n,a,l))):i||(a=bi(n,s),a!=null&&o.push(Hi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var A1=/\r\n?/g,z1=/\u0000|\uFFFD/g;function Pd(t){return(typeof t=="string"?t:""+t).replace(A1,`
`).replace(z1,"")}function Ts(t,e,n){if(e=Pd(e),Pd(t)!==e&&n)throw Error(x(425))}function ro(){}var Ca=null,xa=null;function Ea(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sa=typeof setTimeout=="function"?setTimeout:void 0,M1=typeof clearTimeout=="function"?clearTimeout:void 0,Rd=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rd<"u"?function(t){return Rd.resolve(null).then(t).catch(F1)}:Sa;function F1(t){setTimeout(function(){throw t})}function Rl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mi(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Gr,Ui="__reactProps$"+Gr,Yt="__reactContainer$"+Gr,ka="__reactEvents$"+Gr,j1="__reactListeners$"+Gr,H1="__reactHandles$"+Gr;function zn(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yt]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dd(t);t!==null;){if(n=t[Rt])return n;t=Dd(t)}return e}t=n,n=t.parentNode}return null}function ls(t){return t=t[Rt]||t[Yt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function Wo(t){return t[Ui]||null}var Ia=[],hr=-1;function In(t){return{current:t}}function oe(t){0>hr||(t.current=Ia[hr],Ia[hr]=null,hr--)}function ie(t,e){hr++,Ia[hr]=t.current,t.current=e}var xn={},We=In(xn),et=In(!1),Wn=xn;function Dr(t,e){var n=t.type.contextTypes;if(!n)return xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tt(t){return t=t.childContextTypes,t!=null}function io(){oe(et),oe(We)}function bd(t,e,n){if(We.current!==xn)throw Error(x(168));ie(We,e),ie(et,n)}function hp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,Ey(t)||"Unknown",i));return he({},n,r)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xn,Wn=We.current,ie(We,t),ie(et,et.current),!0}function Ad(t,e,n){var r=t.stateNode;if(!r)throw Error(x(169));n?(t=hp(t,e,Wn),r.__reactInternalMemoizedMergedChildContext=t,oe(et),oe(We),ie(We,t)):oe(et),ie(et,n)}var Wt=null,Bo=!1,Dl=!1;function fp(t){Wt===null?Wt=[t]:Wt.push(t)}function U1(t){Bo=!0,fp(t)}function Tn(){if(!Dl&&Wt!==null){Dl=!0;var t=0,e=Y;try{var n=Wt;for(Y=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wt=null,Bo=!1}catch(i){throw Wt!==null&&(Wt=Wt.slice(t+1)),Ff(Su,Tn),i}finally{Y=e,Dl=!1}}return null}var fr=[],pr=0,oo=null,lo=0,ct=[],dt=0,Bn=null,Bt=1,$t="";function Rn(t,e){fr[pr++]=lo,fr[pr++]=oo,oo=t,lo=e}function pp(t,e,n){ct[dt++]=Bt,ct[dt++]=$t,ct[dt++]=Bn,Bn=t;var r=Bt;t=$t;var i=32-Et(r)-1;r&=~(1<<i),n+=1;var s=32-Et(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bt=1<<32-Et(e)+i|n<<i|r,$t=s+t}else Bt=1<<s|n<<i|r,$t=t}function Au(t){t.return!==null&&(Rn(t,1),pp(t,1,0))}function zu(t){for(;t===oo;)oo=fr[--pr],fr[pr]=null,lo=fr[--pr],fr[pr]=null;for(;t===Bn;)Bn=ct[--dt],ct[dt]=null,$t=ct[--dt],ct[dt]=null,Bt=ct[--dt],ct[dt]=null}var ot=null,st=null,le=!1,wt=null;function mp(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,st=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bn!==null?{id:Bt,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,st=null,!0):!1;default:return!1}}function Ta(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Na(t){if(le){var e=st;if(e){var n=e;if(!zd(t,e)){if(Ta(t))throw Error(x(418));e=pn(n.nextSibling);var r=ot;e&&zd(t,e)?mp(r,n):(t.flags=t.flags&-4097|2,le=!1,ot=t)}}else{if(Ta(t))throw Error(x(418));t.flags=t.flags&-4097|2,le=!1,ot=t}}}function Md(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Ns(t){if(t!==ot)return!1;if(!le)return Md(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ea(t.type,t.memoizedProps)),e&&(e=st)){if(Ta(t))throw gp(),Error(x(418));for(;e;)mp(t,e),e=pn(e.nextSibling)}if(Md(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){st=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}st=null}}else st=ot?pn(t.stateNode.nextSibling):null;return!0}function gp(){for(var t=st;t;)t=pn(t.nextSibling)}function br(){st=ot=null,le=!1}function Mu(t){wt===null?wt=[t]:wt.push(t)}var W1=en.ReactCurrentBatchConfig;function oi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,t))}return t}function Ps(t,e){throw t=Object.prototype.toString.call(e),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Od(t){var e=t._init;return e(t._payload)}function yp(t){function e(p,f){if(t){var m=p.deletions;m===null?(p.deletions=[f],p.flags|=16):m.push(f)}}function n(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function i(p,f){return p=vn(p,f),p.index=0,p.sibling=null,p}function s(p,f,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<f?(p.flags|=2,f):m):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,f,m,w){return f===null||f.tag!==6?(f=jl(m,p.mode,w),f.return=p,f):(f=i(f,m),f.return=p,f)}function a(p,f,m,w){var T=m.type;return T===lr?h(p,f,m.props.children,w,m.key):f!==null&&(f.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===rn&&Od(T)===f.type)?(w=i(f,m.props),w.ref=oi(p,f,m),w.return=p,w):(w=Qs(m.type,m.key,m.props,null,p.mode,w),w.ref=oi(p,f,m),w.return=p,w)}function u(p,f,m,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Hl(m,p.mode,w),f.return=p,f):(f=i(f,m.children||[]),f.return=p,f)}function h(p,f,m,w,T){return f===null||f.tag!==7?(f=Hn(m,p.mode,w,T),f.return=p,f):(f=i(f,m),f.return=p,f)}function d(p,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=jl(""+f,p.mode,m),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case _s:return m=Qs(f.type,f.key,f.props,null,p.mode,m),m.ref=oi(p,null,f),m.return=p,m;case or:return f=Hl(f,p.mode,m),f.return=p,f;case rn:var w=f._init;return d(p,w(f._payload),m)}if(pi(f)||ti(f))return f=Hn(f,p.mode,m,null),f.return=p,f;Ps(p,f)}return null}function c(p,f,m,w){var T=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return T!==null?null:l(p,f,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:return m.key===T?a(p,f,m,w):null;case or:return m.key===T?u(p,f,m,w):null;case rn:return T=m._init,c(p,f,T(m._payload),w)}if(pi(m)||ti(m))return T!==null?null:h(p,f,m,w,null);Ps(p,m)}return null}function y(p,f,m,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(m)||null,l(f,p,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _s:return p=p.get(w.key===null?m:w.key)||null,a(f,p,w,T);case or:return p=p.get(w.key===null?m:w.key)||null,u(f,p,w,T);case rn:var k=w._init;return y(p,f,m,k(w._payload),T)}if(pi(w)||ti(w))return p=p.get(m)||null,h(f,p,w,T,null);Ps(f,w)}return null}function g(p,f,m,w){for(var T=null,k=null,_=f,C=f=0,O=null;_!==null&&C<m.length;C++){_.index>C?(O=_,_=null):O=_.sibling;var I=c(p,_,m[C],w);if(I===null){_===null&&(_=O);break}t&&_&&I.alternate===null&&e(p,_),f=s(I,f,C),k===null?T=I:k.sibling=I,k=I,_=O}if(C===m.length)return n(p,_),le&&Rn(p,C),T;if(_===null){for(;C<m.length;C++)_=d(p,m[C],w),_!==null&&(f=s(_,f,C),k===null?T=_:k.sibling=_,k=_);return le&&Rn(p,C),T}for(_=r(p,_);C<m.length;C++)O=y(_,p,C,m[C],w),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?C:O.key),f=s(O,f,C),k===null?T=O:k.sibling=O,k=O);return t&&_.forEach(function(X){return e(p,X)}),le&&Rn(p,C),T}function L(p,f,m,w){var T=ti(m);if(typeof T!="function")throw Error(x(150));if(m=T.call(m),m==null)throw Error(x(151));for(var k=T=null,_=f,C=f=0,O=null,I=m.next();_!==null&&!I.done;C++,I=m.next()){_.index>C?(O=_,_=null):O=_.sibling;var X=c(p,_,I.value,w);if(X===null){_===null&&(_=O);break}t&&_&&X.alternate===null&&e(p,_),f=s(X,f,C),k===null?T=X:k.sibling=X,k=X,_=O}if(I.done)return n(p,_),le&&Rn(p,C),T;if(_===null){for(;!I.done;C++,I=m.next())I=d(p,I.value,w),I!==null&&(f=s(I,f,C),k===null?T=I:k.sibling=I,k=I);return le&&Rn(p,C),T}for(_=r(p,_);!I.done;C++,I=m.next())I=y(_,p,C,I.value,w),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?C:I.key),f=s(I,f,C),k===null?T=I:k.sibling=I,k=I);return t&&_.forEach(function(Z){return e(p,Z)}),le&&Rn(p,C),T}function b(p,f,m,w){if(typeof m=="object"&&m!==null&&m.type===lr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:e:{for(var T=m.key,k=f;k!==null;){if(k.key===T){if(T=m.type,T===lr){if(k.tag===7){n(p,k.sibling),f=i(k,m.props.children),f.return=p,p=f;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===rn&&Od(T)===k.type){n(p,k.sibling),f=i(k,m.props),f.ref=oi(p,k,m),f.return=p,p=f;break e}n(p,k);break}else e(p,k);k=k.sibling}m.type===lr?(f=Hn(m.props.children,p.mode,w,m.key),f.return=p,p=f):(w=Qs(m.type,m.key,m.props,null,p.mode,w),w.ref=oi(p,f,m),w.return=p,p=w)}return o(p);case or:e:{for(k=m.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(p,f.sibling),f=i(f,m.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else e(p,f);f=f.sibling}f=Hl(m,p.mode,w),f.return=p,p=f}return o(p);case rn:return k=m._init,b(p,f,k(m._payload),w)}if(pi(m))return g(p,f,m,w);if(ti(m))return L(p,f,m,w);Ps(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(p,f.sibling),f=i(f,m),f.return=p,p=f):(n(p,f),f=jl(m,p.mode,w),f.return=p,p=f),o(p)):n(p,f)}return b}var Ar=yp(!0),vp=yp(!1),ao=In(null),uo=null,mr=null,Ou=null;function Fu(){Ou=mr=uo=null}function ju(t){var e=ao.current;oe(ao),t._currentValue=e}function Pa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xr(t,e){uo=t,Ou=mr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xe=!0),t.firstContext=null)}function mt(t){var e=t._currentValue;if(Ou!==t)if(t={context:t,memoizedValue:e,next:null},mr===null){if(uo===null)throw Error(x(308));mr=t,uo.dependencies={lanes:0,firstContext:t}}else mr=mr.next=t;return e}var Mn=null;function Hu(t){Mn===null?Mn=[t]:Mn.push(t)}function _p(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Kt(t,r)}function Kt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var sn=!1;function Uu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Kt(t,n)}return i=r.interleaved,i===null?(e.next=e,Hu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Kt(t,n)}function Ws(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ku(t,n)}}function Fd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,r){var i=t.updateQueue;sn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var c=l.lane,y=l.eventTime;if((r&c)===c){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,L=l;switch(c=e,y=n,L.tag){case 1:if(g=L.payload,typeof g=="function"){d=g.call(y,d,c);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=L.payload,c=typeof g=="function"?g.call(y,d,c):g,c==null)break e;d=he({},d,c);break e;case 2:sn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else y={eventTime:y,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,a=d):h=h.next=y,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(1);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vn|=o,t.lanes=o,t.memoizedState=d}}function jd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var as={},bt=In(as),Wi=In(as),Bi=In(as);function On(t){if(t===as)throw Error(x(174));return t}function Wu(t,e){switch(ie(Bi,e),ie(Wi,t),ie(bt,as),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ca(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ca(e,t)}oe(bt),ie(bt,e)}function zr(){oe(bt),oe(Wi),oe(Bi)}function wp(t){On(Bi.current);var e=On(bt.current),n=ca(e,t.type);e!==n&&(ie(Wi,t),ie(bt,n))}function Bu(t){Wi.current===t&&(oe(bt),oe(Wi))}var ce=In(0);function ho(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bl=[];function $u(){for(var t=0;t<bl.length;t++)bl[t]._workInProgressVersionPrimary=null;bl.length=0}var Bs=en.ReactCurrentDispatcher,Al=en.ReactCurrentBatchConfig,$n=0,de=null,Le=null,Se=null,fo=!1,Ci=!1,$i=0,B1=0;function je(){throw Error(x(321))}function Vu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function qu(t,e,n,r,i,s){if($n=s,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bs.current=t===null||t.memoizedState===null?G1:Q1,t=n(r,i),Ci){s=0;do{if(Ci=!1,$i=0,25<=s)throw Error(x(301));s+=1,Se=Le=null,e.updateQueue=null,Bs.current=Y1,t=n(r,i)}while(Ci)}if(Bs.current=po,e=Le!==null&&Le.next!==null,$n=0,Se=Le=de=null,fo=!1,e)throw Error(x(300));return t}function Gu(){var t=$i!==0;return $i=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?de.memoizedState=Se=t:Se=Se.next=t,Se}function gt(){if(Le===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Se===null?de.memoizedState:Se.next;if(e!==null)Se=e,Le=t;else{if(t===null)throw Error(x(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Se===null?de.memoizedState=Se=t:Se=Se.next=t}return Se}function Vi(t,e){return typeof e=="function"?e(t):e}function zl(t){var e=gt(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=Le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if(($n&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,de.lanes|=h,Vn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,It(r,e.memoizedState)||(Xe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,de.lanes|=s,Vn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ml(t){var e=gt(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);It(s,e.memoizedState)||(Xe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Cp(){}function xp(t,e){var n=de,r=gt(),i=e(),s=!It(r.memoizedState,i);if(s&&(r.memoizedState=i,Xe=!0),r=r.queue,Qu(kp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,qi(9,Sp.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(x(349));$n&30||Ep(n,e,i)}return i}function Ep(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sp(t,e,n,r){e.value=n,e.getSnapshot=r,Ip(e)&&Tp(t)}function kp(t,e,n){return n(function(){Ip(e)&&Tp(t)})}function Ip(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function Tp(t){var e=Kt(t,1);e!==null&&St(e,t,1,-1)}function Hd(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e.queue=t,t=t.dispatch=q1.bind(null,de,t),[e.memoizedState,t]}function qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Np(){return gt().memoizedState}function $s(t,e,n,r){var i=Pt();de.flags|=t,i.memoizedState=qi(1|e,n,void 0,r===void 0?null:r)}function $o(t,e,n,r){var i=gt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,r!==null&&Vu(r,o.deps)){i.memoizedState=qi(e,n,s,r);return}}de.flags|=t,i.memoizedState=qi(1|e,n,s,r)}function Ud(t,e){return $s(8390656,8,t,e)}function Qu(t,e){return $o(2048,8,t,e)}function Pp(t,e){return $o(4,2,t,e)}function Rp(t,e){return $o(4,4,t,e)}function Dp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bp(t,e,n){return n=n!=null?n.concat([t]):null,$o(4,4,Dp.bind(null,e,t),n)}function Yu(){}function Ap(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zp(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mp(t,e,n){return $n&21?(It(n,e)||(n=Uf(),de.lanes|=n,Vn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xe=!0),t.memoizedState=n)}function $1(t,e){var n=Y;Y=n!==0&&4>n?n:4,t(!0);var r=Al.transition;Al.transition={};try{t(!1),e()}finally{Y=n,Al.transition=r}}function Op(){return gt().memoizedState}function V1(t,e,n){var r=yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fp(t))jp(e,n);else if(n=_p(t,e,n,r),n!==null){var i=Ve();St(n,t,r,i),Hp(n,e,r)}}function q1(t,e,n){var r=yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fp(t))jp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,It(l,o)){var a=e.interleaved;a===null?(i.next=i,Hu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=_p(t,e,i,r),n!==null&&(i=Ve(),St(n,t,r,i),Hp(n,e,r))}}function Fp(t){var e=t.alternate;return t===de||e!==null&&e===de}function jp(t,e){Ci=fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ku(t,n)}}var po={readContext:mt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},G1={readContext:mt,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:mt,useEffect:Ud,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$s(4194308,4,Dp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $s(4194308,4,t,e)},useInsertionEffect:function(t,e){return $s(4,2,t,e)},useMemo:function(t,e){var n=Pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V1.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Hd,useDebugValue:Yu,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Hd(!1),e=t[0];return t=$1.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,i=Pt();if(le){if(n===void 0)throw Error(x(407));n=n()}else{if(n=e(),Ne===null)throw Error(x(349));$n&30||Ep(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ud(kp.bind(null,r,s,t),[t]),r.flags|=2048,qi(9,Sp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pt(),e=Ne.identifierPrefix;if(le){var n=$t,r=Bt;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Q1={readContext:mt,useCallback:Ap,useContext:mt,useEffect:Qu,useImperativeHandle:bp,useInsertionEffect:Pp,useLayoutEffect:Rp,useMemo:zp,useReducer:zl,useRef:Np,useState:function(){return zl(Vi)},useDebugValue:Yu,useDeferredValue:function(t){var e=gt();return Mp(e,Le.memoizedState,t)},useTransition:function(){var t=zl(Vi)[0],e=gt().memoizedState;return[t,e]},useMutableSource:Cp,useSyncExternalStore:xp,useId:Op,unstable_isNewReconciler:!1},Y1={readContext:mt,useCallback:Ap,useContext:mt,useEffect:Qu,useImperativeHandle:bp,useInsertionEffect:Pp,useLayoutEffect:Rp,useMemo:zp,useReducer:Ml,useRef:Np,useState:function(){return Ml(Vi)},useDebugValue:Yu,useDeferredValue:function(t){var e=gt();return Le===null?e.memoizedState=t:Mp(e,Le.memoizedState,t)},useTransition:function(){var t=Ml(Vi)[0],e=gt().memoizedState;return[t,e]},useMutableSource:Cp,useSyncExternalStore:xp,useId:Op,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ra(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return(t=t._reactInternals)?Zn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),i=yn(t),s=qt(r,i);s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(St(e,t,i,r),Ws(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),i=yn(t),s=qt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(St(e,t,i,r),Ws(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=yn(t),i=qt(n,r);i.tag=2,e!=null&&(i.callback=e),e=mn(t,i,r),e!==null&&(St(e,t,r,n),Ws(e,t,r))}};function Wd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fi(n,r)||!Fi(i,s):!0}function Up(t,e,n){var r=!1,i=xn,s=e.contextType;return typeof s=="object"&&s!==null?s=mt(s):(i=tt(e)?Wn:We.current,r=e.contextTypes,s=(r=r!=null)?Dr(t,i):xn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Bd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Da(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Uu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mt(s):(s=tt(e)?Wn:We.current,i.context=Dr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ra(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mr(t,e){try{var n="",r=e;do n+=xy(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ol(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ba(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K1=typeof WeakMap=="function"?WeakMap:Map;function Wp(t,e,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){go||(go=!0,Ba=r),ba(t,e)},n}function Bp(t,e,n){n=qt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ba(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ba(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $d(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cv.bind(null,t,e,n),e.then(t,t))}function Vd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qt(-1,1),e.tag=2,mn(n,e,1))),n.lanes|=1),t)}var X1=en.ReactCurrentOwner,Xe=!1;function $e(t,e,n,r){e.child=t===null?vp(e,null,n,r):Ar(e,t.child,n,r)}function Gd(t,e,n,r,i){n=n.render;var s=e.ref;return xr(e,i),r=qu(t,e,n,r,s,i),n=Gu(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xt(t,e,i)):(le&&n&&Au(e),e.flags|=1,$e(t,e,r,i),e.child)}function Qd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$p(t,e,s,r,i)):(t=Qs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fi,n(o,r)&&t.ref===e.ref)return Xt(t,e,i)}return e.flags|=1,t=vn(s,r),t.ref=e.ref,t.return=e,e.child=t}function $p(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Fi(s,r)&&t.ref===e.ref)if(Xe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xe=!0);else return e.lanes=t.lanes,Xt(t,e,i)}return Aa(t,e,n,r,i)}function Vp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(yr,it),it|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(yr,it),it|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ie(yr,it),it|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ie(yr,it),it|=r;return $e(t,e,i,n),e.child}function qp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Aa(t,e,n,r,i){var s=tt(n)?Wn:We.current;return s=Dr(e,s),xr(e,i),n=qu(t,e,n,r,s,i),r=Gu(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xt(t,e,i)):(le&&r&&Au(e),e.flags|=1,$e(t,e,n,i),e.child)}function Yd(t,e,n,r,i){if(tt(n)){var s=!0;so(e)}else s=!1;if(xr(e,i),e.stateNode===null)Vs(t,e),Up(e,n,r),Da(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=tt(n)?Wn:We.current,u=Dr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Bd(e,o,r,u),sn=!1;var c=e.memoizedState;o.state=c,co(e,r,o,i),a=e.memoizedState,l!==r||c!==a||et.current||sn?(typeof h=="function"&&(Ra(e,n,h,r),a=e.memoizedState),(l=sn||Wd(e,n,l,r,c,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Lp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:_t(e.type,l),o.props=u,d=e.pendingProps,c=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=mt(a):(a=tt(n)?Wn:We.current,a=Dr(e,a));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||c!==a)&&Bd(e,o,r,a),sn=!1,c=e.memoizedState,o.state=c,co(e,r,o,i);var g=e.memoizedState;l!==d||c!==g||et.current||sn?(typeof y=="function"&&(Ra(e,n,y,r),g=e.memoizedState),(u=sn||Wd(e,n,u,r,c,g,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return za(t,e,n,r,s,i)}function za(t,e,n,r,i,s){qp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ad(e,n,!1),Xt(t,e,s);r=e.stateNode,X1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ar(e,t.child,null,s),e.child=Ar(e,null,l,s)):$e(t,e,l,s),e.memoizedState=r.state,i&&Ad(e,n,!0),e.child}function Gp(t){var e=t.stateNode;e.pendingContext?bd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bd(t,e.context,!1),Wu(t,e.containerInfo)}function Kd(t,e,n,r,i){return br(),Mu(i),e.flags|=256,$e(t,e,n,r),e.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function Oa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qp(t,e,n){var r=e.pendingProps,i=ce.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ie(ce,i&1),t===null)return Na(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qo(o,r,0,null),t=Hn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Oa(n),e.memoizedState=Ma,t):Ku(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Z1(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=vn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=vn(l,s):(s=Hn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Oa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ma,r}return s=t.child,t=s.sibling,r=vn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ku(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,n,r){return r!==null&&Mu(r),Ar(e,t.child,null,n),t=Ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ol(Error(x(422))),Rs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qo({mode:"visible",children:r.children},i,0,null),s=Hn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ar(e,t.child,null,o),e.child.memoizedState=Oa(o),e.memoizedState=Ma,s);if(!(e.mode&1))return Rs(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(x(419)),r=Ol(s,r,void 0),Rs(t,e,o,r)}if(l=(o&t.childLanes)!==0,Xe||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kt(t,i),St(r,t,i,-1))}return nc(),r=Ol(Error(x(421))),Rs(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,st=pn(i.nextSibling),ot=e,le=!0,wt=null,t!==null&&(ct[dt++]=Bt,ct[dt++]=$t,ct[dt++]=Bn,Bt=t.id,$t=t.overflow,Bn=e),e=Ku(e,r.children),e.flags|=4096,e)}function Xd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pa(t.return,e,n)}function Fl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($e(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xd(t,n,e);else if(t.tag===19)Xd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ho(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ho(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fl(e,!0,n,null,s);break;case"together":Fl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(x(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J1(t,e,n){switch(e.tag){case 3:Gp(e),br();break;case 5:wp(e);break;case 1:tt(e.type)&&so(e);break;case 4:Wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ie(ao,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?Qp(t,e,n):(ie(ce,ce.current&1),t=Xt(t,e,n),t!==null?t.sibling:null);ie(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Vp(t,e,n)}return Xt(t,e,n)}var Kp,Fa,Xp,Zp;Kp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fa=function(){};Xp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,On(bt.current);var s=null;switch(n){case"input":i=oa(t,i),r=oa(t,r),s=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),s=[];break;case"textarea":i=ua(t,i),r=ua(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ro)}da(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ri.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&se("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Zp=function(t,e,n,r){n!==r&&(e.flags|=4)};function li(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ev(t,e,n){var r=e.pendingProps;switch(zu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return tt(e.type)&&io(),He(e),null;case 3:return r=e.stateNode,zr(),oe(et),oe(We),$u(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ns(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wt!==null&&(qa(wt),wt=null))),Fa(t,e),He(e),null;case 5:Bu(e);var i=On(Bi.current);if(n=e.type,t!==null&&e.stateNode!=null)Xp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return He(e),null}if(t=On(bt.current),Ns(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Rt]=e,r[Ui]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<gi.length;i++)se(gi[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":od(r,s),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},se("invalid",r);break;case"textarea":ad(r,s),se("invalid",r)}da(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),i=["children",""+l]):Ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":Ls(r),ld(r,s,!0);break;case"textarea":Ls(r),ud(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ro)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rt]=e,t[Ui]=r,Kp(t,e,!1,!1),e.stateNode=t;e:{switch(o=ha(n,r),n){case"dialog":se("cancel",t),se("close",t),i=r;break;case"iframe":case"object":case"embed":se("load",t),i=r;break;case"video":case"audio":for(i=0;i<gi.length;i++)se(gi[i],t);i=r;break;case"source":se("error",t),i=r;break;case"img":case"image":case"link":se("error",t),se("load",t),i=r;break;case"details":se("toggle",t),i=r;break;case"input":od(t,r),i=oa(t,r),se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),se("invalid",t);break;case"textarea":ad(t,r),i=ua(t,r),se("invalid",t);break;default:i=r}da(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Nf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&If(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Di(t,a):typeof a=="number"&&Di(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ri.hasOwnProperty(s)?a!=null&&s==="onScroll"&&se("scroll",t):a!=null&&Lu(t,s,a,o))}switch(n){case"input":Ls(t),ld(t,r,!1);break;case"textarea":Ls(t),ud(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_r(t,!!r.multiple,s,!1):r.defaultValue!=null&&_r(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)Zp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(n=On(Bi.current),On(bt.current),Ns(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rt]=e,(s=r.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Ts(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ts(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=e,e.stateNode=r}return He(e),null;case 13:if(oe(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&st!==null&&e.mode&1&&!(e.flags&128))gp(),br(),e.flags|=98560,s=!1;else if(s=Ns(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[Rt]=e}else br(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),s=!1}else wt!==null&&(qa(wt),wt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?we===0&&(we=3):nc())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return zr(),Fa(t,e),t===null&&ji(e.stateNode.containerInfo),He(e),null;case 10:return ju(e.type._context),He(e),null;case 17:return tt(e.type)&&io(),He(e),null;case 19:if(oe(ce),s=e.memoizedState,s===null)return He(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)li(s,!1);else{if(we!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ho(t),o!==null){for(e.flags|=128,li(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(ce,ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&ge()>Or&&(e.flags|=128,r=!0,li(s,!1),e.lanes=4194304)}else{if(!r)if(t=ho(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),li(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!le)return He(e),null}else 2*ge()-s.renderingStartTime>Or&&n!==1073741824&&(e.flags|=128,r=!0,li(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,n=ce.current,ie(ce,r?n&1|2:n&1),e):(He(e),null);case 22:case 23:return tc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?it&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function tv(t,e){switch(zu(e),e.tag){case 1:return tt(e.type)&&io(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zr(),oe(et),oe(We),$u(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bu(e),null;case 13:if(oe(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(x(340));br()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ce),null;case 4:return zr(),null;case 10:return ju(e.type._context),null;case 22:case 23:return tc(),null;case 24:return null;default:return null}}var Ds=!1,Ue=!1,nv=typeof WeakSet=="function"?WeakSet:Set,P=null;function gr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fe(t,e,r)}else n.current=null}function ja(t,e,n){try{n()}catch(r){fe(t,e,r)}}var Zd=!1;function rv(t,e){if(Ca=eo,t=rp(),bu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,c=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)c=d,d=y;for(;;){if(d===t)break t;if(c===n&&++u===i&&(l=o),c===s&&++h===r&&(a=o),(y=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(xa={focusedElem:t,selectionRange:n},eo=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var L=g.memoizedProps,b=g.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?L:_t(e.type,L),b);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(w){fe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return g=Zd,Zd=!1,g}function xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ja(e,n,s)}i=i.next}while(i!==r)}}function qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ha(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jp(t){var e=t.alternate;e!==null&&(t.alternate=null,Jp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[Ui],delete e[ka],delete e[j1],delete e[H1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function em(t){return t.tag===5||t.tag===3||t.tag===4}function Jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||em(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ua(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ro));else if(r!==4&&(t=t.child,t!==null))for(Ua(t,e,n),t=t.sibling;t!==null;)Ua(t,e,n),t=t.sibling}function Wa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wa(t,e,n),t=t.sibling;t!==null;)Wa(t,e,n),t=t.sibling}var Re=null,Lt=!1;function nn(t,e,n){for(n=n.child;n!==null;)tm(t,e,n),n=n.sibling}function tm(t,e,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Fo,n)}catch{}switch(n.tag){case 5:Ue||gr(n,e);case 6:var r=Re,i=Lt;Re=null,nn(t,e,n),Re=r,Lt=i,Re!==null&&(Lt?(t=Re,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(Lt?(t=Re,n=n.stateNode,t.nodeType===8?Rl(t.parentNode,n):t.nodeType===1&&Rl(t,n),Mi(t)):Rl(Re,n.stateNode));break;case 4:r=Re,i=Lt,Re=n.stateNode.containerInfo,Lt=!0,nn(t,e,n),Re=r,Lt=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ja(n,e,o),i=i.next}while(i!==r)}nn(t,e,n);break;case 1:if(!Ue&&(gr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){fe(n,e,l)}nn(t,e,n);break;case 21:nn(t,e,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,nn(t,e,n),Ue=r):nn(t,e,n);break;default:nn(t,e,n)}}function eh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nv),e.forEach(function(r){var i=hv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Re=l.stateNode,Lt=!1;break e;case 3:Re=l.stateNode.containerInfo,Lt=!0;break e;case 4:Re=l.stateNode.containerInfo,Lt=!0;break e}l=l.return}if(Re===null)throw Error(x(160));tm(s,o,i),Re=null,Lt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nm(e,t),e=e.sibling}function nm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vt(e,t),Nt(t),r&4){try{xi(3,t,t.return),qo(3,t)}catch(L){fe(t,t.return,L)}try{xi(5,t,t.return)}catch(L){fe(t,t.return,L)}}break;case 1:vt(e,t),Nt(t),r&512&&n!==null&&gr(n,n.return);break;case 5:if(vt(e,t),Nt(t),r&512&&n!==null&&gr(n,n.return),t.flags&32){var i=t.stateNode;try{Di(i,"")}catch(L){fe(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ef(i,s),ha(l,o);var u=ha(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Nf(i,d):h==="dangerouslySetInnerHTML"?If(i,d):h==="children"?Di(i,d):Lu(i,h,d,u)}switch(l){case"input":la(i,s);break;case"textarea":Sf(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?_r(i,!!s.multiple,y,!1):c!==!!s.multiple&&(s.defaultValue!=null?_r(i,!!s.multiple,s.defaultValue,!0):_r(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ui]=s}catch(L){fe(t,t.return,L)}}break;case 6:if(vt(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(x(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){fe(t,t.return,L)}}break;case 3:if(vt(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(L){fe(t,t.return,L)}break;case 4:vt(e,t),Nt(t);break;case 13:vt(e,t),Nt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ju=ge())),r&4&&eh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||h,vt(e,t),Ue=u):vt(e,t),Nt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(P=t,h=t.child;h!==null;){for(d=P=h;P!==null;){switch(c=P,y=c.child,c.tag){case 0:case 11:case 14:case 15:xi(4,c,c.return);break;case 1:gr(c,c.return);var g=c.stateNode;if(typeof g.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(L){fe(r,n,L)}}break;case 5:gr(c,c.return);break;case 22:if(c.memoizedState!==null){nh(d);continue}}y!==null?(y.return=c,P=y):nh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Tf("display",o))}catch(L){fe(t,t.return,L)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(L){fe(t,t.return,L)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vt(e,t),Nt(t),r&4&&eh(t);break;case 21:break;default:vt(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(em(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Di(i,""),r.flags&=-33);var s=Jd(t);Wa(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Jd(t);Ua(t,l,o);break;default:throw Error(x(161))}}catch(a){fe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iv(t,e,n){P=t,rm(t)}function rm(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ds;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ue;l=Ds;var u=Ue;if(Ds=o,(Ue=a)&&!u)for(P=i;P!==null;)o=P,a=o.child,o.tag===22&&o.memoizedState!==null?rh(i):a!==null?(a.return=o,P=a):rh(i);for(;s!==null;)P=s,rm(s),s=s.sibling;P=i,Ds=l,Ue=u}th(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,P=s):th(t)}}function th(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||qo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Mi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Ue||e.flags&512&&Ha(e)}catch(c){fe(e,e.return,c)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function nh(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function rh(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qo(4,e)}catch(a){fe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){fe(e,i,a)}}var s=e.return;try{Ha(e)}catch(a){fe(e,s,a)}break;case 5:var o=e.return;try{Ha(e)}catch(a){fe(e,o,a)}}}catch(a){fe(e,e.return,a)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var sv=Math.ceil,mo=en.ReactCurrentDispatcher,Xu=en.ReactCurrentOwner,pt=en.ReactCurrentBatchConfig,q=0,Ne=null,ve=null,be=0,it=0,yr=In(0),we=0,Gi=null,Vn=0,Go=0,Zu=0,Ei=null,Ke=null,Ju=0,Or=1/0,Ut=null,go=!1,Ba=null,gn=null,bs=!1,un=null,yo=0,Si=0,$a=null,qs=-1,Gs=0;function Ve(){return q&6?ge():qs!==-1?qs:qs=ge()}function yn(t){return t.mode&1?q&2&&be!==0?be&-be:W1.transition!==null?(Gs===0&&(Gs=Uf()),Gs):(t=Y,t!==0||(t=window.event,t=t===void 0?16:Qf(t.type)),t):1}function St(t,e,n,r){if(50<Si)throw Si=0,$a=null,Error(x(185));ss(t,n,r),(!(q&2)||t!==Ne)&&(t===Ne&&(!(q&2)&&(Go|=n),we===4&&ln(t,be)),nt(t,r),n===1&&q===0&&!(e.mode&1)&&(Or=ge()+500,Bo&&Tn()))}function nt(t,e){var n=t.callbackNode;Wy(t,e);var r=Js(t,t===Ne?be:0);if(r===0)n!==null&&hd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hd(n),e===1)t.tag===0?U1(ih.bind(null,t)):fp(ih.bind(null,t)),O1(function(){!(q&6)&&Tn()}),n=null;else{switch(Wf(r)){case 1:n=Su;break;case 4:n=jf;break;case 16:n=Zs;break;case 536870912:n=Hf;break;default:n=Zs}n=dm(n,im.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function im(t,e){if(qs=-1,Gs=0,q&6)throw Error(x(327));var n=t.callbackNode;if(Er()&&t.callbackNode!==n)return null;var r=Js(t,t===Ne?be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vo(t,r);else{e=r;var i=q;q|=2;var s=om();(Ne!==t||be!==e)&&(Ut=null,Or=ge()+500,jn(t,e));do try{av();break}catch(l){sm(t,l)}while(1);Fu(),mo.current=s,q=i,ve!==null?e=0:(Ne=null,be=0,e=we)}if(e!==0){if(e===2&&(i=ya(t),i!==0&&(r=i,e=Va(t,i))),e===1)throw n=Gi,jn(t,0),ln(t,r),nt(t,ge()),n;if(e===6)ln(t,r);else{if(i=t.current.alternate,!(r&30)&&!ov(i)&&(e=vo(t,r),e===2&&(s=ya(t),s!==0&&(r=s,e=Va(t,s))),e===1))throw n=Gi,jn(t,0),ln(t,r),nt(t,ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:Dn(t,Ke,Ut);break;case 3:if(ln(t,r),(r&130023424)===r&&(e=Ju+500-ge(),10<e)){if(Js(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sa(Dn.bind(null,t,Ke,Ut),e);break}Dn(t,Ke,Ut);break;case 4:if(ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Et(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sv(r/1960))-r,10<r){t.timeoutHandle=Sa(Dn.bind(null,t,Ke,Ut),r);break}Dn(t,Ke,Ut);break;case 5:Dn(t,Ke,Ut);break;default:throw Error(x(329))}}}return nt(t,ge()),t.callbackNode===n?im.bind(null,t):null}function Va(t,e){var n=Ei;return t.current.memoizedState.isDehydrated&&(jn(t,e).flags|=256),t=vo(t,e),t!==2&&(e=Ke,Ke=n,e!==null&&qa(e)),t}function qa(t){Ke===null?Ke=t:Ke.push.apply(Ke,t)}function ov(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!It(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ln(t,e){for(e&=~Zu,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Et(e),r=1<<n;t[n]=-1,e&=~r}}function ih(t){if(q&6)throw Error(x(327));Er();var e=Js(t,0);if(!(e&1))return nt(t,ge()),null;var n=vo(t,e);if(t.tag!==0&&n===2){var r=ya(t);r!==0&&(e=r,n=Va(t,r))}if(n===1)throw n=Gi,jn(t,0),ln(t,e),nt(t,ge()),n;if(n===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dn(t,Ke,Ut),nt(t,ge()),null}function ec(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(Or=ge()+500,Bo&&Tn())}}function qn(t){un!==null&&un.tag===0&&!(q&6)&&Er();var e=q;q|=1;var n=pt.transition,r=Y;try{if(pt.transition=null,Y=1,t)return t()}finally{Y=r,pt.transition=n,q=e,!(q&6)&&Tn()}}function tc(){it=yr.current,oe(yr)}function jn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,M1(n)),ve!==null)for(n=ve.return;n!==null;){var r=n;switch(zu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&io();break;case 3:zr(),oe(et),oe(We),$u();break;case 5:Bu(r);break;case 4:zr();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:ju(r.type._context);break;case 22:case 23:tc()}n=n.return}if(Ne=t,ve=t=vn(t.current,null),be=it=e,we=0,Gi=null,Zu=Go=Vn=0,Ke=Ei=null,Mn!==null){for(e=0;e<Mn.length;e++)if(n=Mn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mn=null}return t}function sm(t,e){do{var n=ve;try{if(Fu(),Bs.current=po,fo){for(var r=de.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fo=!1}if($n=0,Se=Le=de=null,Ci=!1,$i=0,Xu.current=null,n===null||n.return===null){we=1,Gi=e,ve=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=be,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Vd(o);if(y!==null){y.flags&=-257,qd(y,o,l,s,e),y.mode&1&&$d(s,u,e),e=y,a=u;var g=e.updateQueue;if(g===null){var L=new Set;L.add(a),e.updateQueue=L}else g.add(a);break e}else{if(!(e&1)){$d(s,u,e),nc();break e}a=Error(x(426))}}else if(le&&l.mode&1){var b=Vd(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),qd(b,o,l,s,e),Mu(Mr(a,l));break e}}s=a=Mr(a,l),we!==4&&(we=2),Ei===null?Ei=[s]:Ei.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Wp(s,a,e);Fd(s,p);break e;case 1:l=a;var f=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gn===null||!gn.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Bp(s,l,e);Fd(s,w);break e}}s=s.return}while(s!==null)}am(n)}catch(T){e=T,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(1)}function om(){var t=mo.current;return mo.current=po,t===null?po:t}function nc(){(we===0||we===3||we===2)&&(we=4),Ne===null||!(Vn&268435455)&&!(Go&268435455)||ln(Ne,be)}function vo(t,e){var n=q;q|=2;var r=om();(Ne!==t||be!==e)&&(Ut=null,jn(t,e));do try{lv();break}catch(i){sm(t,i)}while(1);if(Fu(),q=n,mo.current=r,ve!==null)throw Error(x(261));return Ne=null,be=0,we}function lv(){for(;ve!==null;)lm(ve)}function av(){for(;ve!==null&&!by();)lm(ve)}function lm(t){var e=cm(t.alternate,t,it);t.memoizedProps=t.pendingProps,e===null?am(t):ve=e,Xu.current=null}function am(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tv(n,e),n!==null){n.flags&=32767,ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,ve=null;return}}else if(n=ev(n,e,it),n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);we===0&&(we=5)}function Dn(t,e,n){var r=Y,i=pt.transition;try{pt.transition=null,Y=1,uv(t,e,n,r)}finally{pt.transition=i,Y=r}return null}function uv(t,e,n,r){do Er();while(un!==null);if(q&6)throw Error(x(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(By(t,s),t===Ne&&(ve=Ne=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,dm(Zs,function(){return Er(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pt.transition,pt.transition=null;var o=Y;Y=1;var l=q;q|=4,Xu.current=null,rv(t,n),nm(n,t),N1(xa),eo=!!Ca,xa=Ca=null,t.current=n,iv(n),Ay(),q=l,Y=o,pt.transition=s}else t.current=n;if(bs&&(bs=!1,un=t,yo=i),s=t.pendingLanes,s===0&&(gn=null),Oy(n.stateNode),nt(t,ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(go)throw go=!1,t=Ba,Ba=null,t;return yo&1&&t.tag!==0&&Er(),s=t.pendingLanes,s&1?t===$a?Si++:(Si=0,$a=t):Si=0,Tn(),null}function Er(){if(un!==null){var t=Wf(yo),e=pt.transition,n=Y;try{if(pt.transition=null,Y=16>t?16:t,un===null)var r=!1;else{if(t=un,un=null,yo=0,q&6)throw Error(x(331));var i=q;for(q|=4,P=t.current;P!==null;){var s=P,o=s.child;if(P.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(P=u;P!==null;){var h=P;switch(h.tag){case 0:case 11:case 15:xi(8,h,s)}var d=h.child;if(d!==null)d.return=h,P=d;else for(;P!==null;){h=P;var c=h.sibling,y=h.return;if(Jp(h),h===u){P=null;break}if(c!==null){c.return=y,P=c;break}P=y}}}var g=s.alternate;if(g!==null){var L=g.child;if(L!==null){g.child=null;do{var b=L.sibling;L.sibling=null,L=b}while(L!==null)}}P=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,P=o;else e:for(;P!==null;){if(s=P,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,P=p;break e}P=s.return}}var f=t.current;for(P=f;P!==null;){o=P;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,P=m;else e:for(o=f;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qo(9,l)}}catch(T){fe(l,l.return,T)}if(l===o){P=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,P=w;break e}P=l.return}}if(q=i,Tn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Fo,t)}catch{}r=!0}return r}finally{Y=n,pt.transition=e}}return!1}function sh(t,e,n){e=Mr(n,e),e=Wp(t,e,1),t=mn(t,e,1),e=Ve(),t!==null&&(ss(t,1,e),nt(t,e))}function fe(t,e,n){if(t.tag===3)sh(t,t,n);else for(;e!==null;){if(e.tag===3){sh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=Mr(n,t),t=Bp(e,t,1),e=mn(e,t,1),t=Ve(),e!==null&&(ss(e,1,t),nt(e,t));break}}e=e.return}}function cv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(be&n)===n&&(we===4||we===3&&(be&130023424)===be&&500>ge()-Ju?jn(t,0):Zu|=n),nt(t,e)}function um(t,e){e===0&&(t.mode&1?(e=xs,xs<<=1,!(xs&130023424)&&(xs=4194304)):e=1);var n=Ve();t=Kt(t,e),t!==null&&(ss(t,e,n),nt(t,n))}function dv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),um(t,n)}function hv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),um(t,n)}var cm;cm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||et.current)Xe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xe=!1,J1(t,e,n);Xe=!!(t.flags&131072)}else Xe=!1,le&&e.flags&1048576&&pp(e,lo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vs(t,e),t=e.pendingProps;var i=Dr(e,We.current);xr(e,n),i=qu(null,e,r,t,i,n);var s=Gu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tt(r)?(s=!0,so(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uu(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Da(e,r,t,n),e=za(null,e,r,!0,s,n)):(e.tag=0,le&&s&&Au(e),$e(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pv(r),t=_t(r,t),i){case 0:e=Aa(null,e,r,t,n);break e;case 1:e=Yd(null,e,r,t,n);break e;case 11:e=Gd(null,e,r,t,n);break e;case 14:e=Qd(null,e,r,_t(r.type,t),n);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Aa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Yd(t,e,r,i,n);case 3:e:{if(Gp(e),t===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Lp(t,e),co(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mr(Error(x(423)),e),e=Kd(t,e,r,n,i);break e}else if(r!==i){i=Mr(Error(x(424)),e),e=Kd(t,e,r,n,i);break e}else for(st=pn(e.stateNode.containerInfo.firstChild),ot=e,le=!0,wt=null,n=vp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),r===i){e=Xt(t,e,n);break e}$e(t,e,r,n)}e=e.child}return e;case 5:return wp(e),t===null&&Na(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ea(r,i)?o=null:s!==null&&Ea(r,s)&&(e.flags|=32),qp(t,e),$e(t,e,o,n),e.child;case 6:return t===null&&Na(e),null;case 13:return Qp(t,e,n);case 4:return Wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ar(e,null,r,n):$e(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Gd(t,e,r,i,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ie(ao,r._currentValue),r._currentValue=o,s!==null)if(It(s.value,o)){if(s.children===i.children&&!et.current){e=Xt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=qt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Pa(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pa(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xr(e,n),i=mt(i),r=r(i),e.flags|=1,$e(t,e,r,n),e.child;case 14:return r=e.type,i=_t(r,e.pendingProps),i=_t(r.type,i),Qd(t,e,r,i,n);case 15:return $p(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Vs(t,e),e.tag=1,tt(r)?(t=!0,so(e)):t=!1,xr(e,n),Up(e,r,i),Da(e,r,i,n),za(null,e,r,!0,t,n);case 19:return Yp(t,e,n);case 22:return Vp(t,e,n)}throw Error(x(156,e.tag))};function dm(t,e){return Ff(t,e)}function fv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new fv(t,e,n,r)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pv(t){if(typeof t=="function")return rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cu)return 11;if(t===xu)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case lr:return Hn(n.children,i,s,e);case wu:o=8,i|=8;break;case na:return t=ht(12,n,e,i|2),t.elementType=na,t.lanes=s,t;case ra:return t=ht(13,n,e,i),t.elementType=ra,t.lanes=s,t;case ia:return t=ht(19,n,e,i),t.elementType=ia,t.lanes=s,t;case wf:return Qo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _f:o=10;break e;case Lf:o=9;break e;case Cu:o=11;break e;case xu:o=14;break e;case rn:o=16,r=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return e=ht(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hn(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function Qo(t,e,n,r){return t=ht(22,t,r,e),t.elementType=wf,t.lanes=n,t.stateNode={isHidden:!1},t}function jl(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function Hl(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ic(t,e,n,r,i,s,o,l,a){return t=new mv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ht(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uu(s),t}function gv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hm(t){if(!t)return xn;t=t._reactInternals;e:{if(Zn(t)!==t||t.tag!==1)throw Error(x(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(t.tag===1){var n=t.type;if(tt(n))return hp(t,n,e)}return e}function fm(t,e,n,r,i,s,o,l,a){return t=ic(n,r,!0,t,i,s,o,l,a),t.context=hm(null),n=t.current,r=Ve(),i=yn(n),s=qt(r,i),s.callback=e??null,mn(n,s,i),t.current.lanes=i,ss(t,i,r),nt(t,r),t}function Yo(t,e,n,r){var i=e.current,s=Ve(),o=yn(i);return n=hm(n),e.context===null?e.context=n:e.pendingContext=n,e=qt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mn(i,e,o),t!==null&&(St(t,i,o,s),Ws(t,i,o)),o}function _o(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sc(t,e){oh(t,e),(t=t.alternate)&&oh(t,e)}function yv(){return null}var pm=typeof reportError=="function"?reportError:function(t){console.error(t)};function oc(t){this._internalRoot=t}Ko.prototype.render=oc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(x(409));Yo(t,e,null,null)};Ko.prototype.unmount=oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qn(function(){Yo(null,t,null,null)}),e[Yt]=null}};function Ko(t){this._internalRoot=t}Ko.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<on.length&&e!==0&&e<on[n].priority;n++);on.splice(n,0,t),n===0&&Gf(t)}};function lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lh(){}function vv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_o(o);s.call(u)}}var o=fm(e,r,t,0,null,!1,!1,"",lh);return t._reactRootContainer=o,t[Yt]=o.current,ji(t.nodeType===8?t.parentNode:t),qn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=_o(a);l.call(u)}}var a=ic(t,0,!1,null,null,!1,!1,"",lh);return t._reactRootContainer=a,t[Yt]=a.current,ji(t.nodeType===8?t.parentNode:t),qn(function(){Yo(e,a,n,r)}),a}function Zo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=_o(o);l.call(a)}}Yo(e,o,t,i)}else o=vv(n,e,t,i,r);return _o(o)}Bf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mi(e.pendingLanes);n!==0&&(ku(e,n|1),nt(e,ge()),!(q&6)&&(Or=ge()+500,Tn()))}break;case 13:qn(function(){var r=Kt(t,1);if(r!==null){var i=Ve();St(r,t,1,i)}}),sc(t,1)}};Iu=function(t){if(t.tag===13){var e=Kt(t,134217728);if(e!==null){var n=Ve();St(e,t,134217728,n)}sc(t,134217728)}};$f=function(t){if(t.tag===13){var e=yn(t),n=Kt(t,e);if(n!==null){var r=Ve();St(n,t,e,r)}sc(t,e)}};Vf=function(){return Y};qf=function(t,e){var n=Y;try{return Y=t,e()}finally{Y=n}};pa=function(t,e,n){switch(e){case"input":if(la(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wo(r);if(!i)throw Error(x(90));xf(r),la(r,i)}}}break;case"textarea":Sf(t,n);break;case"select":e=n.value,e!=null&&_r(t,!!n.multiple,e,!1)}};Df=ec;bf=qn;var _v={usingClientEntryPoint:!1,Events:[ls,dr,Wo,Pf,Rf,ec]},ai={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lv={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mf(t),t===null?null:t.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||yv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{Fo=As.inject(Lv),Dt=As}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_v;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lc(e))throw Error(x(200));return gv(t,e,null,n)};at.createRoot=function(t,e){if(!lc(t))throw Error(x(299));var n=!1,r="",i=pm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ic(t,1,!1,null,null,n,!1,r,i),t[Yt]=e.current,ji(t.nodeType===8?t.parentNode:t),new oc(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=Mf(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return qn(t)};at.hydrate=function(t,e,n){if(!Xo(e))throw Error(x(200));return Zo(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!lc(t))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fm(e,null,t,1,n??null,i,!1,s,o),t[Yt]=e.current,ji(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ko(e)};at.render=function(t,e,n){if(!Xo(e))throw Error(x(200));return Zo(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(x(40));return t._reactRootContainer?(qn(function(){Zo(null,null,t,!1,function(){t._reactRootContainer=null,t[Yt]=null})}),!0):!1};at.unstable_batchedUpdates=ec;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xo(n))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return Zo(t,e,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function mm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mm)}catch(t){console.error(t)}}mm(),mf.exports=at;var wv=mf.exports,ah=wv;ea.createRoot=ah.createRoot,ea.hydrateRoot=ah.hydrateRoot;const ir=({card:t,onClick:e,isSelected:n,size:r="md"})=>{if(!t)return null;const i={sm:"w-12 h-16 text-xs",md:"w-20 h-28 text-sm",lg:"w-24 h-32 text-base"},s=()=>{var a;const l=((a=t.hanzi)==null?void 0:a.length)||0;return r==="sm"?l>=4?"text-[0.65rem]":l===3?"text-[0.75rem]":l===2?"text-xs":"text-xl":r==="md"?l>=4?"text-lg":l===3?"text-xl":l===2?"text-3xl":"text-5xl":"text-5xl"},o=()=>{var a;const l=((a=t.pinyin)==null?void 0:a.length)||0;return r==="sm"?"text-[0.5em]":l>10?"text-[0.65em]":"text-[0.8em]"};return v.jsxs("div",{onClick:e,className:`
        relative flex flex-col items-center justify-center gap-0.5 p-1
        bg-white border-[3px] border-[var(--color-stroke-primary)]
        rounded-[12px] cursor-pointer select-none transition-all duration-100 ease-out overflow-hidden
        type-${t.type}
        ${i[r]}
        ${n?"ring-4 ring-offset-2 ring-[var(--color-stroke-primary)] -translate-y-4":"tactile-press hover:-translate-y-1"}
      `,style:{boxShadow:n?"0px 10px 0px var(--color-stroke-primary)":""},children:[v.jsx("span",{className:`font-nunito font-bold text-[var(--color-stroke-primary)] opacity-80 leading-tight text-center w-full break-words ${o()}`,children:t.pinyin}),v.jsx("span",{className:`font-zcool leading-none text-center ${s()}`,style:{color:"var(--tile-accent)"},children:t.hanzi}),t.type==="wild"&&v.jsx("div",{className:"absolute top-0.5 right-0.5 text-[6px] md:text-[8px] bg-[var(--color-wild-purple)] text-white px-1 rounded-full z-10",children:"WIL"})]})},Sr=[{id:"G-01",hanzi:"",pinyin:"gu",en:"(past tense)",type:"grammar",tier:"core"},{id:"G-02",hanzi:"",pinyin:"su rn",en:"although",type:"grammar",tier:"core"},{id:"G-03",hanzi:"",pinyin:"dn sh",en:"but",type:"grammar",tier:"core"},{id:"L1-01",hanzi:"",pinyin:"ho",en:"good",type:"adj",tier:"core"},{id:"L1-02",hanzi:"",pinyin:"n",en:"you",type:"noun",tier:"core",isPronoun:!0},{id:"L1-03",hanzi:"",pinyin:"w",en:"I/me",type:"noun",tier:"core",isPronoun:!0},{id:"L1-04",hanzi:"",pinyin:"jio",en:"to be called",type:"verb",tier:"core",isTransitive:!0},{id:"L1-05",hanzi:"",pinyin:"shn me",en:"what",type:"grammar",tier:"core"},{id:"L1-06",hanzi:"",pinyin:"mng zi",en:"name",type:"noun",tier:"core"},{id:"L1-07",hanzi:"",pinyin:"xng",en:"surname",type:"verb",tier:"core",isTransitive:!0},{id:"L1-08",hanzi:"",pinyin:"gu",en:"noble/expensive",type:"adj",tier:"core"},{id:"L1-09",hanzi:"",pinyin:"qng",en:"please/invite",type:"verb",tier:"core"},{id:"L1-10",hanzi:"",pinyin:"wn",en:"ask",type:"verb",tier:"core"},{id:"L1-11",hanzi:"",pinyin:"wng",en:"Wang (surname)",type:"noun",tier:"core"},{id:"L1-12",hanzi:"",pinyin:"l",en:"Li (surname)",type:"noun",tier:"core"},{id:"L1-13",hanzi:"",pinyin:"xio ji",en:"Miss",type:"noun",tier:"core"},{id:"L1-14",hanzi:"",pinyin:"xin sheng",en:"Mr.",type:"noun",tier:"core"},{id:"L1-15",hanzi:"",pinyin:"ne",en:"(particle)",type:"grammar",tier:"core"},{id:"L1-16",hanzi:"",pinyin:"png you",en:"friend",type:"noun",tier:"core"},{id:"L1-17",hanzi:"",pinyin:"zhng wn",en:"Chinese",type:"noun",tier:"core"},{id:"L1-18",hanzi:"",pinyin:"yng wn",en:"English",type:"noun",tier:"core"},{id:"L1-19",hanzi:"",pinyin:"b",en:"not/no",type:"grammar",tier:"core",isModifier:!0},{id:"L1-20",hanzi:"",pinyin:"sh",en:"is/am/are",type:"verb",tier:"core"},{id:"L1-21",hanzi:"",pinyin:"t",en:"he",type:"noun",tier:"core",isPronoun:!0},{id:"L1-22",hanzi:"",pinyin:"t",en:"she",type:"noun",tier:"core",isPronoun:!0},{id:"L1-23",hanzi:"",pinyin:"zh",en:"this",type:"noun",tier:"core",isDemonstrative:!0},{id:"L1-24",hanzi:"",pinyin:"n",en:"that",type:"noun",tier:"core",isDemonstrative:!0},{id:"L1-25",hanzi:"",pinyin:"y",en:"also",type:"grammar",tier:"core"},{id:"L1-26",hanzi:"",pinyin:"lo sh",en:"teacher",type:"noun",tier:"core"},{id:"L1-27",hanzi:"",pinyin:"xu sheng",en:"student",type:"noun",tier:"core"},{id:"L1-28",hanzi:"",pinyin:"ma",en:"(question)",type:"grammar",tier:"core"},{id:"L1-29",hanzi:"",pinyin:"rn",en:"person",type:"noun",tier:"core"},{id:"L1-30",hanzi:"",pinyin:"zhng gu",en:"China",type:"noun",tier:"core"},{id:"L1-31",hanzi:"",pinyin:"bi jng",en:"Beijing",type:"noun",tier:"core"},{id:"L1-32",hanzi:"",pinyin:"zh zi",en:"live in",type:"verb",tier:"core"},{id:"L1-33",hanzi:"",pinyin:"mi gu",en:"USA",type:"noun",tier:"core"},{id:"L1-34",hanzi:"",pinyin:"xi wi y",en:"Hawaii",type:"noun",tier:"core"},{id:"L1-35",hanzi:"",pinyin:"ni yu",en:"New York",type:"noun",tier:"core"},{id:"L2-01",hanzi:"",pinyin:"w men",en:"we/us",type:"noun",tier:"core",isPronoun:!0},{id:"L2-02",hanzi:"",pinyin:"n men",en:"you (pl)",type:"noun",tier:"core",isPronoun:!0},{id:"L2-03",hanzi:"",pinyin:"t men",en:"they",type:"noun",tier:"core",isPronoun:!0},{id:"L2-04",hanzi:"",pinyin:"du",en:"all/both",type:"grammar",tier:"core"},{id:"L2-05",hanzi:"",pinyin:"shu",en:"speak",type:"verb",tier:"core"},{id:"L2-06",hanzi:"",pinyin:"de",en:"(possessive)",type:"grammar",tier:"core"},{id:"L2-07",hanzi:"",pinyin:"w de",en:"my",type:"noun",tier:"core"},{id:"L2-08",hanzi:"",pinyin:"n de",en:"your",type:"noun",tier:"core"},{id:"L2-09",hanzi:"",pinyin:"t de",en:"his",type:"noun",tier:"core"},{id:"L2-10",hanzi:"",pinyin:"yu",en:"have",type:"verb",tier:"core",isTransitive:!0},{id:"L2-11",hanzi:"",pinyin:"mi yu",en:"not have",type:"verb",tier:"core",isTransitive:!0,isModifier:!0},{id:"L2-12",hanzi:"",pinyin:"h",en:"and",type:"grammar",tier:"core"},{id:"L2-13",hanzi:"",pinyin:"xing",en:"want/think",type:"verb",tier:"core",isTransitive:!0},{id:"L2-14",hanzi:"",pinyin:"x hun",en:"like",type:"verb",tier:"core",isTransitive:!0},{id:"L2-15",hanzi:"",pinyin:"b ba",en:"dad",type:"noun",tier:"core"},{id:"L2-16",hanzi:"",pinyin:"m ma",en:"mom",type:"noun",tier:"core"},{id:"L2-17",hanzi:"",pinyin:"ji jie",en:"older sister",type:"noun",tier:"core"},{id:"L2-18",hanzi:"",pinyin:"g ge",en:"older brother",type:"noun",tier:"core"},{id:"L2-19",hanzi:"",pinyin:"d di",en:"younger brother",type:"noun",tier:"core"},{id:"L2-20",hanzi:"",pinyin:"mi mei",en:"younger sister",type:"noun",tier:"core"},{id:"L2-21",hanzi:"",pinyin:"zho pin",en:"photo",type:"noun",tier:"core"},{id:"L2-22",hanzi:"",pinyin:"g",en:"(measure word)",type:"grammar",tier:"core",isUnit:!0},{id:"L2-23",hanzi:"",pinyin:"shi",en:"who",type:"noun",tier:"core",isPronoun:!0},{id:"L2-24",hanzi:"",pinyin:"ji",en:"home/family",type:"noun",tier:"core"},{id:"L2-25",hanzi:"",pinyin:"j",en:"how many",type:"grammar",tier:"core",isNumber:!0},{id:"L2-26",hanzi:"",pinyin:"ku",en:"(measure word)",type:"grammar",tier:"core",isUnit:!0},{id:"L2-27",hanzi:"",pinyin:"ling",en:"two",type:"noun",tier:"core",isNumber:!0},{id:"L2-28",hanzi:"",pinyin:"zu",en:"do",type:"verb",tier:"core",isTransitive:!0},{id:"L2-29",hanzi:"",pinyin:"gng zu",en:"work",type:"verb",tier:"core"},{id:"L2-30",hanzi:"",pinyin:"l sh",en:"lawyer",type:"noun",tier:"core"},{id:"L2-31",hanzi:"",pinyin:"y shng",en:"doctor",type:"noun",tier:"core"},{id:"L2-32",hanzi:"",pinyin:"zi",en:"at/in",type:"grammar",tier:"core"},{id:"L2-33",hanzi:"",pinyin:"n l",en:"where",type:"noun",tier:"core"},{id:"L2-34",hanzi:"",pinyin:"wi shn me",en:"why",type:"grammar",tier:"core"},{id:"L2-35",hanzi:"",pinyin:"yn wi",en:"because",type:"grammar",tier:"core"},{id:"L3-01",hanzi:"",pinyin:"yu",en:"month",type:"noun",tier:"core",isUnit:!0},{id:"L3-02",hanzi:"",pinyin:"ho",en:"day/number",type:"noun",tier:"core",isUnit:!0},{id:"L3-03",hanzi:"",pinyin:"xng q",en:"week",type:"noun",tier:"core"},{id:"L3-04",hanzi:"",pinyin:"jn tin",en:"today",type:"noun",tier:"core",isTime:!0},{id:"L3-05",hanzi:"",pinyin:"mng tin",en:"tomorrow",type:"noun",tier:"core",isTime:!0},{id:"L3-06",hanzi:"",pinyin:"zu tin",en:"yesterday",type:"noun",tier:"core",isTime:!0},{id:"L3-07",hanzi:"",pinyin:"xin zi",en:"now",type:"noun",tier:"core",isTime:!0},{id:"L3-08",hanzi:"",pinyin:"din",en:"o'clock",type:"noun",tier:"core",isUnit:!0},{id:"L3-09",hanzi:"",pinyin:"zo shang",en:"morning",type:"noun",tier:"core"},{id:"L3-10",hanzi:"",pinyin:"wn shang",en:"evening",type:"noun",tier:"core"},{id:"L3-11",hanzi:"",pinyin:"shng r",en:"birthday",type:"noun",tier:"core"},{id:"L3-12",hanzi:"",pinyin:"jn nin",en:"this year",type:"noun",tier:"core",isTime:!0},{id:"L3-13",hanzi:"",pinyin:"su",en:"years old",type:"noun",tier:"core",isUnit:!0},{id:"L3-14",hanzi:"",pinyin:"yo",en:"want/will",type:"verb",tier:"core"},{id:"L3-15",hanzi:"",pinyin:"gn",en:"with",type:"grammar",tier:"core"},{id:"L3-16",hanzi:"",pinyin:"hu",en:"can/know how",type:"verb",tier:"core"},{id:"L3-17",hanzi:"",pinyin:"kn",en:"look/watch",type:"verb",tier:"core"},{id:"L3-18",hanzi:"",pinyin:"q",en:"go",type:"verb",tier:"core"},{id:"L3-19",hanzi:"",pinyin:"li",en:"come",type:"verb",tier:"core"},{id:"L3-20",hanzi:"",pinyin:"k sh",en:"but",type:"grammar",tier:"core"},{id:"L3-21",hanzi:"",pinyin:"su y",en:"so",type:"grammar",tier:"core"},{id:"L3-22",hanzi:"",pinyin:"k y",en:"can/may",type:"verb",tier:"core"},{id:"L3-23",hanzi:"",pinyin:"zn me yng",en:"how is it",type:"grammar",tier:"core"},{id:"L3-24",hanzi:"",pinyin:"i",en:"love",type:"verb",tier:"core",isTransitive:!0},{id:"L3-25",hanzi:"",pinyin:"zi jin",en:"goodbye",type:"verb",tier:"core"},{id:"L3-26",hanzi:"",pinyin:"ch",en:"eat",type:"verb",tier:"core",isTransitive:!0},{id:"L3-27",hanzi:"",pinyin:"fn",en:"meal/rice",type:"noun",tier:"core"},{id:"L3-28",hanzi:"",pinyin:"xi xie",en:"thanks",type:"verb",tier:"core"},{id:"L3-29",hanzi:"",pinyin:"cn ji",en:"participate",type:"verb",tier:"core"},{id:"L3-30",hanzi:"",pinyin:"hn",en:"very",type:"adj",tier:"core",isModifier:!0},{id:"L3-31",hanzi:"",pinyin:"go xng",en:"happy",type:"adj",tier:"core"},{id:"L3-32",hanzi:"",pinyin:"hi",en:"still/also",type:"grammar",tier:"core"},{id:"L3-33",hanzi:"",pinyin:"xu xio",en:"school",type:"noun",tier:"core"},{id:"L3-34",hanzi:"",pinyin:"zh",en:"only",type:"grammar",tier:"core"},{id:"L3-35",hanzi:"",pinyin:"ci",en:"dish/cuisine",type:"noun",tier:"core"},{id:"L4-01",hanzi:"",pinyin:"zhu m",en:"weekend",type:"noun",tier:"core"},{id:"L4-02",hanzi:"",pinyin:"chng chng",en:"often",type:"grammar",tier:"core"},{id:"L4-03",hanzi:"",pinyin:"wi gu",en:"foreign",type:"noun",tier:"core"},{id:"L4-04",hanzi:"",pinyin:"qng k",en:"treat (host)",type:"verb",tier:"core"},{id:"L4-05",hanzi:"",pinyin:"i ho",en:"hobby",type:"noun",tier:"core"},{id:"L4-06",hanzi:"",pinyin:"dng xi",en:"things",type:"noun",tier:"core"},{id:"L4-07",hanzi:"",pinyin:"shng wng",en:"go online",type:"verb",tier:"core"},{id:"L4-08",hanzi:"",pinyin:"d qi",en:"play ball",type:"verb",tier:"core"},{id:"L4-09",hanzi:"",pinyin:"din yng",en:"movie",type:"noun",tier:"core"},{id:"L4-10",hanzi:"",pinyin:"chng g",en:"sing",type:"verb",tier:"core"},{id:"L4-11",hanzi:"",pinyin:"tng",en:"listen",type:"verb",tier:"core"},{id:"L4-12",hanzi:"",pinyin:"yn yu",en:"music",type:"noun",tier:"core"},{id:"L4-13",hanzi:"",pinyin:"yu de",en:"some",type:"noun",tier:"core"},{id:"L4-14",hanzi:"",pinyin:"de sh hou",en:"when...",type:"grammar",tier:"core"},{id:"L4-15",hanzi:"",pinyin:"fng xu",en:"finish school",type:"verb",tier:"core"},{id:"L4-16",hanzi:"",pinyin:"ho ji",en:"long time",type:"adj",tier:"core"},{id:"L4-17",hanzi:"",pinyin:"b cu",en:"not bad",type:"adj",tier:"core"},{id:"L4-18",hanzi:"",pinyin:"ju de",en:"think/feel",type:"verb",tier:"core",isTransitive:!0},{id:"L4-19",hanzi:"",pinyin:"yu y si",en:"interesting",type:"adj",tier:"core"},{id:"L4-20",hanzi:"",pinyin:"shu jio",en:"sleep",type:"verb",tier:"core"},{id:"L4-21",hanzi:"",pinyin:"sun le",en:"forget it",type:"verb",tier:"core"},{id:"L4-22",hanzi:"",pinyin:"zho",en:"find",type:"verb",tier:"core"},{id:"L4-23",hanzi:"",pinyin:"bi rn",en:"others",type:"noun",tier:"core"},{id:"L5-01",hanzi:"",pinyin:"kui",en:"fast",type:"adj",tier:"core"},{id:"L5-02",hanzi:"",pinyin:"jn li",en:"come in",type:"verb",tier:"core"},{id:"L5-03",hanzi:"",pinyin:"ji sho",en:"introduce",type:"verb",tier:"core",isTransitive:!0},{id:"L5-04",hanzi:"",pinyin:"y xi",en:"a bit",type:"grammar",tier:"core"},{id:"L5-05",hanzi:"",pinyin:"h",en:"drink",type:"verb",tier:"core",isTransitive:!0},{id:"L5-06",hanzi:"",pinyin:"shu",en:"water",type:"noun",tier:"core"},{id:"L5-07",hanzi:"",pinyin:"ch",en:"tea",type:"noun",tier:"core"},{id:"L5-08",hanzi:"",pinyin:"k fi",en:"coffee",type:"noun",tier:"core"},{id:"L5-09",hanzi:"",pinyin:"k l",en:"cola",type:"noun",tier:"core"},{id:"L5-10",hanzi:"",pinyin:"gu zh",en:"juice",type:"noun",tier:"core"},{id:"L5-11",hanzi:"",pinyin:"di",en:"bring",type:"verb",tier:"core"},{id:"L5-12",hanzi:"",pinyin:"pio liang",en:"pretty",type:"adj",tier:"core"},{id:"L5-13",hanzi:"",pinyin:"shui",en:"handsome",type:"adj",tier:"core"},{id:"L5-14",hanzi:"",pinyin:"zu",en:"sit",type:"verb",tier:"core"},{id:"L5-15",hanzi:"",pinyin:"du bu q",en:"sorry",type:"verb",tier:"core"},{id:"L5-16",hanzi:"",pinyin:"ba",en:"(suggestion)",type:"grammar",tier:"core"},{id:"L5-17",hanzi:"",pinyin:"y q",en:"together",type:"grammar",tier:"core"},{id:"L5-18",hanzi:"",pinyin:"lio tin",en:"chat",type:"verb",tier:"core"},{id:"L5-19",hanzi:"",pinyin:"ci",en:"only then",type:"grammar",tier:"core"},{id:"L5-20",hanzi:"",pinyin:"le",en:"(particle)",type:"grammar",tier:"core"},{id:"L5-21",hanzi:"",pinyin:"gi",en:"give/to",type:"verb",tier:"core"},{id:"L6-01",hanzi:"",pinyin:"zu",en:"most",type:"grammar",tier:"core"},{id:"L6-02",hanzi:"",pinyin:"y hu",en:"after",type:"noun",tier:"core"},{id:"L6-03",hanzi:"",pinyin:"y qin",en:"before",type:"noun",tier:"core"},{id:"L6-04",hanzi:"",pinyin:"b ho y si",en:"embarrassed",type:"adj",tier:"core"},{id:"L6-05",hanzi:"",pinyin:"yo shi",en:"if",type:"grammar",tier:"core"},{id:"L6-06",hanzi:"",pinyin:"din z yu jin",en:"email",type:"noun",tier:"core"},{id:"L6-07",hanzi:"",pinyin:"shu do",en:"receive",type:"verb",tier:"core"},{id:"L6-08",hanzi:"",pinyin:"f",en:"send",type:"verb",tier:"core",isTransitive:!0},{id:"L6-09",hanzi:"",pinyin:"xi",en:"write",type:"verb",tier:"core",isTransitive:!0},{id:"L6-10",hanzi:"",pinyin:"ji",en:"then/just",type:"grammar",tier:"core"},{id:"L6-11",hanzi:"",pinyin:"nn",en:"You (polite)",type:"noun",tier:"core",isPronoun:!0},{id:"L6-12",hanzi:"",pinyin:"d din hu",en:"make call",type:"verb",tier:"core"},{id:"L6-13",hanzi:"",pinyin:"n",en:"which",type:"grammar",tier:"core",isDemonstrative:!0},{id:"L6-14",hanzi:"",pinyin:"wi",en:"(measure)",type:"grammar",tier:"core",isUnit:!0},{id:"L6-15",hanzi:"",pinyin:"sh jin",en:"time",type:"noun",tier:"core",isTime:!0},{id:"L6-16",hanzi:"",pinyin:"ki hu",en:"meeting",type:"verb",tier:"core"},{id:"L6-17",hanzi:"",pinyin:"yu sh jin",en:"schedule",type:"verb",tier:"core"},{id:"L6-18",hanzi:"",pinyin:"shu j",en:"mobile",type:"noun",tier:"core"},{id:"L6-19",hanzi:"",pinyin:"ko sh",en:"exam",type:"noun",tier:"core"},{id:"L6-20",hanzi:"",pinyin:"fng bin",en:"convenient",type:"adj",tier:"core"},{id:"L6-21",hanzi:"",pinyin:"bn gng sh",en:"office",type:"noun",tier:"core"},{id:"L6-22",hanzi:"",pinyin:"dng",en:"wait",type:"verb",tier:"core"},{id:"L6-23",hanzi:"",pinyin:"bi",en:"don't",type:"grammar",tier:"core"},{id:"L6-24",hanzi:"",pinyin:"k qi",en:"polite",type:"adj",tier:"core"},{id:"L6-25",hanzi:"",pinyin:"bng",en:"help",type:"verb",tier:"core"},{id:"L6-26",hanzi:"",pinyin:"zhn bi",en:"prepare",type:"verb",tier:"core"},{id:"L6-27",hanzi:"",pinyin:"lin x",en:"practice",type:"verb",tier:"core"},{id:"L6-28",hanzi:"",pinyin:"di",en:"must",type:"grammar",tier:"core"},{id:"L6-29",hanzi:"",pinyin:"jin min",en:"meet",type:"verb",tier:"core"},{id:"L6-30",hanzi:"",pinyin:"hu li",en:"come back",type:"verb",tier:"core"},{id:"L6-31",hanzi:"",pinyin:"yng gi",en:"should",type:"verb",tier:"core"},{id:"L6-32",hanzi:"",pinyin:"zn me",en:"how",type:"grammar",tier:"core"},{id:"L4-24",hanzi:"",pinyin:"yu de sh hou",en:"sometimes",type:"grammar",tier:"core",isTime:!0},{id:"L4-25",hanzi:"",pinyin:"din z yu x",en:"video games",type:"noun",tier:"core"},{id:"L4-26",hanzi:"",pinyin:"d",en:"play/hit",type:"verb",tier:"core",isTransitive:!0},{id:"L4-27",hanzi:"",pinyin:"tio w",en:"dance",type:"verb",tier:"core"},{id:"L4-28",hanzi:"",pinyin:"ho wnr",en:"fun",type:"adj",tier:"core"},{id:"L4-29",hanzi:"",pinyin:"sh",en:"book",type:"noun",tier:"core"},{id:"L4-30",hanzi:"",pinyin:"hi bin",en:"seaside",type:"noun",tier:"core"},{id:"L4-31",hanzi:"",pinyin:"mng",en:"busy",type:"adj",tier:"core"},{id:"L4-32",hanzi:"",pinyin:"y si",en:"meaning",type:"noun",tier:"core"},{id:"L4-33",hanzi:"",pinyin:"y",en:"one",type:"noun",tier:"core",isNumber:!0},{id:"L4-34",hanzi:"",pinyin:"wnr",en:"play",type:"verb",tier:"core"},{id:"L4-35",hanzi:"",pinyin:"ji rn",en:"family members",type:"noun",tier:"core"},{id:"L4-36",hanzi:"",pinyin:"gng yun",en:"park",type:"noun",tier:"core"},{id:"L4-37",hanzi:"",pinyin:"jin",en:"see",type:"verb",tier:"core",isTransitive:!0},{id:"L5-22",hanzi:"'Iolani",pinyin:"'Iolani",en:"'Iolani",type:"noun",tier:"core"},{id:"L5-23",hanzi:"",pinyin:"shng",en:"attend/up",type:"verb",tier:"core",isTransitive:!0},{id:"L5-24",hanzi:"",pinyin:"k",en:"class",type:"noun",tier:"core"},{id:"L5-25",hanzi:"",pinyin:"gng k",en:"homework",type:"noun",tier:"core"},{id:"L5-26",hanzi:"",pinyin:"ti",en:"too",type:"adj",tier:"core",isModifier:!0},{id:"L5-27",hanzi:"",pinyin:"nn",en:"difficult",type:"adj",tier:"core"},{id:"L5-28",hanzi:"",pinyin:"s",en:"four",type:"noun",tier:"core",isNumber:!0},{id:"L5-29",hanzi:"",pinyin:"bn",en:"half",type:"noun",tier:"core",isNumber:!0},{id:"L5-30",hanzi:"",pinyin:"do",en:"arrive",type:"verb",tier:"core"},{id:"L5-31",hanzi:"",pinyin:"bi",en:"cup",type:"grammar",tier:"core",isUnit:!0},{id:"L5-32",hanzi:"",pinyin:"zhn zh ni ch",en:"boba tea",type:"noun",tier:"core"},{id:"L5-33",hanzi:"",pinyin:"l",en:"inside",type:"noun",tier:"core"},{id:"L5-34",hanzi:"",pinyin:"bng gn",en:"cookies",type:"noun",tier:"core"},{id:"L5-35",hanzi:"",pinyin:"shu gu",en:"fruit",type:"noun",tier:"core"},{id:"L5-36",hanzi:"",pinyin:"y dinr",en:"a little",type:"grammar",tier:"core"},{id:"L5-37",hanzi:"",pinyin:"hu",en:"return",type:"verb",tier:"core",isTransitive:!0},{id:"L5-38",hanzi:"",pinyin:"sh",en:"ten",type:"noun",tier:"core",isNumber:!0},{id:"L6-33",hanzi:"",pinyin:"hu",en:"after",type:"grammar",tier:"core"},{id:"L6-34",hanzi:"",pinyin:"shng w",en:"morning",type:"noun",tier:"core",isTime:!0},{id:"L6-35",hanzi:"",pinyin:"xi w",en:"afternoon",type:"noun",tier:"core",isTime:!0},{id:"L6-36",hanzi:"",pinyin:"dun xn",en:"text message",type:"noun",tier:"core"},{id:"L6-37",hanzi:"",pinyin:"k fi din",en:"coffee shop",type:"noun",tier:"core"},{id:"L6-38",hanzi:"",pinyin:"shng q",en:"angry",type:"adj",tier:"core"},{id:"L6-39",hanzi:"",pinyin:"bng gng",en:"helper",type:"noun",tier:"core"},{id:"L6-40",hanzi:"",pinyin:"zh do",en:"know",type:"verb",tier:"core",isTransitive:!0},{id:"L6-41",hanzi:"",pinyin:"zn me bn",en:"what to do",type:"verb",tier:"core"},{id:"L6-42",hanzi:"",pinyin:"zu hu",en:"finally",type:"noun",tier:"core",isTime:!0},{id:"w1",hanzi:"",pinyin:"Wild",en:"Any",type:"wild",tier:"core"}],Cv=["L2-06","L5-20","L1-28","G-01","L2-35","L3-21","G-02","G-03"],gm=["L1-20","L2-32","L3-14","L2-13","L3-18","L2-14","L2-10","L2-11"],xv=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},Ul=(t=40)=>{let e=[];const n=Sr.filter(r=>!gm.includes(r.id));for(let r=0;r<t;r++){const i=n[r%n.length];e.push({...i,id:`${i.id}-${Date.now()}-${r}`})}return xv(e)},ym=[{id:"L1",title:"Basic Identity",description:"Introducing yourself",vocabularyIds:["L1-01","L1-02","L1-03","L1-04","L1-05","L1-06","L1-07","L1-08","L1-09","L1-10","L1-11","L1-12","L1-13","L1-14","L1-15","L1-16","L1-17","L1-18","L1-19","L1-20","L1-21","L1-22","L1-23","L1-24","L1-25","L1-26","L1-27","L1-28","L1-29","L1-30","L1-31","L1-32","L1-33","L1-34","L1-35","L2-06"],problems:[{id:"L1-P1",prompt:'Translate: "I am a teacher"',solutions:["",""],requiredCardIds:["L1-03","L1-20","L1-26"]},{id:"L1-P2",prompt:'Translate: "You are a student"',solutions:["",""],requiredCardIds:["L1-02","L1-20","L1-27"]},{id:"L1-P3",prompt:'Translate: "Is he your friend?"',solutions:["",""],requiredCardIds:["L1-21","L1-20","L1-02","L2-06","L1-16","L1-28"]},{id:"L1-P4",prompt:'Translate: "I am not a teacher"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L1-26"]},{id:"L1-P5",prompt:'Translate: "Are you American?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-33","L1-29","L1-28"]},{id:"L1-P6",prompt:'Translate: "He lives in Beijing"',solutions:[""],requiredCardIds:["L1-21","L1-32","L1-31"]},{id:"L1-P7",prompt:'Translate: "What is her name?"',solutions:[""],requiredCardIds:["L1-22","L1-04","L1-05","L1-06"]},{id:"L1-P8",prompt:'Translate: "Are you Chinese?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-30","L1-29","L1-28"]},{id:"L1-P9",prompt:'Translate: "Hello"',solutions:[""],requiredCardIds:["L1-02","L1-01"]},{id:"L1-P10",prompt:'Translate: "My surname is Wang"',solutions:[""],requiredCardIds:["L1-03","L1-07","L1-11"]},{id:"L1-P11",prompt:'Translate: "Is he a student?"',solutions:[""],requiredCardIds:["L1-21","L1-20","L1-27","L1-28"]},{id:"L1-P12",prompt:'Translate: "I ask you"',solutions:[""],requiredCardIds:["L1-03","L1-10","L1-02"]},{id:"L1-P13",prompt:'Translate: "May I ask teacher?"',solutions:["",""],requiredCardIds:["L1-09","L1-10","L1-26"]},{id:"L1-P14",prompt:'Translate: "She is Teacher Li"',solutions:[""],requiredCardIds:["L1-22","L1-20","L1-12","L1-26"]},{id:"L1-P15",prompt:'Translate: "Are you a teacher?"',solutions:["",""],requiredCardIds:["L1-02","L1-20","L1-26","L1-28"]},{id:"L1-P16",prompt:'Translate: "I am not a student"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L1-27"]},{id:"L1-P17",prompt:'Translate: "Is she your friend?"',solutions:["",""],requiredCardIds:["L1-22","L1-20","L1-02","L2-06","L1-16","L1-28"]},{id:"L1-P18",prompt:'Translate: "Do you live in New York?"',solutions:[""],requiredCardIds:["L1-02","L1-32","L1-35","L1-28"]},{id:"L1-P19",prompt:'Translate: "He is Chinese"',solutions:[""],requiredCardIds:["L1-21","L1-20","L1-30","L1-29"]},{id:"L1-P20",prompt:'Translate: "Are you Miss Wang?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-11","L1-13","L1-28"]}]},{id:"L2",title:"Likes & Dislikes",description:"Expressing preferences",vocabularyIds:["L2-01","L2-02","L2-03","L2-04","L2-05","L2-06","L2-07","L2-08","L2-09","L2-10","L2-11","L2-12","L2-13","L2-14","L2-15","L2-16","L2-17","L2-18","L2-19","L2-20","L2-21","L2-22","L2-23","L2-24","L2-25","L2-26","L2-27","L2-28","L2-29","L2-30","L2-31","L2-32","L2-33","L2-34","L2-35"],problems:[{id:"L2-P1",prompt:'Translate: "I like Chinese food"',solutions:["","","",""],requiredCardIds:["L1-03","L2-14","L1-30","L3-27","L3-35"]},{id:"L2-P2",prompt:'Translate: "I do not like exams"',solutions:[""],requiredCardIds:["L1-03","L1-19","L2-14","L6-19"]},{id:"L2-P3",prompt:'Translate: "We all like him"',solutions:[""],requiredCardIds:["L2-01","L2-04","L2-14","L1-21"]},{id:"L2-P4",prompt:'Translate: "I do not have a brother"',solutions:["",""],requiredCardIds:["L1-03","L2-11","L2-18"]},{id:"L2-P5",prompt:'Translate: "My dad is a doctor"',solutions:["",""],requiredCardIds:["L1-03","L2-15","L1-20","L2-31"]},{id:"L2-P6",prompt:'Translate: "She likes to work"',solutions:[""],requiredCardIds:["L1-22","L2-14","L2-29"]},{id:"L2-P7",prompt:'Translate: "We are all friends"',solutions:[""],requiredCardIds:["L2-01","L2-04","L1-20","L1-16"]},{id:"L2-P8",prompt:'Translate: "Whose photo is this?"',solutions:[""],requiredCardIds:["L1-23","L1-20","L2-23","L2-06","L2-21"]},{id:"L2-P9",prompt:'Translate: "How many people in your family?"',solutions:[""],requiredCardIds:["L1-02","L2-24","L2-10","L2-25","L2-26","L1-29"]},{id:"L2-P10",prompt:'Translate: "What do you want to do?"',solutions:[""],requiredCardIds:["L1-02","L2-13","L2-28","L1-05"]},{id:"L2-P11",prompt:'Translate: "I am not a lawyer"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L2-30"]},{id:"L2-P12",prompt:'Translate: "Do you like him?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L1-21","L1-28"]},{id:"L2-P13",prompt:'Translate: "Because I like Chinese"',solutions:[""],requiredCardIds:["L2-35","L1-03","L2-14","L1-17"]},{id:"L2-P14",prompt:'Translate: "Who is she?"',solutions:[""],requiredCardIds:["L1-22","L1-20","L2-23"]},{id:"L2-P15",prompt:'Translate: "Does he have a younger brother?"',solutions:[""],requiredCardIds:["L1-21","L2-10","L2-19","L1-28"]},{id:"L2-P16",prompt:'Translate: "We do not have photos"',solutions:[""],requiredCardIds:["L2-01","L2-11","L2-21"]},{id:"L2-P17",prompt:'Translate: "My older sister is a doctor"',solutions:["",""],requiredCardIds:["L1-03","L2-17","L1-20","L2-31"]},{id:"L2-P18",prompt:'Translate: "I want to be a lawyer"',solutions:[""],requiredCardIds:["L1-03","L2-13","L2-28","L2-30"]},{id:"L2-P19",prompt:'Translate: "Where does he work?"',solutions:[""],requiredCardIds:["L1-21","L2-32","L2-33","L2-29"]},{id:"L2-P20",prompt:'Translate: "They are all students"',solutions:[""],requiredCardIds:["L2-03","L2-04","L1-20","L1-27"]}]},{id:"L3",title:"Making Plans",description:"Time and arrangements",vocabularyIds:["L3-01","L3-02","L3-03","L3-04","L3-05","L3-06","L3-07","L3-08","L3-09","L3-10","L3-11","L3-12","L3-13","L3-14","L3-15","L3-16","L3-17","L3-18","L3-19","L3-20","L3-21","L3-22","L3-23","L3-24","L3-25","L3-26","L3-27","L3-28","L3-29","L3-30","L3-31","L3-32","L3-33","L3-34","L3-35"],problems:[{id:"L3-P1",prompt:'Translate: "Tomorrow evening"',solutions:[""],requiredCardIds:["L3-05","L3-10"]},{id:"L3-P2",prompt:'Translate: "I treat (pay for meal)"',solutions:[""],requiredCardIds:["L1-03","L4-04"]},{id:"L3-P3",prompt:'Translate: "Tomorrow evening I treat"',solutions:[""],requiredCardIds:["L3-05","L3-10","L1-03","L4-04"]},{id:"L3-P4",prompt:'Translate: "What time is it now?"',solutions:[""],requiredCardIds:["L3-07","L2-25","L3-08"]},{id:"L3-P5",prompt:'Translate: "I go to Beijing tomorrow"',solutions:["",""],requiredCardIds:["L1-03","L3-05","L3-18","L1-31"]},{id:"L3-P6",prompt:'Translate: "I like to eat Chinese food"',solutions:["",""],requiredCardIds:["L1-03","L2-14","L3-26","L1-30","L3-27","L3-35"]},{id:"L3-P7",prompt:'Translate: "Is Chinese food tasty?"',solutions:["",""],requiredCardIds:["L1-30","L3-27","L3-35","L1-01","L3-26","L1-28"]},{id:"L3-P8",prompt:'Translate: "Today is not my birthday"',solutions:[""],requiredCardIds:["L3-04","L1-19","L1-20","L2-07","L3-11"]},{id:"L3-P9",prompt:'Translate: "Do you like watching movies?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L3-17","L4-09","L1-28"]},{id:"L3-P10",prompt:'Translate: "I go to school"',solutions:[""],requiredCardIds:["L1-03","L3-18","L3-33"]},{id:"L3-P11",prompt:'Translate: "Thank you teacher"',solutions:[""],requiredCardIds:["L3-28","L1-26"]},{id:"L3-P12",prompt:'Translate: "I am very happy"',solutions:[""],requiredCardIds:["L1-03","L3-30","L3-31"]},{id:"L3-P13",prompt:'Translate: "Come to my home"',solutions:[""],requiredCardIds:["L3-19","L1-03","L2-24"]},{id:"L3-P14",prompt:'Translate: "I go to see a friend"',solutions:[""],requiredCardIds:["L1-03","L3-18","L3-17","L1-16"]},{id:"L3-P15",prompt:'Translate: "Do you want to eat Chinese food?"',solutions:["",""],requiredCardIds:["L1-02","L3-14","L3-26","L1-30","L3-27","L3-35","L1-28"]},{id:"L3-P16",prompt:'Translate: "Is tomorrow your birthday?"',solutions:[""],requiredCardIds:["L3-05","L1-20","L1-02","L2-06","L3-11","L1-28"]},{id:"L3-P17",prompt:'Translate: "Goodbye"',solutions:[""],requiredCardIds:["L3-25"]},{id:"L3-P18",prompt:'Translate: "I am very good"',solutions:[""],requiredCardIds:["L1-03","L3-30","L1-01"]},{id:"L3-P19",prompt:'Translate: "Do you like school?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L3-33","L1-28"]},{id:"L3-P20",prompt:'Translate: "I like to eat rice"',solutions:[""],requiredCardIds:["L1-03","L2-14","L3-26","L3-27"]}]},{id:"L4",title:"Hobbies & Free Time",description:"Activities and frequency",vocabularyIds:["L4-01","L4-02","L4-03","L4-04","L4-05","L4-06","L4-08","L4-09","L4-10","L4-11","L4-12","L4-13","L4-14","L4-15","L4-16","L4-17","L4-18","L4-19","L4-20","L4-21","L4-22","L4-23","L4-24","L4-25","L4-26","L4-27","L4-28","L4-29","L4-30","L4-31","L4-32","L4-33","L4-34","L4-35","L4-36","L4-37","L1-21","L1-22","L1-02","L1-03","L2-14","L2-32","L3-17","L2-35","L3-21","L2-11","L3-30","L3-31"],problems:[{id:"L4-P1",prompt:'Translate: "He is often at home on weekends"',solutions:[""],requiredCardIds:["L1-21","L4-01","L4-02","L2-32","L2-24"]},{id:"L4-P2",prompt:'Translate: "She sometimes watches movies"',solutions:[""],requiredCardIds:["L1-22","L4-24","L3-17","L4-09"]},{id:"L4-P3",prompt:'Translate: "He sometimes plays video games"',solutions:[""],requiredCardIds:["L1-21","L4-24","L4-26","L4-25"]},{id:"L4-P4",prompt:'Translate: "She likes to go dancing with friends"',solutions:[""],requiredCardIds:["L1-22","L2-14","L3-15","L1-16","L3-18","L4-27"]},{id:"L4-P5",prompt:'Translate: "He likes playing ball"',solutions:[""],requiredCardIds:["L1-21","L2-14","L4-08"]},{id:"L4-P6",prompt:'Translate: "She is not at home on weekends"',solutions:[""],requiredCardIds:["L1-22","L4-01","L1-19","L2-32","L2-24"]},{id:"L4-P7",prompt:'Translate: "He thinks watching movies is fun"',solutions:[""],requiredCardIds:["L1-21","L4-18","L3-17","L4-09","L3-30","L4-28"]},{id:"L4-P8",prompt:'Translate: "She thinks playing ball is boring (no meaning)"',solutions:[""],requiredCardIds:["L1-22","L4-18","L4-08","L2-11","L4-32"]},{id:"L4-P9",prompt:'Translate: "Some people like reading books"',solutions:[""],requiredCardIds:["L4-13","L1-29","L2-14","L3-17","L4-29"]},{id:"L4-P10",prompt:'Translate: "Some people like playing ball"',solutions:[""],requiredCardIds:["L4-13","L1-29","L2-14","L4-08"]},{id:"L4-P11",prompt:'Translate: "He often plays alone at home"',solutions:[""],requiredCardIds:["L1-21","L4-02","L4-33","L2-22","L1-29","L2-32","L2-24","L4-34"]},{id:"L4-P12",prompt:'Translate: "She goes to the seaside with family"',solutions:[""],requiredCardIds:["L1-22","L3-15","L4-35","L3-18","L4-30"]},{id:"L4-P13",prompt:'Translate: "Because he likes playing ball, so he goes to the park"',solutions:["",""],requiredCardIds:["L2-35","L1-21","L2-14","L4-08","L3-21","L3-18","L4-36"]},{id:"L4-P14",prompt:'Translate: "Because she is busy, so she does not come"',solutions:["",""],requiredCardIds:["L2-35","L1-22","L3-30","L4-31","L3-21","L1-19","L3-19"]},{id:"L4-P15",prompt:`Translate: "He hasn't seen his friend for a long time"`,solutions:[""],requiredCardIds:["L1-21","L4-16","L1-19","L4-37","L1-16","L5-20"]},{id:"L4-P16",prompt:'Translate: "Is she busy today?"',solutions:[""],requiredCardIds:["L1-22","L3-04","L4-31","L1-19","L4-31"]},{id:"L4-P17",prompt:'Translate: "He wants to find someone to play ball with"',solutions:[""],requiredCardIds:["L1-21","L2-13","L4-22","L1-29","L3-15","L1-21","L4-08"]},{id:"L4-P18",prompt:'Translate: "No one wants to play ball with him"',solutions:[""],requiredCardIds:["L2-11","L1-29","L2-13","L3-15","L1-21","L4-08"]},{id:"L4-P19",prompt:'Translate: "He goes to play ball alone"',solutions:[""],requiredCardIds:["L1-21","L4-33","L2-22","L1-29","L3-18","L4-08"]},{id:"L4-P20",prompt:'Translate: "He is very unhappy"',solutions:[""],requiredCardIds:["L1-21","L3-30","L1-19","L3-31"]}]},{id:"L5",title:"School Life",description:"Visiting friends & school",vocabularyIds:["L5-01","L5-02","L5-03","L5-04","L5-05","L5-06","L5-07","L5-08","L5-09","L5-10","L5-11","L5-12","L5-13","L5-14","L5-15","L5-16","L5-17","L5-18","L5-19","L5-20","L5-21","L5-22","L5-23","L5-24","L5-25","L5-26","L5-27","L5-28","L5-29","L5-30","L5-31","L5-32","L5-33","L5-34","L5-35","L5-36","L5-37","L5-38","L6-24","L1-20","L1-21","L2-06","L3-33","L2-03","L1-17","L2-35","L3-21","L2-11"],problems:[{id:"L5-P1",prompt:`Translate: "He is a student at 'Iolani School"`,solutions:["Iolani","Iolani"],requiredCardIds:["L1-21","L1-20","L5-22","L3-33","L2-06","L1-27"]},{id:"L5-P2",prompt:'Translate: "They attend Chinese class together"',solutions:[""],requiredCardIds:["L2-03","L5-17","L5-23","L1-17","L5-24"]},{id:"L5-P3",prompt:`Translate: "Because homework is too hard, he didn't do it"`,solutions:["",""],requiredCardIds:["L2-35","L5-25","L5-26","L5-27","L3-21","L1-21","L2-11","L2-28"]},{id:"L5-P4",prompt:`Translate: "He arrives at friend's home at 4:30"`,solutions:[""],requiredCardIds:["L1-21","L5-28","L3-08","L5-29","L5-30","L1-16","L2-06","L2-24"]},{id:"L5-P5",prompt:'Translate: "His mom is also at home"',solutions:[""],requiredCardIds:["L2-09","L2-16","L1-25","L2-32","L2-24"]},{id:"L5-P6",prompt:'Translate: "He wants to introduce his good friend"',solutions:[""],requiredCardIds:["L1-21","L2-13","L5-03","L2-09","L1-01","L1-16"]},{id:"L5-P7",prompt:'Translate: "He brought two cups of boba tea"',solutions:[""],requiredCardIds:["L1-21","L5-11","L5-20","L2-27","L5-31","L5-32"]},{id:"L5-P8",prompt:'Translate: "Mom says: You are too polite"',solutions:[""],requiredCardIds:["L2-16","L2-05","L1-02","L5-26","L6-24","L5-20"]},{id:"L5-P9",prompt:'Translate: "There are no cookies at home (Home inside no cookies)"',solutions:[""],requiredCardIds:["L2-24","L5-33","L2-11","L5-34"]},{id:"L5-P10",prompt:'Translate: "They have fruit"',solutions:[""],requiredCardIds:["L2-03","L2-10","L5-35"]},{id:"L5-P11",prompt:'Translate: "He wants to eat a little fruit"',solutions:[""],requiredCardIds:["L1-21","L2-13","L3-26","L5-36","L5-35"]},{id:"L5-P12",prompt:'Translate: "They chat, do not do homework"',solutions:["",""],requiredCardIds:["L2-03","L5-18","L1-19","L2-28","L5-25"]},{id:"L5-P13",prompt:'Translate: "He thinks homework is not hard"',solutions:[""],requiredCardIds:["L1-21","L4-18","L5-25","L1-19","L5-27"]},{id:"L5-P14",prompt:'Translate: "They want to do homework tomorrow"',solutions:[""],requiredCardIds:["L2-03","L2-13","L3-05","L2-28","L5-25"]},{id:"L5-P15",prompt:'Translate: "Mom is not happy"',solutions:[""],requiredCardIds:["L2-16","L1-19","L3-31"]},{id:"L5-P16",prompt:'Translate: "They play video games"',solutions:[""],requiredCardIds:["L2-03","L4-26","L4-25"]},{id:"L5-P17",prompt:'Translate: "They play together"',solutions:[""],requiredCardIds:["L2-03","L5-17","L4-34"]},{id:"L5-P18",prompt:'Translate: "He returns home at 10pm"',solutions:[""],requiredCardIds:["L1-21","L3-10","L5-38","L3-08","L5-37","L2-24"]},{id:"L5-P19",prompt:`Translate: "They didn't do Chinese homework"`,solutions:[""],requiredCardIds:["L2-03","L2-11","L2-28","L1-17","L5-25"]},{id:"L5-P20",prompt:'Translate: "Teacher will be unhappy"',solutions:[""],requiredCardIds:["L1-26","L3-16","L1-19","L3-31"]}]},{id:"L6",title:"Daily Life",description:"Time & sequencing",vocabularyIds:["L6-01","L6-02","L6-03","L6-04","L6-05","L6-06","L6-07","L6-08","L6-09","L6-10","L6-11","L6-12","L6-13","L6-14","L6-15","L6-16","L6-17","L6-18","L6-19","L6-20","L6-21","L6-22","L6-23","L6-24","L6-25","L6-26","L6-27","L6-28","L6-29","L6-30","L6-31","L6-32","L6-33","L6-34","L6-35","L6-36","L6-37","L6-38","L6-39","L6-40","L6-41","L6-42","L4-15","L1-21","L5-37","L2-24","L4-20","L3-17","L2-10","L5-24","L3-30","L4-31","L5-21","L1-16"],problems:[{id:"L6-P1",prompt:'Translate: "After school, he goes home"',solutions:[""],requiredCardIds:["L4-15","L6-33","L1-21","L5-37","L2-24"]},{id:"L6-P2",prompt:'Translate: "He does homework after returning home"',solutions:[""],requiredCardIds:["L1-21","L5-37","L2-24","L6-02","L2-28","L5-25"]},{id:"L6-P3",prompt:'Translate: "Before sleeping, he looks at phone"',solutions:[""],requiredCardIds:["L4-20","L6-03","L1-21","L3-17","L6-18"]},{id:"L6-P4",prompt:'Translate: "He has class in the morning"',solutions:[""],requiredCardIds:["L6-34","L1-21","L2-10","L5-24"]},{id:"L6-P5",prompt:'Translate: "He is very busy in the afternoon"',solutions:[""],requiredCardIds:["L6-35","L1-21","L3-30","L4-31"]},{id:"L6-P6",prompt:'Translate: "He calls a friend"',solutions:[""],requiredCardIds:["L1-21","L5-21","L1-16","L6-12"]},{id:"L6-P7",prompt:'Translate: "He texts a friend"',solutions:[""],requiredCardIds:["L1-21","L5-21","L1-16","L6-08","L6-36"]},{id:"L6-P8",prompt:`Translate: "He received friend's text"`,solutions:[""],requiredCardIds:["L1-21","L6-07","L1-16","L2-06","L6-36"]},{id:"L6-P9",prompt:'Translate: "Friend wants to schedule time with him"',solutions:[""],requiredCardIds:["L1-16","L2-13","L3-15","L1-21","L6-17"]},{id:"L6-P10",prompt:'Translate: "They meet at coffee shop"',solutions:[""],requiredCardIds:["L2-03","L2-32","L6-37","L6-29"]},{id:"L6-P11",prompt:`Translate: "Because it's convenient, they go to coffee shop"`,solutions:["",""],requiredCardIds:["L2-35","L3-30","L6-20","L3-21","L2-03","L3-18","L6-37"]},{id:"L6-P12",prompt:'Translate: "He has no time"',solutions:[""],requiredCardIds:["L1-21","L2-11","L6-15"]},{id:"L6-P13",prompt:'Translate: "He is not convenient now"',solutions:[""],requiredCardIds:["L1-21","L3-07","L1-19","L6-20"]},{id:"L6-P14",prompt:'Translate: "Sometimes he is very busy"',solutions:[""],requiredCardIds:["L4-24","L1-21","L3-30","L4-31"]},{id:"L6-P15",prompt:'Translate: "He thinks friend is very angry"',solutions:[""],requiredCardIds:["L1-21","L4-18","L1-16","L3-30","L6-38"]},{id:"L6-P16",prompt:'Translate: "He wants to chat with friend"',solutions:[""],requiredCardIds:["L1-21","L2-13","L3-15","L1-16","L5-18"]},{id:"L6-P17",prompt:'Translate: "Teacher is not present"',solutions:["",""],requiredCardIds:["L1-26","L1-19","L2-32"]},{id:"L6-P18",prompt:`Translate: "He waits for teacher's helper"`,solutions:[""],requiredCardIds:["L1-21","L6-22","L1-26","L2-06","L6-39"]},{id:"L6-P19",prompt:`Translate: "He doesn't know what to do"`,solutions:[""],requiredCardIds:["L1-21","L1-19","L6-40","L6-41"]},{id:"L6-P20",prompt:'Translate: "Finally, he went home"',solutions:[""],requiredCardIds:["L6-42","L1-21","L5-37","L2-24","L5-20"]}]}],Ev=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=function(t,e){if(!t)throw Qr(e)},Qr=function(t){return new Error("Firebase Database ("+vm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Sv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ac={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let c=(l&15)<<2|u>>6,y=u&63;a||(y=64,o||(c=64)),r.push(n[h],n[d],n[c],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_m(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new kv;const c=s<<2|l>>4;if(r.push(c),u!==64){const y=l<<4&240|u>>2;if(r.push(y),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lm=function(t){const e=_m(t);return ac.encodeByteArray(e,!0)},Lo=function(t){return Lm(t).replace(/\./g,"")},Ga=function(t){try{return ac.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){return wm(void 0,t)}function wm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Tv(n)||(t[n]=wm(t[n],e[n]));return t}function Tv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=()=>Nv().__FIREBASE_DEFAULTS__,Rv=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Dv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ga(t[1]);return e&&JSON.parse(e)},Cm=()=>{try{return Ev()||Pv()||Rv()||Dv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bv=t=>{var e,n;return(n=(e=Cm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Av=t=>{const e=bv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xm=()=>{var t;return(t=Cm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Lo(JSON.stringify(n)),Lo(JSON.stringify(o)),l].join(".")}const ki={};function Ov(){const t={prod:[],emulator:[]};for(const e of Object.keys(ki))ki[e]?t.emulator.push(e):t.prod.push(e);return t}function Fv(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let uh=!1;function jv(t,e){if(typeof window>"u"||typeof document>"u"||!uc(window.location.host)||ki[t]===e||ki[t]||uh)return;ki[t]=e;function n(c){return`__firebase__banner__${c}`}const r="__firebase__banner",s=Ov().prod.length>0;function o(){const c=document.getElementById(r);c&&c.remove()}function l(c){c.style.display="flex",c.style.background="#7faaf0",c.style.position="fixed",c.style.bottom="5px",c.style.left="5px",c.style.padding=".5em",c.style.borderRadius="5px",c.style.alignItems="center"}function a(c,y){c.setAttribute("width","24"),c.setAttribute("id",y),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px"}function u(){const c=document.createElement("span");return c.style.cursor="pointer",c.style.marginLeft="16px",c.style.fontSize="24px",c.innerHTML=" &times;",c.onclick=()=>{uh=!0,o()},c}function h(c,y){c.setAttribute("id",y),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline"}function d(){const c=Fv(r),y=n("text"),g=document.getElementById(y)||document.createElement("span"),L=n("learnmore"),b=document.getElementById(L)||document.createElement("a"),p=n("preprendIcon"),f=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.created){const m=c.element;l(m),h(b,L);const w=u();a(f,p),m.append(f,g,b,w),document.body.appendChild(m)}s?(g.innerText="Preview backend disconnected.",f.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(f.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Em(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hv())}function Uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sm(){return vm.NODE_ADMIN===!0}function Wv(){try{return typeof indexedDB=="object"}catch{return!1}}function Bv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$v,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,km.prototype.create)}}class km{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Vv(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new cs(i,l,r)}}function Vv(t,e){return t.replace(qv,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){return JSON.parse(t)}function Te(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Qi(Ga(s[0])||""),n=Qi(Ga(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Gv=function(t){const e=Im(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Qv=function(t){const e=Im(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ch(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Co(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dh(s)&&dh(o)){if(!Co(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const c=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Jo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,S(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},el=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new us;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e_(e))try{this.getOrInitializeService({instanceIdentifier:bn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bn){return this.instances.has(e)}getOptions(e=bn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Jv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bn){return this.component?this.component.multipleInstances?e:bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jv(t){return t===bn?void 0:t}function e_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const n_={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},r_=ne.INFO,i_={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},s_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=i_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=r_,this._logHandler=s_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const o_=(t,e)=>e.some(n=>t instanceof n);let hh,fh;function l_(){return hh||(hh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a_(){return fh||(fh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nm=new WeakMap,Qa=new WeakMap,Pm=new WeakMap,Wl=new WeakMap,cc=new WeakMap;function u_(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_n(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nm.set(n,t)}).catch(()=>{}),cc.set(e,t),e}function c_(t){if(Qa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qa.set(t,e)}let Ya={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d_(t){Ya=t(Ya)}function h_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bl(this),e,...n);return Pm.set(r,e.sort?e.sort():[e]),_n(r)}:a_().includes(t)?function(...e){return t.apply(Bl(this),e),_n(Nm.get(this))}:function(...e){return _n(t.apply(Bl(this),e))}}function f_(t){return typeof t=="function"?h_(t):(t instanceof IDBTransaction&&c_(t),o_(t,l_())?new Proxy(t,Ya):t)}function _n(t){if(t instanceof IDBRequest)return u_(t);if(Wl.has(t))return Wl.get(t);const e=f_(t);return e!==t&&(Wl.set(t,e),cc.set(e,t)),e}const Bl=t=>cc.get(t);function p_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=_n(o);return r&&o.addEventListener("upgradeneeded",a=>{r(_n(o.result),a.oldVersion,a.newVersion,_n(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const m_=["get","getKey","getAll","getAllKeys","count"],g_=["put","add","delete","clear"],$l=new Map;function ph(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($l.get(e))return $l.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=g_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||m_.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return $l.set(e,s),s}d_(t=>({...t,get:(e,n,r)=>ph(e,n)||t.get(e,n,r),has:(e,n)=>!!ph(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ka="@firebase/app",mh="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=new Tm("@firebase/app"),__="@firebase/app-compat",L_="@firebase/analytics-compat",w_="@firebase/analytics",C_="@firebase/app-check-compat",x_="@firebase/app-check",E_="@firebase/auth",S_="@firebase/auth-compat",k_="@firebase/database",I_="@firebase/data-connect",T_="@firebase/database-compat",N_="@firebase/functions",P_="@firebase/functions-compat",R_="@firebase/installations",D_="@firebase/installations-compat",b_="@firebase/messaging",A_="@firebase/messaging-compat",z_="@firebase/performance",M_="@firebase/performance-compat",O_="@firebase/remote-config",F_="@firebase/remote-config-compat",j_="@firebase/storage",H_="@firebase/storage-compat",U_="@firebase/firestore",W_="@firebase/ai",B_="@firebase/firestore-compat",$_="firebase",V_="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]",q_={[Ka]:"fire-core",[__]:"fire-core-compat",[w_]:"fire-analytics",[L_]:"fire-analytics-compat",[x_]:"fire-app-check",[C_]:"fire-app-check-compat",[E_]:"fire-auth",[S_]:"fire-auth-compat",[k_]:"fire-rtdb",[I_]:"fire-data-connect",[T_]:"fire-rtdb-compat",[N_]:"fire-fn",[P_]:"fire-fn-compat",[R_]:"fire-iid",[D_]:"fire-iid-compat",[b_]:"fire-fcm",[A_]:"fire-fcm-compat",[z_]:"fire-perf",[M_]:"fire-perf-compat",[O_]:"fire-rc",[F_]:"fire-rc-compat",[j_]:"fire-gcs",[H_]:"fire-gcs-compat",[U_]:"fire-fst",[B_]:"fire-fst-compat",[W_]:"fire-vertex","fire-js":"fire-js",[$_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Map,G_=new Map,Za=new Map;function gh(t,e){try{t.container.addComponent(e)}catch(n){Zt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(Za.has(e))return Zt.debug(`There were multiple attempts to register component ${e}.`),!1;Za.set(e,t);for(const n of xo.values())gh(n,t);for(const n of G_.values())gh(n,t);return!0}function Q_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Y_(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new km("app","Firebase",K_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=V_;function Rm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Xa,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ln.create("bad-app-name",{appName:String(i)});if(n||(n=xm()),!n)throw Ln.create("no-options");const s=xo.get(i);if(s){if(Co(n,s.options)&&Co(r,s.config))return s;throw Ln.create("duplicate-app",{appName:i})}const o=new t_(i);for(const a of Za.values())o.addComponent(a);const l=new X_(n,r,o);return xo.set(i,l),l}function J_(t=Xa){const e=xo.get(t);if(!e&&t===Xa&&xm())return Rm();if(!e)throw Ln.create("no-app",{appName:t});return e}function kr(t,e,n){let r=q_[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zt.warn(o.join(" "));return}Eo(new Yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firebase-heartbeat-database",t0=1,Ki="firebase-heartbeat-store";let Vl=null;function Dm(){return Vl||(Vl=p_(e0,t0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ki)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ln.create("idb-open",{originalErrorMessage:t.message})})),Vl}async function n0(t){try{const n=(await Dm()).transaction(Ki),r=await n.objectStore(Ki).get(bm(t));return await n.done,r}catch(e){if(e instanceof cs)Zt.warn(e.message);else{const n=Ln.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zt.warn(n.message)}}}async function yh(t,e){try{const r=(await Dm()).transaction(Ki,"readwrite");await r.objectStore(Ki).put(e,bm(t)),await r.done}catch(n){if(n instanceof cs)Zt.warn(n.message);else{const r=Ln.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zt.warn(r.message)}}}function bm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=1024,i0=30;class s0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vh();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>i0){const o=a0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vh(),{heartbeatsToSend:r,unsentEntries:i}=o0(this._heartbeatsCache.heartbeats),s=Lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zt.warn(n),""}}}function vh(){return new Date().toISOString().substring(0,10)}function o0(t,e=r0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_h(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_h(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wv()?Bv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _h(t){return Lo(JSON.stringify({version:2,heartbeats:t})).length}function a0(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){Eo(new Yi("platform-logger",e=>new y_(e),"PRIVATE")),Eo(new Yi("heartbeat",e=>new s0(e),"PRIVATE")),kr(Ka,mh,t),kr(Ka,mh,"esm2020"),kr("fire-js","")}u0("");var c0="firebase",d0="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(c0,d0,"app");const Lh="@firebase/database",wh="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am="";function h0(t){Am=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Te(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return At(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new f0(e)}}catch{}return new p0},Fn=zm("localStorage"),Ja=zm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Tm("@firebase/database"),m0=function(){let t=1;return function(){return t++}}(),Mm=function(t){const e=Xv(t),n=new Kv;n.update(e);const r=n.digest();return ac.encodeByteArray(r)},ds=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ds.apply(null,r):typeof r=="object"?e+=Te(r):e+=r,e+=" "}return e};let Un=null,Ch=!0;const g0=function(t,e){S(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ir.logLevel=ne.VERBOSE,Un=Ir.log.bind(Ir),e&&Ja.set("logging_enabled",!0)):typeof t=="function"?Un=t:(Un=null,Ja.remove("logging_enabled"))},De=function(...t){if(Ch===!0&&(Ch=!1,Un===null&&Ja.get("logging_enabled")===!0&&g0(!0)),Un){const e=ds.apply(null,t);Un(e)}},hs=function(t){return function(...e){De(t,...e)}},eu=function(...t){const e="FIREBASE INTERNAL ERROR: "+ds(...t);Ir.error(e)},Jt=function(...t){const e=`FIREBASE FATAL ERROR: ${ds(...t)}`;throw Ir.error(e),new Error(e)},qe=function(...t){const e="FIREBASE WARNING: "+ds(...t);Ir.warn(e)},y0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},v0=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jr="[MIN_NAME]",Gn="[MAX_NAME]",Jn=function(t,e){if(t===e)return 0;if(t===jr||e===Gn)return-1;if(e===jr||t===Gn)return 1;{const n=xh(t),r=xh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_0=function(t,e){return t===e?0:t<e?-1:1},ui=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Te(e))},hc=function(t){if(typeof t!="object"||t===null)return Te(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Te(e[r]),n+=":",n+=hc(t[e[r]]);return n+="}",n},Om=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Fm=function(t){S(!dc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let c=parseInt(h.substr(a,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},L0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},w0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function C0(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const x0=new RegExp("^-?(0*)\\d{1,10}$"),E0=-2147483648,S0=2147483647,xh=function(t){if(x0.test(t)){const e=Number(t);if(e>=E0&&e<=S0)return e}return null},Kr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw qe("Exception was thrown by user callback.",n),e},Math.floor(0))}},k0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ii=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Y_(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qe(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qe(e)}}class Tr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Tr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="5",jm="v",Hm="s",Um="r",Wm="f",Bm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$m="ls",Vm="p",tu="ac",qm="websocket",Gm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function N0(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ym(t,e,n){S(typeof e=="string","typeof type must == string"),S(typeof n=="object","typeof params must == object");let r;if(e===qm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Gm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);N0(t)&&(n.ns=t.namespace);const i=[];return ze(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.counters_={}}incrementCounter(e,n=1){At(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Iv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={},Gl={};function pc(t){const e=t.toString();return ql[e]||(ql[e]=new P0),ql[e]}function R0(t,e){const n=t.toString();return Gl[n]||(Gl[n]=e()),Gl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Kr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="start",b0="close",A0="pLPCommand",z0="pRTLPCB",Km="id",Xm="pw",Zm="ser",M0="cb",O0="seg",F0="ts",j0="d",H0="dframe",Jm=1870,eg=30,U0=Jm-eg,W0=25e3,B0=3e4;class vr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hs(e),this.stats_=pc(n),this.urlFn=a=>(this.appCheckToken&&(a[tu]=this.appCheckToken),Ym(n,Gm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new D0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(B0)),v0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mc((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Eh)this.id=l,this.password=a;else if(o===b0)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Eh]="t",r[Zm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[M0]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jm]=fc,this.transportSessionId&&(r[Hm]=this.transportSessionId),this.lastSessionId&&(r[$m]=this.lastSessionId),this.applicationId&&(r[Vm]=this.applicationId),this.appCheckToken&&(r[tu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Bm.test(location.hostname)&&(r[Um]=Wm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vr.forceAllow_=!0}static forceDisallow(){vr.forceDisallow_=!0}static isAvailable(){return vr.forceAllow_?!0:!vr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!L0()&&!w0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Lm(n),i=Om(r,U0);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[H0]="t",r[Km]=e,r[Xm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Te(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class mc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=m0(),window[A0+this.uniqueCallbackIdentifier]=e,window[z0+this.uniqueCallbackIdentifier]=n,this.myIFrame=mc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){De("frame writing exception"),l.stack&&De(l.stack),De(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||De("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Km]=this.myID,e[Xm]=this.myPW,e[Zm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eg+r.length<=Jm;){const o=this.pendingSegs.shift();r=r+"&"+O0+i+"="+o.seg+"&"+F0+i+"="+o.ts+"&"+j0+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(W0)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{De("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=16384,V0=45e3;let So=null;typeof MozWebSocket<"u"?So=MozWebSocket:typeof WebSocket<"u"&&(So=WebSocket);class Ct{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hs(this.connId),this.stats_=pc(n),this.connURL=Ct.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[jm]=fc,typeof location<"u"&&location.hostname&&Bm.test(location.hostname)&&(o[Um]=Wm),n&&(o[Hm]=n),r&&(o[$m]=r),i&&(o[tu]=i),s&&(o[Vm]=s),Ym(e,qm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fn.set("previous_websocket_failure",!0);try{let r;Sm(),this.mySock=new So(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ct.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&So!==null&&!Ct.forceDisallow_}static previouslyFailed(){return Fn.isInMemoryStorage||Fn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Qi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Om(n,$0);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(V0))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ct.responsesRequiredToBeHealthy=2;Ct.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static get ALL_TRANSPORTS(){return[vr,Ct]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ct&&Ct.isAvailable();let r=n&&!Ct.previouslyFailed();if(e.webSocketOnly&&(n||qe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ct];else{const i=this.transports_=[];for(const s of Xi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Xi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=6e4,G0=5e3,Q0=10*1024,Y0=100*1024,Ql="t",Sh="d",K0="s",kh="r",X0="e",Ih="o",Th="a",Nh="n",Ph="p",Z0="h";class J0{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hs("c:"+this.id+":"),this.transportManager_=new Xi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ii(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Y0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Q0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ql in e){const n=e[Ql];n===Th?this.upgradeIfSecondaryHealthy_():n===kh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ih&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ui("t",e),r=ui("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ph,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Th,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Nh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ui("t",e),r=ui("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ui(Ql,e);if(Sh in e){const r=e[Sh];if(n===Z0){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Nh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===K0?this.onConnectionShutdown_(r):n===kh?this.onReset_(r):n===X0?eu("Server Error: "+r):n===Ih?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),fc!==r&&qe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ii(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(q0))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ii(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(G0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ph,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends ng{static getInstance(){return new ko}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Em()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=32,Dh=768;class K{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Q(){return new K("")}function H(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function En(t){return t.pieces_.length-t.pieceNum_}function re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new K(t.pieces_,e)}function gc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function eL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Zi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new K(e,0)}function pe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof K)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new K(n,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function Ze(t,e){const n=H(t),r=H(e);if(n===null)return e;if(n===r)return Ze(re(t),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tL(t,e){const n=Zi(t,0),r=Zi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Jn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function yc(t,e){if(En(t)!==En(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ft(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(En(t)>En(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nL{constructor(e,n){this.errorPrefix_=n,this.parts_=Zi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=el(this.parts_[r]);ig(this)}}function rL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=el(e),ig(t)}function iL(t){const e=t.parts_.pop();t.byteLength_-=el(e),t.parts_.length>0&&(t.byteLength_-=1)}function ig(t){if(t.byteLength_>Dh)throw new Error(t.errorPrefix_+"has a key path longer than "+Dh+" bytes ("+t.byteLength_+").");if(t.parts_.length>Rh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rh+") or object contains a cycle "+An(t))}function An(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends ng{static getInstance(){return new vc}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=1e3,sL=60*5*1e3,bh=30*1e3,oL=1.3,lL=3e4,aL="server_kill",Ah=3;class Gt extends tg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Gt.nextPersistentConnectionId_++,this.log_=hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ci,this.maxReconnectDelay_=sL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Sm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ko.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Te(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new us,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Gt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&At(e,"w")){const r=Fr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();qe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Qv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=bh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Gv(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Te(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):eu("Unrecognized action received from server: "+Te(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lL&&(this.reconnectDelay_=ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){S(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,l=new J0(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{qe(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(aL)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&qe(d),a())}}}interrupt(e){De("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){De("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ch(this.interruptReasons_)&&(this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>hc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new K(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){De("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ah&&(this.reconnectDelay_=bh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){De("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ah&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Am.replace(/\./g,"-")]=1,Em()?e["framework.cordova"]=1:Uv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ko.getInstance().currentlyOnline();return ch(this.interruptReasons_)&&e}}Gt.nextPersistentConnectionId_=0;Gt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new U(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new U(jr,e),i=new U(jr,n);return this.compare(r,i)!==0}minPost(){return U.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs;class sg extends tl{static get __EMPTY_NODE(){return zs}static set __EMPTY_NODE(e){zs=e}compare(e,n){return Jn(e.name,n.name)}isDefinedOn(e){throw Qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return U.MIN}maxPost(){return new U(Gn,zs)}makePost(e,n){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new U(e,zs)}toString(){return".key"}}const Nr=new sg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ke{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ke.RED,this.left=i??Je.EMPTY_NODE,this.right=s??Je.EMPTY_NODE}copy(e,n,r,i,s){return new ke(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Je.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Je.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ke.RED=!0;ke.BLACK=!1;class uL{copy(e,n,r,i,s){return this}insert(e,n,r){return new ke(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Je{constructor(e,n=Je.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Je(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ke.BLACK,null,null))}remove(e){return new Je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ke.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ms(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ms(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ms(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ms(this.root_,null,this.comparator_,!0,e)}}Je.EMPTY_NODE=new uL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e){return Jn(t.name,e.name)}function _c(t,e){return Jn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu;function dL(t){nu=t}const og=function(t){return typeof t=="number"?"number:"+Fm(t):"string:"+t},lg=function(t){if(t.isLeafNode()){const e=t.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&At(e,".sv"),"Priority must be a string or number.")}else S(t===nu||t.isEmpty(),"priority of unexpected type.");S(t===nu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh;class Ee{static set __childrenNodeConstructor(e){zh=e}static get __childrenNodeConstructor(){return zh}constructor(e,n=Ee.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),lg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ee(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return W(e)?this:H(e)===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ee.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=H(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||En(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ee.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+og(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Fm(this.value_):e+=this.value_,this.lazyHash_=Mm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ee.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ee.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ee.VALUE_TYPE_ORDER.indexOf(n),s=Ee.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ee.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag,ug;function hL(t){ag=t}function fL(t){ug=t}class pL extends tl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Jn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return U.MIN}maxPost(){return new U(Gn,new Ee("[PRIORITY-POST]",ug))}makePost(e,n){const r=ag(e);return new U(n,new Ee("[PRIORITY-POST]",r))}toString(){return".priority"}}const me=new pL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=Math.log(2);class gL{constructor(e){const n=s=>parseInt(Math.log(s)/mL,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Io=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,c;if(h===0)return null;if(h===1)return d=t[a],c=n?n(d):d,new ke(c,d.node,ke.BLACK,null,null);{const y=parseInt(h/2,10)+a,g=i(a,y),L=i(y+1,u);return d=t[y],c=n?n(d):d,new ke(c,d.node,ke.BLACK,g,L)}},s=function(a){let u=null,h=null,d=t.length;const c=function(g,L){const b=d-g,p=d;d-=g;const f=i(b+1,p),m=t[b],w=n?n(m):m;y(new ke(w,m.node,L,null,f))},y=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<a.count;++g){const L=a.nextBitIsOne(),b=Math.pow(2,a.count-(g+1));L?c(b,ke.BLACK):(c(b,ke.BLACK),c(b,ke.RED))}return h},o=new gL(t.length),l=s(o);return new Je(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl;const sr={};class Vt{static get Default(){return S(sr&&me,"ChildrenNode.ts has not been loaded"),Yl=Yl||new Vt({".priority":sr},{".priority":me}),Yl}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Fr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Je?n:null}hasIndex(e){return At(this.indexSet_,e.toString())}addIndex(e,n){S(e!==Nr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(U.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Io(r,e.getCompare()):l=sr;const a=e.toString(),u={...this.indexSet_};u[a]=e;const h={...this.indexes_};return h[a]=l,new Vt(h,u)}addToIndexes(e,n){const r=wo(this.indexes_,(i,s)=>{const o=Fr(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),i===sr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(U.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Io(l,o.getCompare())}else return sr;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new U(e.name,l))),a.insert(e,e.node)}});return new Vt(r,this.indexSet_)}removeFromIndexes(e,n){const r=wo(this.indexes_,i=>{if(i===sr)return i;{const s=n.get(e.name);return s?i.remove(new U(e.name,s)):i}});return new Vt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di;class M{static get EMPTY_NODE(){return di||(di=new M(new Je(_c),null,Vt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&lg(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||di}updatePriority(e){return this.children_.isEmpty()?this:new M(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?di:n}}getChild(e){const n=H(e);return n===null?this:this.getImmediateChild(n).getChild(re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(S(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new U(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?di:this.priorityNode_;return new M(i,o,s)}}updateChild(e,n){const r=H(e);if(r===null)return n;{S(H(e)!==".priority"||En(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(re(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(me,(o,l)=>{n[o]=l.val(e),r++,s&&M.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+og(this.getPriority().val())+":"),this.forEachChild(me,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Mm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new U(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new U(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new U(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,U.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,U.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fs?-1:0}withIndex(e){if(e===Nr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new M(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Nr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(me),i=n.getIterator(me);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Nr?null:this.indexMap_.get(e.toString())}}M.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yL extends M{constructor(){super(new Je(_c),M.EMPTY_NODE,Vt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}}const fs=new yL;Object.defineProperties(U,{MIN:{value:new U(jr,M.EMPTY_NODE)},MAX:{value:new U(Gn,fs)}});sg.__EMPTY_NODE=M.EMPTY_NODE;Ee.__childrenNodeConstructor=M;dL(fs);fL(fs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=!0;function Ie(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ee(n,Ie(e))}if(!(t instanceof Array)&&vL){const n=[];let r=!1;if(ze(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ie(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new U(o,a)))}}),n.length===0)return M.EMPTY_NODE;const s=Io(n,cL,o=>o.name,_c);if(r){const o=Io(n,me.getCompare());return new M(s,Ie(e),new Vt({".priority":o},{".priority":me}))}else return new M(s,Ie(e),Vt.Default)}else{let n=M.EMPTY_NODE;return ze(t,(r,i)=>{if(At(t,r)&&r.substring(0,1)!=="."){const s=Ie(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ie(e))}}hL(Ie);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L extends tl{constructor(e){super(),this.indexPath_=e,S(!W(e)&&H(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Jn(e.name,n.name):s}makePost(e,n){const r=Ie(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new U(n,i)}maxPost(){const e=M.EMPTY_NODE.updateChild(this.indexPath_,fs);return new U(Gn,e)}toString(){return Zi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends tl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Jn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return U.MIN}maxPost(){return U.MAX}makePost(e,n){const r=Ie(e);return new U(n,r)}toString(){return".value"}}const wL=new LL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){return{type:"value",snapshotNode:t}}function Hr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ji(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function es(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function CL(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ji(n,l)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Hr(n,r)):o.trackChildChange(es(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(me,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ji(i,s))}),n.isLeafNode()||n.forEachChild(me,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(es(i,s,o))}else r.trackChildChange(Hr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.indexedFilter_=new Lc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ts.getStartPost_(e),this.endPost_=ts.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new U(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);const s=this;return n.forEachChild(me,(o,l)=>{s.matches(new U(o,l))||(i=i.updateImmediateChild(o,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ts(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new U(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,y)=>d(y,c)}else o=this.index_.getCompare();const l=e;S(l.numChildren()===this.limit_,"");const a=new U(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const y=c==null?1:o(c,a);if(h&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(es(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ji(n,d));const L=l.updateImmediateChild(n,M.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(s!=null&&s.trackChildChange(Hr(c.name,c.node)),L.updateImmediateChild(c.name,c.node)):L}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Ji(u.name,u.node)),s.trackChildChange(Hr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,M.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===me}copy(){const e=new wc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function EL(t){return t.loadsAllData()?new Lc(t.getIndex()):t.hasLimit()?new xL(t):new ts(t)}function Mh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===me?n="$priority":t.index_===wL?n="$value":t.index_===Nr?n="$key":(S(t.index_ instanceof _L,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Te(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Te(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Te(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Te(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Te(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Oh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==me&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends tg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hs("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=To.getListenId_(e,r),l={};this.listens_[o]=l;const a=Mh(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Fr(this.listens_,o)===l){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",i(c,null)}})}unlisten(e,n){const r=To.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Mh(e._queryParams),r=e._path.toString(),i=new us;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yv(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Qi(l.responseText)}catch{qe("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&qe("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return{value:null,children:new Map}}function dg(t,e,n){if(W(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=H(e);t.children.has(r)||t.children.set(r,No());const i=t.children.get(r);e=re(e),dg(i,e,n)}}function ru(t,e,n){t.value!==null?n(e,t.value):kL(t,(r,i)=>{const s=new K(e.toString()+"/"+r);ru(i,s,n)})}function kL(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&ze(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=10*1e3,TL=30*1e3,NL=5*60*1e3;class PL{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new IL(e);const r=Fh+(TL-Fh)*Math.random();Ii(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ze(e,(i,s)=>{s>0&&At(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ii(this.reportStats_.bind(this),Math.floor(Math.random()*2*NL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xt||(xt={}));function Cc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ec(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xt.ACK_USER_WRITE,this.source=Cc()}operationForChild(e){if(W(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new K(e));return new Po(Q(),n,this.revert)}}else return S(H(this.path)===e,"operationForChild called for unrelated child."),new Po(re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.source=e,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(e){return W(this.path)?new ns(this.source,Q()):new ns(this.source,re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xt.OVERWRITE}operationForChild(e){return W(this.path)?new Qn(this.source,Q(),this.snap.getImmediateChild(e)):new Qn(this.source,re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xt.MERGE}operationForChild(e){if(W(this.path)){const n=this.children.subtree(new K(e));return n.isEmpty()?null:n.value?new Qn(this.source,Q(),n.value):new Ur(this.source,Q(),n)}else return S(H(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ur(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;const n=H(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function DL(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(CL(o.childName,o.snapshotNode))}),hi(t,i,"child_removed",e,r,n),hi(t,i,"child_added",e,r,n),hi(t,i,"child_moved",s,r,n),hi(t,i,"child_changed",e,r,n),hi(t,i,"value",e,r,n),i}function hi(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>AL(t,l,a)),o.forEach(l=>{const a=bL(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function bL(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function AL(t,e,n){if(e.childName==null||n.childName==null)throw Qr("Should only compare child_ events.");const r=new U(e.childName,e.snapshotNode),i=new U(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){return{eventCache:t,serverCache:e}}function Ti(t,e,n,r){return nl(new Yn(e,n,r),t.serverCache)}function hg(t,e,n,r){return nl(t.eventCache,new Yn(e,n,r))}function iu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;const zL=()=>(Kl||(Kl=new Je(_0)),Kl);class te{static fromObject(e){let n=new te(null);return ze(e,(r,i)=>{n=n.set(new K(r),i)}),n}constructor(e,n=zL()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(W(e))return null;{const r=H(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(re(e),n);return s!=null?{path:pe(new K(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{const n=H(e),r=this.children.get(n);return r!==null?r.subtree(re(e)):new te(null)}}set(e,n){if(W(e))return new te(n,this.children);{const r=H(e),s=(this.children.get(r)||new te(null)).set(re(e),n),o=this.children.insert(r,s);return new te(this.value,o)}}remove(e){if(W(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=H(e),r=this.children.get(n);if(r){const i=r.remove(re(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new te(null):new te(this.value,s)}else return this}}get(e){if(W(e))return this.value;{const n=H(e),r=this.children.get(n);return r?r.get(re(e)):null}}setTree(e,n){if(W(e))return n;{const r=H(e),s=(this.children.get(r)||new te(null)).setTree(re(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new te(this.value,o)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(pe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(W(e))return null;{const s=H(e),o=this.children.get(s);return o?o.findOnPath_(re(e),pe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(W(e))return this;{this.value&&r(n,this.value);const i=H(e),s=this.children.get(i);return s?s.foreachOnPath_(re(e),pe(n,i),r):new te(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(pe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.writeTree_=e}static empty(){return new kt(new te(null))}}function Ni(t,e,n){if(W(e))return new kt(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ze(i,e);return s=s.updateChild(o,n),new kt(t.writeTree_.set(i,s))}else{const i=new te(n),s=t.writeTree_.setTree(e,i);return new kt(s)}}}function su(t,e,n){let r=t;return ze(n,(i,s)=>{r=Ni(r,pe(e,i),s)}),r}function jh(t,e){if(W(e))return kt.empty();{const n=t.writeTree_.setTree(e,new te(null));return new kt(n)}}function ou(t,e){return er(t,e)!=null}function er(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function Hh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(me,(r,i)=>{e.push(new U(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new U(r,i.value))}),e}function wn(t,e){if(W(e))return t;{const n=er(t,e);return n!=null?new kt(new te(n)):new kt(t.writeTree_.subtree(e))}}function lu(t){return t.writeTree_.isEmpty()}function Wr(t,e){return fg(Q(),t.writeTree_,e)}function fg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=fg(pe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(pe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t,e){return yg(e,t)}function ML(t,e,n,r,i){S(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ni(t.visibleWrites,e,n)),t.lastWriteId=r}function OL(t,e,n,r){S(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=su(t.visibleWrites,e,n),t.lastWriteId=r}function FL(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function jL(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);S(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&HL(l,r.path)?i=!1:ft(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return UL(t),!0;if(r.snap)t.visibleWrites=jh(t.visibleWrites,r.path);else{const l=r.children;ze(l,a=>{t.visibleWrites=jh(t.visibleWrites,pe(r.path,a))})}return!0}else return!1}function HL(t,e){if(t.snap)return ft(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ft(pe(t.path,n),e))return!0;return!1}function UL(t){t.visibleWrites=pg(t.allWrites,WL,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function WL(t){return t.visible}function pg(t,e,n){let r=kt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)ft(n,o)?(l=Ze(n,o),r=Ni(r,l,s.snap)):ft(o,n)&&(l=Ze(o,n),r=Ni(r,Q(),s.snap.getChild(l)));else if(s.children){if(ft(n,o))l=Ze(n,o),r=su(r,l,s.children);else if(ft(o,n))if(l=Ze(o,n),W(l))r=su(r,Q(),s.children);else{const a=Fr(s.children,H(l));if(a){const u=a.getChild(re(l));r=Ni(r,Q(),u)}}}else throw Qr("WriteRecord should have .snap or .children")}}return r}function mg(t,e,n,r,i){if(!r&&!i){const s=er(t.visibleWrites,e);if(s!=null)return s;{const o=wn(t.visibleWrites,e);if(lu(o))return n;if(n==null&&!ou(o,Q()))return null;{const l=n||M.EMPTY_NODE;return Wr(o,l)}}}else{const s=wn(t.visibleWrites,e);if(!i&&lu(s))return n;if(!i&&n==null&&!ou(s,Q()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ft(u.path,e)||ft(e,u.path))},l=pg(t.allWrites,o,e),a=n||M.EMPTY_NODE;return Wr(l,a)}}}function BL(t,e,n){let r=M.EMPTY_NODE;const i=er(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(me,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=wn(t.visibleWrites,e);return n.forEachChild(me,(o,l)=>{const a=Wr(wn(s,new K(o)),l);r=r.updateImmediateChild(o,a)}),Hh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=wn(t.visibleWrites,e);return Hh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function $L(t,e,n,r,i){S(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=pe(e,n);if(ou(t.visibleWrites,s))return null;{const o=wn(t.visibleWrites,s);return lu(o)?i.getChild(n):Wr(o,i.getChild(n))}}function VL(t,e,n,r){const i=pe(e,n),s=er(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=wn(t.visibleWrites,i);return Wr(o,r.getNode().getImmediateChild(n))}else return null}function qL(t,e){return er(t.visibleWrites,e)}function GL(t,e,n,r,i,s,o){let l;const a=wn(t.visibleWrites,e),u=er(a,Q());if(u!=null)l=u;else if(n!=null)l=Wr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),c=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=c.getNext();for(;y&&h.length<i;)d(y,r)!==0&&h.push(y),y=c.getNext();return h}else return[]}function QL(){return{visibleWrites:kt.empty(),allWrites:[],lastWriteId:-1}}function Ro(t,e,n,r){return mg(t.writeTree,t.treePath,e,n,r)}function kc(t,e){return BL(t.writeTree,t.treePath,e)}function Uh(t,e,n,r){return $L(t.writeTree,t.treePath,e,n,r)}function Do(t,e){return qL(t.writeTree,pe(t.treePath,e))}function YL(t,e,n,r,i,s){return GL(t.writeTree,t.treePath,e,n,r,i,s)}function Ic(t,e,n){return VL(t.writeTree,t.treePath,e,n)}function gg(t,e){return yg(pe(t.treePath,e),t.writeTree)}function yg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;S(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),S(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,es(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ji(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Hr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,es(r,e.snapshotNode,i.oldSnap));else throw Qr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const vg=new XL;class Tc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Yn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ic(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kn(this.viewCache_),s=YL(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){return{filter:t}}function JL(t,e){S(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ew(t,e,n,r,i){const s=new KL;let o,l;if(n.type===xt.OVERWRITE){const u=n;u.source.fromUser?o=au(t,e,u.path,u.snap,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!W(u.path),o=bo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===xt.MERGE){const u=n;u.source.fromUser?o=nw(t,e,u.path,u.children,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=uu(t,e,u.path,u.children,r,i,l,s))}else if(n.type===xt.ACK_USER_WRITE){const u=n;u.revert?o=sw(t,e,u.path,r,i,s):o=rw(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===xt.LISTEN_COMPLETE)o=iw(t,e,n.path,r,s);else throw Qr("Unknown operation type: "+n.type);const a=s.getChanges();return tw(e,o,a),{viewCache:o,changes:a}}function tw(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=iu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(cg(iu(e)))}}function _g(t,e,n,r,i,s){const o=e.eventCache;if(Do(r,n)!=null)return e;{let l,a;if(W(n))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Kn(e),h=u instanceof M?u:M.EMPTY_NODE,d=kc(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Ro(r,Kn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=H(n);if(u===".priority"){S(En(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=Uh(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=re(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const c=Uh(r,n,o.getNode(),a);c!=null?d=o.getNode().getImmediateChild(u).updateChild(h,c):d=o.getNode().getImmediateChild(u)}else d=Ic(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return Ti(e,l,o.isFullyInitialized()||W(n),t.filter.filtersNodes())}}function bo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(W(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),y,null)}else{const y=H(n);if(!a.isCompleteForPath(n)&&En(n)>1)return e;const g=re(n),b=a.getNode().getImmediateChild(y).updateChild(g,r);y===".priority"?u=h.updatePriority(a.getNode(),b):u=h.updateChild(a.getNode(),y,b,g,vg,null)}const d=hg(e,u,a.isFullyInitialized()||W(n),h.filtersNodes()),c=new Tc(i,d,s);return _g(t,d,n,i,c,l)}function au(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new Tc(i,e,s);if(W(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Ti(e,u,!0,t.filter.filtersNodes());else{const d=H(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ti(e,u,l.isFullyInitialized(),l.isFiltered());else{const c=re(n),y=l.getNode().getImmediateChild(d);let g;if(W(c))g=r;else{const L=h.getCompleteChild(d);L!=null?gc(c)===".priority"&&L.getChild(rg(c)).isEmpty()?g=L:g=L.updateChild(c,r):g=M.EMPTY_NODE}if(y.equals(g))a=e;else{const L=t.filter.updateChild(l.getNode(),d,g,c,h,o);a=Ti(e,L,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Wh(t,e){return t.eventCache.isCompleteForChild(e)}function nw(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=pe(n,a);Wh(e,H(h))&&(l=au(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=pe(n,a);Wh(e,H(h))||(l=au(t,l,h,u,i,s,o))}),l}function Bh(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function uu(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;W(n)?u=r:u=new te(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),g=Bh(t,y,c);a=bo(t,a,new K(d),g,i,s,o,l)}}),u.children.inorderTraversal((d,c)=>{const y=!e.serverCache.isCompleteForChild(d)&&c.value===null;if(!h.hasChild(d)&&!y){const g=e.serverCache.getNode().getImmediateChild(d),L=Bh(t,g,c);a=bo(t,a,new K(d),L,i,s,o,l)}}),a}function rw(t,e,n,r,i,s,o){if(Do(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(W(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return bo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(W(n)){let u=new te(null);return a.getNode().forEachChild(Nr,(h,d)=>{u=u.set(new K(h),d)}),uu(t,e,n,u,i,s,l,o)}else return e}else{let u=new te(null);return r.foreach((h,d)=>{const c=pe(n,h);a.isCompleteForPath(c)&&(u=u.set(h,a.getNode().getChild(c)))}),uu(t,e,n,u,i,s,l,o)}}function iw(t,e,n,r,i){const s=e.serverCache,o=hg(e,s.getNode(),s.isFullyInitialized()||W(n),s.isFiltered());return _g(t,o,n,r,vg,i)}function sw(t,e,n,r,i,s){let o;if(Do(r,n)!=null)return e;{const l=new Tc(r,e,i),a=e.eventCache.getNode();let u;if(W(n)||H(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Ro(r,Kn(e));else{const d=e.serverCache.getNode();S(d instanceof M,"serverChildren would be complete if leaf node"),h=kc(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=H(n);let d=Ic(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,re(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,M.EMPTY_NODE,re(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ro(r,Kn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Do(r,Q())!=null,Ti(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Lc(r.getIndex()),s=EL(r);this.processor_=ZL(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(M.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(M.EMPTY_NODE,l.getNode(),null),h=new Yn(a,o.isFullyInitialized(),i.filtersNodes()),d=new Yn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=nl(d,h),this.eventGenerator_=new RL(this.query_)}get query(){return this.query_}}function lw(t){return t.viewCache_.serverCache.getNode()}function aw(t,e){const n=Kn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!W(e)&&!n.getImmediateChild(H(e)).isEmpty())?n.getChild(e):null}function $h(t){return t.eventRegistrations_.length===0}function uw(t,e){t.eventRegistrations_.push(e)}function Vh(t,e,n){const r=[];if(n){S(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function qh(t,e,n,r){e.type===xt.MERGE&&e.source.queryId!==null&&(S(Kn(t.viewCache_),"We should always have a full cache before handling merges"),S(iu(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=ew(t.processor_,i,e,n,r);return JL(t.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Lg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function cw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(me,(s,o)=>{r.push(Hr(s,o))}),n.isFullyInitialized()&&r.push(cg(n.getNode())),Lg(t,r,n.getNode(),e)}function Lg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return DL(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao;class dw{constructor(){this.views=new Map}}function hw(t){S(!Ao,"__referenceConstructor has already been defined"),Ao=t}function fw(){return S(Ao,"Reference.ts has not been loaded"),Ao}function pw(t){return t.views.size===0}function Nc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return S(s!=null,"SyncTree gave us an op for an invalid query."),qh(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(qh(o,e,n,r));return s}}function mw(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=Ro(n,i?r:null),a=!1;l?a=!0:r instanceof M?(l=kc(n,r),a=!1):(l=M.EMPTY_NODE,a=!1);const u=nl(new Yn(l,a,!1),new Yn(r,i,!1));return new ow(e,u)}return o}function gw(t,e,n,r,i,s){const o=mw(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),uw(o,n),cw(o,n)}function yw(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=Sn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(Vh(u,n,r)),$h(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(Vh(a,n,r)),$h(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!Sn(t)&&s.push(new(fw())(e._repo,e._path)),{removed:s,events:o}}function wg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Pr(t,e){let n=null;for(const r of t.views.values())n=n||aw(r,e);return n}function Cg(t,e){if(e._queryParams.loadsAllData())return rl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function xg(t,e){return Cg(t,e)!=null}function Sn(t){return rl(t)!=null}function rl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo;function vw(t){S(!zo,"__referenceConstructor has already been defined"),zo=t}function _w(){return S(zo,"Reference.ts has not been loaded"),zo}let Lw=1;class Gh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=QL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Eg(t,e,n,r,i){return ML(t.pendingWriteTree_,e,n,r,i),i?Xr(t,new Qn(Cc(),e,n)):[]}function ww(t,e,n,r){OL(t.pendingWriteTree_,e,n,r);const i=te.fromObject(n);return Xr(t,new Ur(Cc(),e,i))}function cn(t,e,n=!1){const r=FL(t.pendingWriteTree_,e);if(jL(t.pendingWriteTree_,e)){let s=new te(null);return r.snap!=null?s=s.set(Q(),!0):ze(r.children,o=>{s=s.set(new K(o),!0)}),Xr(t,new Po(r.path,s,n))}else return[]}function il(t,e,n){return Xr(t,new Qn(xc(),e,n))}function Cw(t,e,n){const r=te.fromObject(n);return Xr(t,new Ur(xc(),e,r))}function xw(t,e){return Xr(t,new ns(xc(),e))}function Ew(t,e,n){const r=Rc(t,n);if(r){const i=Dc(r),s=i.path,o=i.queryId,l=Ze(s,e),a=new ns(Ec(o),l);return bc(t,s,a)}else return[]}function cu(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||xg(o,e))){const a=yw(o,e,n,r);pw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(c=>c._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(c,y)=>Sn(y));if(h&&!d){const c=t.syncPointTree_.subtree(s);if(!c.isEmpty()){const y=Iw(c);for(let g=0;g<y.length;++g){const L=y[g],b=L.query,p=Ig(t,L);t.listenProvider_.startListening(Pi(b),Mo(t,b),p.hashFn,p.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Pi(e),null):u.forEach(c=>{const y=t.queryToTagMap.get(sl(c));t.listenProvider_.stopListening(Pi(c),y)}))}Tw(t,u)}return l}function Sw(t,e,n,r){const i=Rc(t,r);if(i!=null){const s=Dc(i),o=s.path,l=s.queryId,a=Ze(o,e),u=new Qn(Ec(l),a,n);return bc(t,o,u)}else return[]}function kw(t,e,n,r){const i=Rc(t,r);if(i){const s=Dc(i),o=s.path,l=s.queryId,a=Ze(o,e),u=te.fromObject(n),h=new Ur(Ec(l),a,u);return bc(t,o,h)}else return[]}function Qh(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(c,y)=>{const g=Ze(c,i);s=s||Pr(y,g),o=o||Sn(y)});let l=t.syncPointTree_.get(i);l?(o=o||Sn(l),s=s||Pr(l,Q())):(l=new dw,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,g)=>{const L=Pr(g,Q());L&&(s=s.updateImmediateChild(y,L))}));const u=xg(l,e);if(!u&&!e._queryParams.loadsAllData()){const c=sl(e);S(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const y=Nw();t.queryToTagMap.set(c,y),t.tagToQueryMap.set(y,c)}const h=Sc(t.pendingWriteTree_,i);let d=gw(l,e,n,h,s,a);if(!u&&!o&&!r){const c=Cg(l,e);d=d.concat(Pw(t,e,c))}return d}function Pc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Ze(o,e),u=Pr(l,a);if(u)return u});return mg(i,e,s,n,!0)}function Xr(t,e){return Sg(e,t.syncPointTree_,null,Sc(t.pendingWriteTree_,Q()))}function Sg(t,e,n,r){if(W(t.path))return kg(t,e,n,r);{const i=e.get(Q());n==null&&i!=null&&(n=Pr(i,Q()));let s=[];const o=H(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=gg(r,o);s=s.concat(Sg(l,a,u,h))}return i&&(s=s.concat(Nc(i,t,r,n))),s}}function kg(t,e,n,r){const i=e.get(Q());n==null&&i!=null&&(n=Pr(i,Q()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=gg(r,o),h=t.operationForChild(o);h&&(s=s.concat(kg(h,l,a,u)))}),i&&(s=s.concat(Nc(i,t,r,n))),s}function Ig(t,e){const n=e.query,r=Mo(t,n);return{hashFn:()=>(lw(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Ew(t,n._path,r):xw(t,n._path);{const s=C0(i,n);return cu(t,n,null,s)}}}}function Mo(t,e){const n=sl(e);return t.queryToTagMap.get(n)}function sl(t){return t._path.toString()+"$"+t._queryIdentifier}function Rc(t,e){return t.tagToQueryMap.get(e)}function Dc(t){const e=t.indexOf("$");return S(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new K(t.substr(0,e))}}function bc(t,e,n){const r=t.syncPointTree_.get(e);S(r,"Missing sync point for query tag that we're tracking");const i=Sc(t.pendingWriteTree_,e);return Nc(r,n,i,null)}function Iw(t){return t.fold((e,n,r)=>{if(n&&Sn(n))return[rl(n)];{let i=[];return n&&(i=wg(n)),ze(r,(s,o)=>{i=i.concat(o)}),i}})}function Pi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_w())(t._repo,t._path):t}function Tw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=sl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Nw(){return Lw++}function Pw(t,e,n){const r=e._path,i=Mo(t,e),s=Ig(t,n),o=t.listenProvider_.startListening(Pi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)S(!Sn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!W(u)&&h&&Sn(h))return[rl(h).query];{let c=[];return h&&(c=c.concat(wg(h).map(y=>y.query))),ze(d,(y,g)=>{c=c.concat(g)}),c}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(Pi(h),Mo(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ac(n)}node(){return this.node_}}class zc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=pe(this.path_,e);return new zc(this.syncTree_,n)}node(){return Pc(this.syncTree_,this.path_)}}const Rw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Yh=function(t,e,n){if(!t||typeof t!="object")return t;if(S(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Dw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bw(t[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Dw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:S(!1,"Unexpected server value: "+t)}},bw=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&S(!1,"Unexpected increment value: "+r);const i=e.node();if(S(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Tg=function(t,e,n,r){return Mc(e,new zc(n,t),r)},Ng=function(t,e,n){return Mc(t,new Ac(e),n)};function Mc(t,e,n){const r=t.getPriority().val(),i=Yh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Yh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new Ee(l,Ie(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ee(i))),o.forEachChild(me,(l,a)=>{const u=Mc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Fc(t,e){let n=e instanceof K?e:new K(e),r=t,i=H(n);for(;i!==null;){const s=Fr(r.node.children,i)||{children:{},childCount:0};r=new Oc(i,r,s),n=re(n),i=H(n)}return r}function Zr(t){return t.node.value}function Pg(t,e){t.node.value=e,du(t)}function Rg(t){return t.node.childCount>0}function Aw(t){return Zr(t)===void 0&&!Rg(t)}function ol(t,e){ze(t.node.children,(n,r)=>{e(new Oc(n,t,r))})}function Dg(t,e,n,r){n&&!r&&e(t),ol(t,i=>{Dg(i,e,!0,r)}),n&&r&&e(t)}function zw(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ps(t){return new K(t.parent===null?t.name:ps(t.parent)+"/"+t.name)}function du(t){t.parent!==null&&Mw(t.parent,t.name,t)}function Mw(t,e,n){const r=Aw(n),i=At(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,du(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,du(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=/[\[\].#$\/\u0000-\u001F\u007F]/,Fw=/[\[\].#$\u0000-\u001F\u007F]/,Xl=10*1024*1024,jc=function(t){return typeof t=="string"&&t.length!==0&&!Ow.test(t)},bg=function(t){return typeof t=="string"&&t.length!==0&&!Fw.test(t)},jw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bg(t)},Hw=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!dc(t)||t&&typeof t=="object"&&At(t,".sv")},Ag=function(t,e,n,r){r&&e===void 0||ll(Jo(t,"value"),e,n)},ll=function(t,e,n){const r=n instanceof K?new nL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+An(r));if(typeof e=="function")throw new Error(t+"contains a function "+An(r)+" with contents = "+e.toString());if(dc(e))throw new Error(t+"contains "+e.toString()+" "+An(r));if(typeof e=="string"&&e.length>Xl/3&&el(e)>Xl)throw new Error(t+"contains a string greater than "+Xl+" utf8 bytes "+An(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ze(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!jc(o)))throw new Error(t+" contains an invalid key ("+o+") "+An(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rL(r,o),ll(t,l,r),iL(r)}),i&&s)throw new Error(t+' contains ".value" child '+An(r)+" in addition to actual children.")}},Uw=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Zi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!jc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tL);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ft(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Ww=function(t,e,n,r){if(r&&e===void 0)return;const i=Jo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ze(e,(o,l)=>{const a=new K(o);if(ll(i,l,pe(n,a)),gc(a)===".priority"&&!Hw(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),Uw(i,s)},zg=function(t,e,n,r){if(!(r&&n===void 0)&&!bg(n))throw new Error(Jo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Bw=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zg(t,e,n,r)},Hc=function(t,e){if(H(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},$w=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jw(n))throw new Error(Jo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function al(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!yc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Mg(t,e,n){al(t,n),Og(t,r=>yc(r,e))}function Tt(t,e,n){al(t,n),Og(t,r=>ft(r,e)||ft(e,r))}function Og(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(qw(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function qw(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Un&&De("event: "+n.toString()),Kr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="repo_interrupt",Qw=25;class Yw{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=No(),this.transactionQueueTree_=new Oc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Kw(t,e,n){if(t.stats_=pc(t.repoInfo_),t.forceRestClient_||k0())t.server_=new To(t.repoInfo_,(r,i,s,o)=>{Kh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Xh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gt(t.repoInfo_,e,(r,i,s,o)=>{Kh(t,r,i,s,o)},r=>{Xh(t,r)},r=>{Xw(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=R0(t.repoInfo_,()=>new PL(t.stats_,t.server_)),t.infoData_=new SL,t.infoSyncTree_=new Gh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=il(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Uc(t,"connected",!1),t.serverSyncTree_=new Gh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);Tt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Fg(t){const n=t.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ul(t){return Rw({timestamp:Fg(t)})}function Kh(t,e,n,r,i){t.dataUpdateCount++;const s=new K(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=wo(n,u=>Ie(u));o=kw(t.serverSyncTree_,s,a,i)}else{const a=Ie(n);o=Sw(t.serverSyncTree_,s,a,i)}else if(r){const a=wo(n,u=>Ie(u));o=Cw(t.serverSyncTree_,s,a)}else{const a=Ie(n);o=il(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Br(t,s)),Tt(t.eventQueue_,l,o)}function Xh(t,e){Uc(t,"connected",e),e===!1&&eC(t)}function Xw(t,e){ze(e,(n,r)=>{Uc(t,n,r)})}function Uc(t,e,n){const r=new K("/.info/"+e),i=Ie(n);t.infoData_.updateSnapshot(r,i);const s=il(t.infoSyncTree_,r,i);Tt(t.eventQueue_,r,s)}function Wc(t){return t.nextWriteId_++}function Zw(t,e,n,r,i){cl(t,"set",{path:e.toString(),value:n,priority:r});const s=ul(t),o=Ie(n,r),l=Pc(t.serverSyncTree_,e),a=Ng(o,l,s),u=Wc(t),h=Eg(t.serverSyncTree_,e,a,u,!0);al(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(c,y)=>{const g=c==="ok";g||qe("set at "+e+" failed: "+c);const L=cn(t.serverSyncTree_,u,!g);Tt(t.eventQueue_,e,L),hu(t,i,c,y)});const d=$c(t,e);Br(t,d),Tt(t.eventQueue_,d,[])}function Jw(t,e,n,r){cl(t,"update",{path:e.toString(),value:n});let i=!0;const s=ul(t),o={};if(ze(n,(l,a)=>{i=!1,o[l]=Tg(pe(e,l),Ie(a),t.serverSyncTree_,s)}),i)De("update() called with empty data.  Don't do anything."),hu(t,r,"ok",void 0);else{const l=Wc(t),a=ww(t.serverSyncTree_,e,o,l);al(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||qe("update at "+e+" failed: "+u);const c=cn(t.serverSyncTree_,l,!d),y=c.length>0?Br(t,e):e;Tt(t.eventQueue_,y,c),hu(t,r,u,h)}),ze(n,u=>{const h=$c(t,pe(e,u));Br(t,h)}),Tt(t.eventQueue_,e,[])}}function eC(t){cl(t,"onDisconnectEvents");const e=ul(t),n=No();ru(t.onDisconnect_,Q(),(i,s)=>{const o=Tg(i,s,t.serverSyncTree_,e);dg(n,i,o)});let r=[];ru(n,Q(),(i,s)=>{r=r.concat(il(t.serverSyncTree_,i,s));const o=$c(t,i);Br(t,o)}),t.onDisconnect_=No(),Tt(t.eventQueue_,Q(),r)}function tC(t,e,n){let r;H(e._path)===".info"?r=Qh(t.infoSyncTree_,e,n):r=Qh(t.serverSyncTree_,e,n),Mg(t.eventQueue_,e._path,r)}function Zh(t,e,n){let r;H(e._path)===".info"?r=cu(t.infoSyncTree_,e,n):r=cu(t.serverSyncTree_,e,n),Mg(t.eventQueue_,e._path,r)}function nC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Gw)}function cl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),De(n,...e)}function hu(t,e,n,r){e&&Kr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function jg(t,e,n){return Pc(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Bc(t,e=t.transactionQueueTree_){if(e||dl(t,e),Zr(e)){const n=Ug(t,e);S(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&rC(t,ps(e),n)}else Rg(e)&&ol(e,n=>{Bc(t,n)})}function rC(t,e,n){const r=n.map(u=>u.currentWriteId),i=jg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];S(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ze(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{cl(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,h=h.concat(cn(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();dl(t,Fc(t.transactionQueueTree_,e)),Bc(t,t.transactionQueueTree_),Tt(t.eventQueue_,e,h);for(let c=0;c<d.length;c++)Kr(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{qe("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Br(t,e)}},o)}function Br(t,e){const n=Hg(t,e),r=ps(n),i=Ug(t,n);return iC(t,i,r),r}function iC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Ze(n,a.path);let h=!1,d;if(S(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(cn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Qw)h=!0,d="maxretry",i=i.concat(cn(t.serverSyncTree_,a.currentWriteId,!0));else{const c=jg(t,a.path,o);a.currentInputSnapshot=c;const y=e[l].update(c.val());if(y!==void 0){ll("transaction failed: Data returned ",y,a.path);let g=Ie(y);typeof y=="object"&&y!=null&&At(y,".priority")||(g=g.updatePriority(c.getPriority()));const b=a.currentWriteId,p=ul(t),f=Ng(g,c,p);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=f,a.currentWriteId=Wc(t),o.splice(o.indexOf(b),1),i=i.concat(Eg(t.serverSyncTree_,a.path,f,a.currentWriteId,a.applyLocally)),i=i.concat(cn(t.serverSyncTree_,b,!0))}else h=!0,d="nodata",i=i.concat(cn(t.serverSyncTree_,a.currentWriteId,!0))}Tt(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}dl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Kr(r[l]);Bc(t,t.transactionQueueTree_)}function Hg(t,e){let n,r=t.transactionQueueTree_;for(n=H(e);n!==null&&Zr(r)===void 0;)r=Fc(r,n),e=re(e),n=H(e);return r}function Ug(t,e){const n=[];return Wg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Wg(t,e,n){const r=Zr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ol(e,i=>{Wg(t,i,n)})}function dl(t,e){const n=Zr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Pg(e,n.length>0?n:void 0)}ol(e,r=>{dl(t,r)})}function $c(t,e){const n=ps(Hg(t,e)),r=Fc(t.transactionQueueTree_,e);return zw(r,i=>{Zl(t,i)}),Zl(t,r),Dg(r,i=>{Zl(t,i)}),n}function Zl(t,e){const n=Zr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(S(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(cn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Pg(e,void 0):n.length=s+1,Tt(t.eventQueue_,ps(e),i);for(let o=0;o<r.length;o++)Kr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function oC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qe(`Invalid query segment '${n}' in query '${t}'`)}return e}const Jh=function(t,e){const n=lC(t),r=n.namespace;n.domain==="firebase.com"&&Jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||y0();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new K(n.pathString)}},lC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=sC(t.substring(h,d)));const c=oC(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in c&&(s=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ef.charAt(n%64),n=Math.floor(n/64);S(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=ef.charAt(e[i]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Te(this.snapshot.exportVal())}}class $g{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:gc(this._path)}get ref(){return new tn(this._repo,this._path)}get _queryIdentifier(){const e=Oh(this._queryParams),n=hc(e);return n==="{}"?"default":n}get _queryObject(){return Oh(this._queryParams)}isEqual(e){if(e=Yr(e),!(e instanceof Vc))return!1;const n=this._repo===e._repo,r=yc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+eL(this._path)}}class tn extends Vc{constructor(e,n){super(e,n,new wc,!1)}get parent(){const e=rg(this._path);return e===null?null:new tn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class rs{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new K(e),r=$r(this.ref,e);return new rs(this._node.getChild(n),r,me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new rs(i,$r(this.ref,r),me)))}hasChild(e){const n=new K(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jt(t,e){return t=Yr(t),t._checkNotDeleted("ref"),e!==void 0?$r(t._root,e):t._root}function $r(t,e){return t=Yr(t),H(t._path)===null?Bw("child","path",e,!1):zg("child","path",e,!1),new tn(t._repo,pe(t._path,e))}function cC(t,e){t=Yr(t),Hc("push",t._path),Ag("push",e,t._path,!0);const n=Fg(t._repo),r=aC(n),i=$r(t,r),s=$r(t,r);let o;return e!=null?o=qc(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function dC(t){return Hc("remove",t._path),qc(t,null)}function qc(t,e){t=Yr(t),Hc("set",t._path),Ag("set",e,t._path,!1);const n=new us;return Zw(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Jl(t,e){Ww("update",e,t._path,!1);const n=new us;return Jw(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Gc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Bg("value",this,new rs(e.snapshotNode,new tn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $g(this,e,n):null}matches(e){return e instanceof Gc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Qc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $g(this,e,n):null}createEvent(e,n){S(e.childName!=null,"Child events should have a childName.");const r=$r(new tn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Bg(e.type,this,new rs(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Qc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Vg(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(h,d)=>{Zh(t._repo,t,l),a(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new uC(n,s||void 0),l=e==="value"?new Gc(o):new Qc(e,o);return tC(t._repo,t,l),()=>Zh(t._repo,t,l)}function tf(t,e,n,r){return Vg(t,"value",e,n,r)}function hC(t,e,n,r){return Vg(t,"child_added",e,n,r)}hw(tn);vw(tn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="FIREBASE_DATABASE_EMULATOR_HOST",fu={};let pC=!1;function mC(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=uc(s);t.repoInfo_=new Qm(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function gC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Jh(s,i),l=o.repoInfo,a,u;typeof process<"u"&&process.env&&(u=process.env[fC]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=Jh(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const h=i&&a?new Tr(Tr.OWNER):new T0(t.name,t.options,e);$w("Invalid Firebase Database URL",o),W(o.path)||Jt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=vC(l,t,h,new I0(t,n));return new _C(d,t)}function yC(t,e){const n=fu[e];(!n||n[t.key]!==t)&&Jt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nC(t),delete n[t.key]}function vC(t,e,n,r){let i=fu[e.name];i||(i={},fu[e.name]=i);let s=i[t.toURLString()];return s&&Jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Yw(t,pC,n,r),i[t.toURLString()]=s,s}class _C{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Kw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tn(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jt("Cannot call "+e+" on a deleted database.")}}function LC(t=J_(),e){const n=Q_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Av("database");r&&wC(n,...r)}return n}function wC(t,e,n,r={}){t=Yr(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Co(r,s.repoInfo_.emulatorOptions))return;Jt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Jt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Tr(Tr.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:Mv(r.mockUserToken,t.app.options.projectId);o=new Tr(l)}uc(e)&&(zv(e),jv("Database",!0)),mC(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){h0(Z_),Eo(new Yi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return gC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),kr(Lh,wh,t),kr(Lh,wh,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={".sv":"timestamp"};function nf(){return xC}Gt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};CC();const EC={apiKey:"AIzaSyAeg700zLPvBv_SIZxHy8MLjYB2RCCvwao",authDomain:"studyspark-959ac.firebaseapp.com",databaseURL:"https://studyspark-959ac-default-rtdb.firebaseio.com",projectId:"studyspark-959ac",storageBucket:"studyspark-959ac.firebasestorage.app",messagingSenderId:"529045127702",appId:"1:529045127702:web:2e193893d46b8f262beb37",measurementId:"G-LS0N6CSZGN"},SC=Rm(EC),Ht=LC(SC),kC=()=>{var Xc,Zc;const[t,e]=ee.useState(null),[n,r]=ee.useState(null),[i,s]=ee.useState(0),[o,l]=ee.useState(0),[a,u]=ee.useState([]),[h,d]=ee.useState([]),[c,y]=ee.useState([]),[g,L]=ee.useState(0),[b,p]=ee.useState("DRAW"),[f,m]=ee.useState([]),[w,T]=ee.useState(null),[k,_]=ee.useState("OFFLINE"),[C,O]=ee.useState(""),[I,X]=ee.useState(1),[Z,Nn]=ee.useState(null),ms=(c==null?void 0:c[g])||{name:"Connecting...",hand:[],melds:[],id:-1,score:0,isHost:!1},hl=k==="OFFLINE"||((Xc=c==null?void 0:c[g])==null?void 0:Xc.id)===I,Jr=((Zc=c==null?void 0:c.find(E=>E.id===I))==null?void 0:Zc.hand)||[],Pn=n?n.problems[i]:null;let N="";if(t==="LESSON"&&Pn&&o>0){const E=Pn.solutions[0];o===1?N=`Length: ${E.length} characters`:o===2?N=`Starts with: "${E[0]}"`:o>=3&&(N=`Answer: ${E}`)}const A=E=>{T(E),setTimeout(()=>T(null),4e3)},j=E=>{let z=5;const D=E.map($=>$.hanzi).join(""),R=E.some($=>$.isPronoun||$.type==="noun"),F=E.some($=>$.type==="verb"||$.hanzi===""||$.hanzi===""),J=E.filter($=>$.type==="noun"||$.type==="adj").length>=1;R&&F&&J&&(z+=15),E.some($=>$.isModifier)&&(z+=10);const G=["","","",""],Ce=E.filter($=>G.includes($.hanzi)).length;return Ce>0&&(z*=Math.pow(2,Ce)),(D.includes("")&&D.includes("")||D.includes("")&&D.includes(""))&&(z*=2),z},ae=E=>{if(E.length<2)return{isValid:!1,error:"Sentence too short (min 2 words)"};const z=E.length-1,D=E.some(V=>V.type==="verb"),R=E.some(V=>V.type==="adj"),F=E.some(V=>V.hanzi===""),J=E.some(V=>V.hanzi==="");if(!D&&!R&&!F&&!J)return{isValid:!1,error:"Missing Action: Every sentence needs a verb or 'is'."};for(let V=0;V<E.length;V++){const Pe=E[V],Be=V>0?E[V-1]:null;if(Pe.isUnit){if(V===0)return{isValid:!1,error:`Grammar: Unit '${Pe.hanzi}' cannot start a sentence.`};const Ot=(Be==null?void 0:Be.isNumber)||["","","","","","","","","","","",""].includes((Be==null?void 0:Be.hanzi)||""),ei=(Be==null?void 0:Be.isDemonstrative)||["","",""].includes((Be==null?void 0:Be.hanzi)||"");if(!Ot&&!ei)return{isValid:!1,error:`Grammar: Unit '${Pe.hanzi}' needs a number or 'this/that' before it.`}}if(Pe.isModifier){if(V===0&&Pe.hanzi!=="")return{isValid:!1,error:`Start Error: Sentences cannot start with modifier '${Pe.hanzi}'.`};const Ot=V<E.length-1?E[V+1]:null,ei=Ot==null?void 0:Ot.type,gs=Pe.hanzi===""?["verb","adj","noun"]:["verb","adj"];if(!Ot||!gs.includes(ei||""))return{isValid:!1,error:Pe.hanzi===""?"Grammar: '' must be followed by a Noun, Verb, or Adjective.":`Grammar: Modifier '${Pe.hanzi}' must be followed by a Verb or Adjective.`}}}const G=E[z];if(G.isTransitive)return{isValid:!1,error:`Incomplete Thought: Transitive verb '${G.hanzi}' needs an object.`};const Ce=E.filter(V=>V.isTime),xe=E.filter(V=>V.isPronoun);if(Ce.length>0&&xe.length>0){const V=E[0];if(!V.isTime&&!V.isPronoun)return{isValid:!1,error:"Word Order: When using Time and Pronoun, one must start the sentence."}}const $=["","","","","",""],yt=E.some(V=>$.includes(V.hanzi)),_e=E.some(V=>V.hanzi==="");return yt&&_e?{isValid:!1,error:"Question Error: Don't use 'who/what' and 'ma' together."}:{isValid:!0,error:null}},ye=()=>Math.random().toString(36).substring(2,6).toUpperCase(),tr=async E=>{const z=ye(),D=[{id:1,name:E+" (Host)",hand:[],melds:[],score:0,isHost:!0}],R={state:{players:D,deckCount:0,discardPile:[],currentTurn:0,phase:"DRAW",roomLocked:!1,lastUpdated:nf(),hostId:z},members:{1:E}};try{console.log("Attempting to create lobby with ID:",z),await qc(jt(Ht,`rooms/${z}`),R),console.log("Lobby created successfully!"),y(D),O(z),_("HOST"),e("LOBBY"),X(1)}catch(F){console.error("Firebase Create Lobby Error:",F),A(`Failed to create room: ${F.message||"Unknown error"}`)}},zt=async(E,z)=>{const D=E.toUpperCase(),R=jt(Ht,`rooms/${D}`);tf(R,F=>{const J=F.val();if(!J){A("Room not found!");return}if(J.state.roomLocked){A("Room is already in progress!");return}const G=J.state.players||[];if(G.length>=4){A("Room is full!");return}if(!G.find(xe=>xe.name===z)&&k==="OFFLINE"){const xe=G.length+1,$={id:xe,name:z,hand:[],melds:[],score:0,isHost:!1},yt=[...G,$];Jl(jt(Ht,`rooms/${D}/state`),{players:yt}),Jl(jt(Ht,`rooms/${D}/members`),{[xe]:z}),X(xe),O(D),_("CLIENT"),e("LOBBY")}},{onlyOnce:!0})};ee.useEffect(()=>{if(k!=="HOST"||!C)return;const E=jt(Ht,`rooms/${C}/actions`),z=hC(E,D=>{const R=D.val();R&&(fl(R.action,R.playerId),dC(jt(Ht,`rooms/${C}/actions/${D.key}`)))});return()=>z()},[k,C,c,a,h,g,b]),ee.useEffect(()=>{if(!C||k==="OFFLINE")return;const E=jt(Ht,`rooms/${C}/state`),z=tf(E,D=>{const R=D.val();R&&(y(R.players||[]),u(new Array(R.deckCount).fill({})),d(R.discardPile||[]),L(R.currentTurn),p(R.phase),Nn(R.challenge||null),t==="LOBBY"&&R.roomLocked&&e("SANDBOX"))});return()=>z()},[C,t,k]);const Me=ee.useCallback((E,z,D,R,F,J=!0,G=null)=>{if(k!=="HOST"||!C)return;const Ce=JSON.parse(JSON.stringify({players:[...E],deckCount:F,discardPile:R,currentTurn:D,phase:z,roomLocked:J,lastUpdated:Date.now(),challenge:G}));console.log(`[Host] Broadcasting State: Phase=${z}, Turn=${D}`),Jl(jt(Ht,`rooms/${C}/state`),Ce)},[k,C]),Oe=E=>{k==="CLIENT"?cC(jt(Ht,`rooms/${C}/actions`),{playerId:I,action:E,timestamp:nf()}):fl(E,I)},Mt=ee.useCallback(E=>{var xe;if(k!=="HOST")return;console.log("[Host] Finalizing Meld:",E.map($=>$.hanzi).join(""));const z=g,D=c[z];if(!D)return;const R=j(E);let F=[...a];const J=11-(((xe=D.hand)==null?void 0:xe.length)||0);let G=D.hand?D.hand.filter($=>!E.includes($)):[];if(!(J<=0)){const yt=F.slice(0,J).map(_e=>(_e&&!(_e.hanzi||_e.char||_e.character)&&(_e.hanzi=_e.hanzi||"?"),_e)).filter(_e=>_e&&(_e.hanzi||_e.char||_e.character));console.log("Refilling hand with:",yt),G=[...G,...yt],F=F.slice(J)}const Ce=c.map(($,yt)=>{if(yt!==z)return $;const _e=Array.isArray($.melds)?$.melds:[];return{...$,hand:G,melds:[..._e,E],score:$.score+R}});A(`Score Awarded: ${R}pts!`),Me(Ce,"DISCARD",g,h,F.length,!0,null),y(Ce),u(F),p("DISCARD")},[k,g,c,a,h,Me]),Yc=ee.useCallback(()=>{if(k!=="HOST"||!Z)return;const E=Object.values(Z.votes),z=E.filter(R=>R===!0).length,D=E.filter(R=>R===!1).length;if(console.log(`[Host] Resolving Challenge: Accept(${z}) vs Reject(${D})`),z>=D)A("Challenge Failed! Meld Accepted."),Mt(Z.meld);else{A("Challenge Successful! Meld Rejected.");const R=c.map((F,J)=>{if(J!==g||!F)return F;const G=F.hand||[];return{...F,hand:[...G,...Z.meld]}});Me(R,"DISCARD",g,h,a.length,!0,null)}},[k,Z,c,g,h,a.length,Me,Mt]);ee.useEffect(()=>{if(k!=="HOST"||!C||b!=="CHALLENGE"||!Z)return;console.log(`[Host] Challenge timer started (setInterval). Target: ${Z.endTime}`);const E=setInterval(()=>{Date.now()>=Z.endTime&&(console.log("[Host] Challenge window expired. Finalizing state..."),clearInterval(E),Z.status==="CHALLENGED"?Yc():Mt(Z.meld))},1e3);return()=>{console.log("[Host] Cleaning up challenge timer"),clearInterval(E)}},[k,C,b,Z,Yc,Mt]);const fl=(E,z)=>{var $,yt,_e;if(k==="CLIENT")return;let D=[...c],R=[...h],F=[...a],J=b,G=g;const xe=D[g];if(xe){if(E.actionType==="CHALLENGE"){if(b!=="CHALLENGE"||!Z||z===xe.id)return;const V={...Z,challengerId:z,status:"CHALLENGED",endTime:Date.now()+1e4};Me(c,"CHALLENGE",g,R,F.length,!0,V);return}if(E.actionType==="VOTE"){if(b!=="CHALLENGE"||!Z||Z.status!=="CHALLENGED")return;const V={...Z.votes,[z]:E.data},Pe={...Z,votes:V};Me(c,"CHALLENGE",g,R,F.length,!0,Pe);return}switch(E.actionType){case"DRAW_DECK":if(b!=="DRAW"||F.length===0)return;D[g]={...D[g],hand:[...(($=D[g])==null?void 0:$.hand)||[],F[0]]},console.log("Hand updated:",(yt=D[g])==null?void 0:yt.hand),F=F.slice(1),Me(D,"MELD",g,R,F.length,!0,null),y(D),u(F),p("MELD");return;case"DRAW_DISCARD":if(b!=="DRAW"||R.length===0)return;D[g]={...D[g],hand:[...((_e=D[g])==null?void 0:_e.hand)||[],R[0]]},R=R.slice(1),Me(D,"MELD",g,R,F.length,!0,null),y(D),d(R),p("MELD");return;case"MELD":const V=E.data,Pe=V.map(ue=>{if(ue.type==="HAND")return xe.hand[ue.identifier];const rt=Sr.find(Ye=>Ye.id===ue.identifier);return rt?{...rt,id:`PU-${rt.id}-${Date.now()}`}:null}).filter(ue=>!!ue),Be=V.filter(ue=>ue.type==="HAND").map(ue=>ue.identifier);if(t==="LESSON"&&n){const ue=Pe.map(Ye=>Ye.hanzi).join("");if(n.problems[i].solutions.includes(ue)){A(" Correct! +100pts");const Ye=i+1,Fe=c.map((Ft,nr)=>nr!==g?Ft:{...Ft,score:Ft.score+100,hand:[]});if(Ye<n.problems.length){s(Ye),l(0);const Ft=n.problems[Ye],{riggedHand:nr,remainingDeck:ys}=Kc(n,Ft),pl=Fe.map((Jc,Gg)=>Gg!==g?Jc:{...Jc,hand:nr});y(pl),u(ys)}else A(" Lesson Complete!"),e(null);return}else{A(" Grammatically incorrect or word order is off.");return}}else{const ue=ae(Pe);if(!ue.isValid){A(` ${ue.error}`);return}if(k==="HOST"&&c.length>1){const rt=c.map((Fe,Ft)=>Ft!==g?Fe:{...Fe,hand:Fe.hand.filter((nr,ys)=>!Be.includes(ys))}),Ye={meld:Pe,challengerId:null,status:"PENDING",endTime:Date.now()+5e3,votes:{}};J="CHALLENGE",Me(rt,"CHALLENGE",g,R,F.length,!0,Ye);return}else{const rt=j(Pe),Ye=c.map((Fe,Ft)=>{if(Ft!==g)return Fe;const nr=Array.isArray(Fe.melds)?Fe.melds:[];return{...Fe,melds:[...nr,Pe],hand:Fe.hand.filter((ys,pl)=>!Be.includes(pl)),score:Fe.score+rt}});A(` Correct Construction! +${rt}pts`),D=Ye,J="DISCARD"}}break;case"SKIP":Me(c,"DISCARD",g,h,a.length,!0,null),y(c),p("DISCARD");return;case"DISCARD":const Ot=E.data,ei=c[g].hand[Ot];D=c.map((ue,rt)=>rt!==g?ue:{...ue,hand:ue.hand.filter((Ye,Fe)=>Fe!==Ot)}),R=[ei,...h],c.length>1&&(G=(g+1)%c.length),J="DRAW";break;case"SORT":const gs={noun:1,verb:2,adj:3,grammar:4,wild:5};D=c.map((ue,rt)=>rt!==g?ue:{...ue,hand:[...ue.hand].sort((Ye,Fe)=>gs[Ye.type]-gs[Fe.type])});break}k==="OFFLINE"||t==="LESSON"?(y(D),d(R),u(F),p(J),L(G)):k==="HOST"&&Me(D,J,G,R,F.length,!0)}},Kc=(E,z)=>{const D=z.requiredCardIds.map((G,Ce)=>{const xe=Sr.find($=>$.id===G);return xe?{...xe,id:`L-${G}-${Ce}`}:null}).filter(Boolean),R=6,F=E.vocabularyIds.map(G=>Sr.find(Ce=>Ce.id===G)).filter(Boolean),J=[];for(let G=0;G<R;G++){const Ce=F[Math.floor(Math.random()*F.length)];J.push({...Ce,id:`D-${Ce.id}-${G}`})}return{riggedHand:[...D,...J].sort(()=>Math.random()-.5),remainingDeck:Ul(20)}};return{mode:t,activeLesson:n,currentProblem:Pn,currentProblemIndex:i,players:c,currentPlayer:ms,currentTurn:g,deck:a,discardPile:h,phase:b,selectionQueue:f,message:w,role:k,roomId:C,myPlayerId:I,myHand:Jr,isMyTurn:hl,activeHint:N,challengeState:Z,createLobby:tr,joinLobby:zt,startGame:()=>{if(k!=="HOST")return;const E=Ul(80);let z=0;const D=c.map(J=>{const G=E.slice(z,z+10);return z+=10,{...J,hand:G,score:0}}),R=E.slice(z+1),F=[E[z]];u(R),d(F),y(D),p("DRAW"),L(0),e("SANDBOX"),Me(D,"DRAW",0,F,R.length,!0,null)},startOfflineSandbox:()=>{_("OFFLINE");const E=Ul(80);y([{id:1,name:"Student",hand:E.slice(0,10),melds:[],score:0,isHost:!0}]),d([E[10]]),u(E.slice(11)),p("DRAW"),L(0),e("SANDBOX"),X(1)},startLesson:E=>{const z=ym.find(F=>F.id===E);if(!z)return;_("OFFLINE"),s(0),l(0);const{riggedHand:D,remainingDeck:R}=Kc(z,z.problems[0]);y([{id:1,name:"Student",hand:D,melds:[],score:0,isHost:!0}]),u(R),d([]),p("MELD"),e("LESSON"),r(z),L(0),X(1),A(`Lesson Start: ${z.title}`)},getHint:()=>{!n||t!=="LESSON"||l(E=>Math.min(E+1,3))},exitToMenu:()=>{e(null),O(""),_("OFFLINE"),m([])},drawFromDeck:()=>Oe({actionType:"DRAW_DECK"}),drawFromDiscard:()=>Oe({actionType:"DRAW_DISCARD"}),toggleSelect:E=>{m(z=>{const D=z.find(R=>R.type==="HAND"&&R.identifier===E);return D?z.filter(R=>R!==D):[...z,{type:"HAND",identifier:E}]})},togglePowerUp:E=>{m(z=>{const D=z.find(R=>R.type==="SHELF"&&R.identifier===E);return D?z.filter(R=>R!==D):[...z,{type:"SHELF",identifier:E}]})},confirmMeld:()=>{Oe({actionType:"MELD",data:f}),m([])},skipMeld:()=>{Oe({actionType:"SKIP"}),m([])},discardCard:E=>{Oe({actionType:"DISCARD",data:E}),m([])},sortHand:()=>Oe({actionType:"SORT"}),triggerMessage:A,setSelectionQueue:m,challengeMeld:()=>Oe({actionType:"CHALLENGE"}),voteMeld:E=>Oe({actionType:"VOTE",data:E})}};function IC(){var L,b,p,f,m,w,T,k;const t=kC(),{currentPlayer:e,players:n,mode:r,role:i,isMyTurn:s,myHand:o,currentProblem:l,currentProblemIndex:a,activeLesson:u}=t,[h,d]=ee.useState(""),[c,y]=ee.useState(""),g=t.phase==="MELD"&&s||t.phase==="DRAW"&&s;if(!r)return v.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-[var(--color-bg-canvas)] p-6 gap-4 overflow-y-auto",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"font-zcool text-6xl text-[var(--color-stroke-primary)] animate-bounce",children:""}),v.jsx("p",{className:"text-[var(--color-stroke-primary)] font-bold opacity-60",children:"Mahjong Grammar"})]}),v.jsxs("div",{className:"main-menu-card flex flex-col gap-6 w-full max-w-md bg-white p-6 shadow-xl",children:[v.jsx("div",{children:v.jsxs("label",{className:"block text-xs font-bold uppercase text-[var(--color-stroke-primary)] mb-1",children:["Your Name",v.jsx("input",{name:"playerName",id:"playerName",type:"text",value:h,onChange:_=>d(_.target.value),placeholder:"Enter Name...",className:"w-full bg-[var(--color-bg-canvas)] border-2 border-[var(--color-stroke-primary)] rounded-lg p-3 font-bold focus:outline-none focus:ring-2 focus:ring-[var(--color-noun-blue)] mt-1"})]})}),v.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] opacity-10 w-full"}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("button",{onClick:()=>{if(!h)return t.triggerMessage("Enter a name first!");t.createLobby(h)},className:"w-full bg-[var(--color-verb-red)] text-white text-lg py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_var(--color-stroke-primary)] hover:translate-y-1 hover:shadow-none transition-all font-bold",children:"Host New Game"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",value:c,onChange:_=>y(_.target.value),placeholder:"Room Code",className:"flex-1 bg-[var(--color-bg-canvas)] border-2 border-[var(--color-stroke-primary)] rounded-lg p-3 font-bold uppercase"}),v.jsx("button",{onClick:()=>{if(!h)return t.triggerMessage("Enter a name first!");if(!c)return t.triggerMessage("Enter a room code!");t.joinLobby(c,h)},className:"bg-[var(--color-noun-blue)] text-white px-6 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_var(--color-stroke-primary)] active:shadow-none active:translate-y-1 font-bold",children:"Join"})]})]}),v.jsx("div",{className:"text-center font-bold text-[var(--color-stroke-primary)] opacity-50 text-xs",children:"- OR -"}),v.jsx("button",{onClick:t.startOfflineSandbox,className:"w-full bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)] py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] font-bold hover:brightness-110",children:"Offline Practice (Hot Seat)"}),v.jsxs("div",{className:"space-y-2 pt-4",children:[v.jsx("div",{className:"text-xs font-bold uppercase opacity-50",children:"Lessons"}),v.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-1",children:ym.map(_=>v.jsxs("button",{onClick:()=>t.startLesson(_.id),className:"w-full bg-[var(--color-bg-canvas)] text-left p-2 rounded-lg border border-[var(--color-stroke-primary)]/30 hover:bg-white hover:border-[var(--color-stroke-primary)] transition-all flex justify-between items-center text-sm",children:[v.jsx("span",{className:"font-bold",children:_.title}),v.jsx("span",{className:"opacity-50",children:"Play "})]},_.id))})]})]})]});if((r==="SANDBOX"||r==="LESSON"||r==="LOBBY")&&(!n||n.length===0)){const _=r==="LOBBY"?"Initializing Room...":"Syncing Table...";return v.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-[var(--color-bg-canvas)] gap-4",children:[v.jsx("div",{className:"font-zcool text-4xl animate-pulse text-[var(--color-stroke-primary)]",children:_}),v.jsx("div",{className:"text-sm font-bold opacity-50 uppercase tracking-widest text-[var(--color-stroke-primary)]/50",children:r==="LOBBY"?"Preparing your session":"Waiting for player data"})]})}return r==="LOBBY"?v.jsx("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[var(--color-bg-canvas)] p-6",children:v.jsxs("div",{className:"bg-white p-8 rounded-2xl border-[3px] border-[var(--color-stroke-primary)] shadow-2xl max-w-lg w-full text-center space-y-6",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-zcool mb-2",children:"Lobby"}),i==="HOST"?v.jsxs("div",{className:"bg-[var(--color-func-yellow)] p-4 rounded-xl border-2 border-[var(--color-stroke-primary)] border-dashed",children:[v.jsx("div",{className:"text-xs uppercase font-bold opacity-60",children:"Room Code"}),v.jsx("div",{className:"text-4xl font-mono font-bold tracking-widest select-all",children:t.roomId}),v.jsx("div",{className:"text-xs mt-2 opacity-60",children:"Share this code with players on other iPads"})]}):v.jsx("div",{className:"animate-pulse font-bold text-[var(--color-noun-blue)]",children:"Waiting for Host to start..."})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"text-xs font-bold uppercase opacity-50 text-left",children:["Players (",(n==null?void 0:n.length)||0,"/4)"]}),n==null?void 0:n.map(_=>{var C;return v.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[var(--color-bg-canvas)] rounded-lg border border-[var(--color-stroke-primary)]/20",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--color-noun-blue)] text-white flex items-center justify-center font-bold",children:((C=_.name)==null?void 0:C[0])||"?"}),v.jsxs("span",{className:"font-bold",children:[_.name||"Unknown"," ",_.id===t.myPlayerId?"(You)":""]}),_.isHost&&v.jsx("span",{className:"text-xs bg-[var(--color-func-yellow)] px-2 py-0.5 rounded text-[var(--color-stroke-primary)] border border-black",children:"HOST"})]},_.id)})]}),v.jsxs("div",{className:"flex gap-4 pt-4",children:[v.jsx("button",{onClick:t.exitToMenu,className:"flex-1 py-3 font-bold opacity-50 hover:opacity-100",children:"Leave"}),i==="HOST"&&v.jsx("button",{onClick:t.startGame,disabled:((n==null?void 0:n.length)||0)<2,className:"flex-[2] bg-[var(--color-verb-red)] text-white font-bold py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_black] active:shadow-none active:translate-y-1 disabled:opacity-50 disabled:shadow-none",children:"Start Game"})]})]})}):v.jsxs("div",{className:"h-screen w-full flex flex-col bg-[var(--color-bg-canvas)] overflow-hidden",children:[t.message&&v.jsx("div",{className:"fixed top-28 left-1/2 -translate-x-1/2 z-50 flex justify-center pointer-events-none w-full px-4 animate-in slide-in-from-top-4",children:v.jsx("div",{className:"bg-[var(--color-stroke-primary)] text-white px-6 py-3 rounded-2xl font-bold shadow-2xl border-2 border-white text-center w-auto max-w-[90vw]",children:t.message})}),t.phase==="CHALLENGE"&&t.challengeState&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[var(--color-bg-canvas)]/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:v.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl border-4 border-[var(--color-stroke-primary)] shadow-[0_12px_0_var(--color-stroke-primary)] p-8 flex flex-col items-center space-y-8",children:[v.jsxs("div",{className:"text-center space-y-2",children:[v.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest text-[var(--color-verb-red)]",children:"Challenge Window"}),v.jsx("p",{className:"font-bold opacity-60",children:"Is this a valid Chinese sentence?"})]}),v.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8 px-4 bg-[var(--color-bg-canvas)] rounded-2xl border-2 border-dashed border-[var(--color-stroke-primary)]/20 w-full",children:(b=(L=t.challengeState)==null?void 0:L.meld)==null?void 0:b.map((_,C)=>v.jsx(ir,{card:_,size:"lg"},C))}),v.jsxs("div",{className:"flex flex-col items-center gap-2",children:[v.jsx("div",{className:"w-64 h-4 bg-[var(--color-bg-canvas)] rounded-full border-2 border-[var(--color-stroke-primary)] overflow-hidden",children:v.jsx("div",{className:"h-full bg-[var(--color-verb-red)] transition-all duration-500",style:{width:`${Math.max(0,(t.challengeState.endTime-Date.now())/(t.challengeState.status==="CHALLENGED"?1e4:5e3))*100}%`}})}),v.jsx("div",{className:"text-sm font-bold opacity-50",children:"Auto-accepting soon..."})]}),v.jsx("div",{className:"w-full flex flex-col gap-4",children:t.challengeState.status==="PENDING"?v.jsx("div",{className:"flex justify-center",children:t.myPlayerId!==t.players[t.currentTurn].id?v.jsx("button",{onClick:t.challengeMeld,className:"bg-[var(--color-verb-red)] text-white px-12 py-4 rounded-2xl border-2 border-[var(--color-stroke-primary)] shadow-[0_6px_0_var(--color-stroke-primary)] active:shadow-none active:translate-y-1 font-bold text-xl hover:brightness-110 transition-all",children:"Challenge!"}):v.jsx("div",{className:"text-[var(--color-noun-blue)] font-bold animate-pulse",children:"Waiting for peer review..."})}):v.jsxs("div",{className:"space-y-6 w-full",children:[v.jsx("div",{className:"text-center font-bold text-xl text-[var(--color-verb-red)] animate-bounce italic",children:"SENTENCE CHALLENGED!"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx("button",{onClick:()=>t.voteMeld(!0),className:`py-6 rounded-2xl border-2 border-[var(--color-stroke-primary)] font-bold text-xl transition-all
                                                ${t.challengeState.votes[t.myPlayerId]===!0?"bg-[var(--color-adj-green)] text-white shadow-none translate-y-1":"bg-white shadow-[0_6px_0_var(--color-stroke-primary)] hover:brightness-95"}`,children:"Accept (Valid)"}),v.jsx("button",{onClick:()=>t.voteMeld(!1),className:`py-6 rounded-2xl border-2 border-[var(--color-stroke-primary)] font-bold text-xl transition-all
                                                ${t.challengeState.votes[t.myPlayerId]===!1?"bg-[var(--color-verb-red)] text-white shadow-none translate-y-1":"bg-white shadow-[0_6px_0_var(--color-stroke-primary)] hover:brightness-95"}`,children:"Reject (Error)"})]}),v.jsx("div",{className:"flex justify-center gap-2",children:(p=t.players)==null?void 0:p.map(_=>{var O,I,X;const C=(I=(O=t.challengeState)==null?void 0:O.votes)==null?void 0:I[_.id];return v.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-[var(--color-stroke-primary)] flex items-center justify-center font-bold text-xs
                                                    ${C===!0?"bg-[var(--color-adj-green)] text-white":C===!1?"bg-[var(--color-verb-red)] text-white":"bg-gray-200 opacity-50"}`,children:((X=_.name)==null?void 0:X[0])||"?"},_.id)})})]})})]})}),v.jsxs("header",{className:"flex flex-col bg-[var(--color-bg-canvas)] shadow-sm z-10",children:[v.jsxs("div",{className:"p-3 flex justify-between items-center border-b border-[var(--color-stroke-primary)]/10",children:[v.jsx("button",{onClick:t.exitToMenu,className:"text-xs font-bold underline opacity-50 hover:opacity-100",children:" Leave"}),r==="LESSON"&&l?v.jsxs("div",{className:"flex flex-col items-center animate-in fade-in slide-in-from-top-4",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsxs("span",{className:"text-[10px] font-bold text-[var(--color-noun-blue)] uppercase tracking-wider",children:["Problem ",a+1," / ",u==null?void 0:u.problems.length]}),v.jsx("button",{onClick:t.getHint,className:"bg-[var(--color-func-yellow)] rounded-full w-5 h-5 flex items-center justify-center shadow-sm hover:scale-110 active:scale-95 text-xs",children:""})]}),v.jsx("span",{className:"font-zcool text-xl leading-none text-center px-4",children:l.prompt}),t.activeHint&&v.jsxs("div",{className:"mt-2 text-sm font-bold text-[var(--color-verb-red)] bg-white/50 px-3 py-1 rounded-lg border border-[var(--color-stroke-primary)]/20 animate-in fade-in slide-in-from-top-2",children:[" ",t.activeHint]})]}):v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h1",{className:"font-zcool text-xl text-[var(--color-stroke-primary)]",children:""}),i!=="OFFLINE"&&v.jsxs("span",{className:"text-[10px] opacity-50 font-bold",children:["Room: ",t.roomId]})]}),v.jsx("div",{className:`
                px-3 py-1 rounded-full border-2 border-[var(--color-stroke-primary)] font-bold text-xs md:text-sm uppercase tracking-wider
                ${t.phase==="DRAW"?"bg-[var(--color-noun-blue)] text-white":""}
                ${t.phase==="MELD"?"bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)]":""}
                ${t.phase==="DISCARD"?"bg-[var(--color-verb-red)] text-white":""}
            `,children:t.phase})]}),v.jsx("div",{className:"flex justify-between items-center px-4 py-2 bg-[var(--color-bg-surface)]/50 overflow-x-auto no-scrollbar gap-2",children:n==null?void 0:n.map((_,C)=>{var I;const O=C===t.currentTurn;return v.jsxs("div",{className:`
                            flex flex-col items-center justify-center min-w-[70px] p-1 rounded-lg transition-all duration-300 relative
                            ${O?"bg-white shadow-[0_4px_0_var(--color-noun-blue)] border-2 border-[var(--color-noun-blue)] -translate-y-1":"opacity-60 grayscale scale-90"}
                        `,children:[_.id===t.myPlayerId&&v.jsx("div",{className:"absolute -top-2 bg-black text-white text-[8px] px-1 rounded",children:"YOU"}),v.jsx("div",{className:"text-xs font-bold text-[var(--color-stroke-primary)] mb-1 truncate max-w-[60px]",children:_.name}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold bg-[var(--color-stroke-primary)] text-white px-2 py-0.5 rounded-full",children:[v.jsx("span",{children:""}),v.jsx("span",{children:((I=_.hand)==null?void 0:I.length)||0})]}),v.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)] px-2 py-0.5 rounded-full border border-black",children:[v.jsx("span",{children:""}),v.jsx("span",{children:_.score||0})]})]})]},_.id)})})]}),v.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-96 transition-all duration-300",children:[v.jsxs("section",{className:"flex justify-center items-center gap-8 md:gap-16 py-2 min-h-[140px] max-w-5xl mx-auto w-full",children:[v.jsxs("div",{className:`relative group ${t.phase==="DRAW"&&s?"cursor-pointer animate-pulse":"opacity-50 grayscale cursor-not-allowed"}`,onClick:()=>{s?t.drawFromDeck():t.triggerMessage("Not your turn!")},children:[v.jsx("div",{className:"w-16 h-24 md:w-20 md:h-28 bg-[var(--color-stroke-primary)] rounded-[12px] flex items-center justify-center text-white font-zcool text-xl border-[3px] border-[var(--color-stroke-primary)] shadow-[0_6px_0_rgba(0,0,0,0.2)] transition-transform group-active:translate-y-1 group-active:shadow-none",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-xl md:text-2xl",children:""}),v.jsx("span",{className:"text-xs md:text-sm mt-1",children:((f=t.deck)==null?void 0:f.length)||0})]})}),v.jsx("span",{className:"absolute -bottom-6 w-full text-center text-[10px] md:text-xs font-bold uppercase tracking-wider text-[var(--color-stroke-primary)]",children:"Draw"})]}),v.jsxs("div",{className:`relative ${t.phase==="DRAW"&&(((m=t.discardPile)==null?void 0:m.length)||0)>0&&s?"cursor-pointer":"cursor-default"}`,onClick:()=>{s&&t.drawFromDiscard()},children:[(((w=t.discardPile)==null?void 0:w.length)||0)>0?v.jsxs("div",{className:"relative",children:[v.jsx(ir,{card:t.discardPile[0],size:"md"}),(((T=t.discardPile)==null?void 0:T.length)||0)>1&&v.jsx("div",{className:"absolute top-1 left-1 w-full h-full bg-white border-[3px] border-[var(--color-stroke-primary)] rounded-[12px] -z-10"})]}):v.jsx("div",{className:"w-16 h-24 md:w-20 md:h-28 border-[3px] border-dashed border-[var(--color-stroke-primary)] rounded-[12px] opacity-30 flex items-center justify-center",children:v.jsx("span",{className:"text-2xl opacity-50",children:""})}),v.jsx("span",{className:"absolute -bottom-6 w-full text-center text-[10px] md:text-xs font-bold uppercase tracking-wider text-[var(--color-stroke-primary)]",children:"Market"})]})]}),v.jsxs("section",{className:"space-y-6 max-w-5xl mx-auto w-full",children:[v.jsxs("div",{className:"flex items-center gap-2 opacity-50",children:[v.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] flex-1"}),v.jsx("h2",{className:"text-xs font-bold uppercase tracking-widest text-[var(--color-stroke-primary)]",children:r==="LESSON"?"Your Answer":"Table"}),v.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] flex-1"})]}),v.jsx("div",{className:"flex flex-col gap-6 items-center",children:n==null?void 0:n.map(_=>{var C,O;return(((C=_==null?void 0:_.melds)==null?void 0:C.length)||0)===0?null:v.jsxs("div",{className:"relative bg-white/40 p-3 rounded-2xl border border-[var(--color-stroke-primary)]/10 w-full max-w-2xl",children:[v.jsx("div",{className:"absolute -top-3 left-3 bg-[var(--color-stroke-primary)] text-white text-[10px] px-2 py-0.5 rounded-full font-bold",children:(_==null?void 0:_.name)||"Unknown"}),v.jsx("div",{className:"flex flex-col gap-2 mt-2",children:(O=_.melds)==null?void 0:O.map((I,X)=>v.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 justify-center",children:I==null?void 0:I.map(Z=>v.jsx(ir,{card:Z,size:"sm"},Z.id))},X))})]},(_==null?void 0:_.id)||Math.random())})})]})]}),v.jsx("div",{className:`
        fixed bottom-80 left-0 w-full px-4 py-2 flex justify-center gap-4 pointer-events-none z-40
        transition-all duration-300
        ${t.phase==="MELD"&&s?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
      `,children:t.phase==="MELD"&&v.jsxs("div",{className:"flex gap-4 pointer-events-auto bg-[var(--color-bg-canvas)] p-2 rounded-2xl shadow-xl border-2 border-[var(--color-stroke-primary)]",children:[v.jsx("button",{onClick:t.confirmMeld,disabled:(((k=t.selectionQueue)==null?void 0:k.length)||0)<1,className:"bg-[var(--color-verb-red)] text-white px-6 py-2 rounded-xl font-bold border-2 border-[var(--color-stroke-primary)] shadow-[0_4px_0_#A05D49] active:translate-y-1 active:shadow-none disabled:opacity-50 disabled:shadow-none transition-all",children:r==="LESSON"?"Submit":"Meld"}),v.jsx("button",{onClick:t.skipMeld,className:"bg-[var(--color-bg-surface)] text-[var(--color-stroke-primary)] px-6 py-2 rounded-xl font-bold border-2 border-[var(--color-stroke-primary)] shadow-[0_4px_0_#ccc] active:translate-y-1 active:shadow-none transition-all",children:"Pass"})]})}),!s&&v.jsx("div",{className:"fixed bottom-80 w-full text-center pointer-events-none z-30",children:v.jsxs("span",{className:"bg-white/80 backdrop-blur text-[var(--color-stroke-primary)] px-4 py-2 rounded-full font-bold text-sm border border-[var(--color-stroke-primary)]",children:["Waiting for ",(e==null?void 0:e.name)||"Connecting...","..."]})}),g&&v.jsxs("div",{className:`
                fixed bottom-60 left-2 flex flex-col items-center p-2 bg-[#8FB996] border-2 border-[#2D5A27] rounded-xl shadow-lg z-40 transition-all
                ${t.phase==="DRAW"?"opacity-50 grayscale pointer-events-none":""}
          `,children:[v.jsx("div",{className:"text-[#1A3317] text-[10px] font-bold uppercase tracking-wider mb-2",children:"Core Words"}),v.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[40vh] overflow-y-auto no-scrollbar p-1",children:gm.map(_=>{const C=Sr.find(I=>I.id===_);if(!C)return null;const O=t.selectionQueue.some(I=>I.type==="SHELF"&&I.identifier===_);return v.jsxs("div",{className:"scale-[1.05] relative",children:[v.jsx(ir,{card:C,size:"sm",isSelected:O,onClick:()=>{t.phase==="DRAW"?t.triggerMessage("Draw first!"):t.togglePowerUp(_)}}),O&&v.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(I=>I.type==="SHELF"&&I.identifier===_)+1})]},_)})})]}),v.jsxs("footer",{className:"hand-dock fixed bottom-0 w-full z-30 flex flex-col items-center",children:[(t.phase==="MELD"&&s||t.phase==="DRAW"&&s)&&v.jsxs("div",{className:`
                absolute -top-28 bg-[#5D4037] border-2 border-[#D4AF37] p-3 rounded-xl shadow-lg flex flex-col items-center max-w-[95vw] z-50 animate-in slide-in-from-bottom-4 transition-all
                ${t.phase==="DRAW"?"opacity-50 grayscale pointer-events-none":""}
            `,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-1 w-full justify-between px-1",children:[v.jsx("span",{className:"text-[#D4AF37] text-[10px] font-bold uppercase tracking-wider",children:"Magic Shelf"}),v.jsx("span",{className:"text-white/80 text-[10px] font-mono",children:" +2 Pts |  x2 Mult"})]}),v.jsx("div",{className:"flex gap-2 overflow-x-auto w-full no-scrollbar pb-1",children:Cv.map(_=>{const C=Sr.find(I=>I.id===_);if(!C)return null;const O=t.selectionQueue.some(I=>I.type==="SHELF"&&I.identifier===_);return v.jsxs("div",{className:`scale-[1.15] mx-1.5 relative ${t.phase==="DRAW"?"cursor-not-allowed":""}`,children:[v.jsx(ir,{card:C,size:"sm",isSelected:O,onClick:()=>{t.phase==="DRAW"?t.triggerMessage("Draw first!"):t.togglePowerUp(_)}}),O&&v.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(I=>I.type==="SHELF"&&I.identifier===_)+1})]},_)})})]}),v.jsxs("div",{className:"w-full flex justify-between items-center px-4 py-1",children:[v.jsx("div",{className:"w-8"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"w-12 h-1.5 bg-[var(--color-stroke-primary)] opacity-20 rounded-full mb-1"}),v.jsx("div",{className:"text-[10px] font-bold text-[var(--color-stroke-primary)] opacity-50 uppercase tracking-widest",children:"YOUR HAND"})]}),v.jsx("button",{onClick:t.sortHand,className:"text-[10px] font-bold bg-white/50 hover:bg-white px-2 py-1 rounded border border-[var(--color-stroke-primary)]",children:"Sort "})]}),v.jsx("div",{className:"w-full overflow-x-auto pb-6 px-4 no-scrollbar",children:v.jsx("div",{className:"flex gap-2 md:gap-4 min-w-max mx-auto px-4 justify-center",children:o==null?void 0:o.map((_,C)=>{var I;const O=(I=t.selectionQueue)==null?void 0:I.some(X=>X.type==="HAND"&&X.identifier===C);return v.jsxs("div",{className:"relative pt-4 transition-all duration-300",children:[O&&v.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(X=>X.type==="HAND"&&X.identifier===C)+1}),v.jsx("div",{className:`
                            absolute -top-1 left-1/2 -translate-x-1/2 text-xl z-40 transition-all duration-200
                            ${O?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
                        `,children:""}),v.jsx(ir,{card:_,isSelected:O,onClick:()=>{if(!s&&i!=="OFFLINE")return t.triggerMessage("Wait for your turn!");t.phase==="MELD"?t.toggleSelect(C):t.phase==="DISCARD"?t.discardCard(C):t.phase==="DRAW"&&t.triggerMessage("Draw first!")}})]},(_==null?void 0:_.id)||C)})})})]})]})}const qg=document.getElementById("root");if(!qg)throw new Error("Could not find root element to mount to");const TC=ea.createRoot(qg);TC.render(v.jsx(cy.StrictMode,{children:v.jsx(IC,{})}));
