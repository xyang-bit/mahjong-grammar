(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Yg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sf={exports:{}},Oo={},of={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=Symbol.for("react.element"),Kg=Symbol.for("react.portal"),Xg=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),Jg=Symbol.for("react.profiler"),ey=Symbol.for("react.provider"),ty=Symbol.for("react.context"),ny=Symbol.for("react.forward_ref"),ry=Symbol.for("react.suspense"),iy=Symbol.for("react.memo"),sy=Symbol.for("react.lazy"),td=Symbol.iterator;function oy(t){return t===null||typeof t!="object"?null:(t=td&&t[td]||t["@@iterator"],typeof t=="function"?t:null)}var lf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},af=Object.assign,uf={};function Qr(t,e,n){this.props=t,this.context=e,this.refs=uf,this.updater=n||lf}Qr.prototype.isReactComponent={};Qr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cf(){}cf.prototype=Qr.prototype;function mu(t,e,n){this.props=t,this.context=e,this.refs=uf,this.updater=n||lf}var gu=mu.prototype=new cf;gu.constructor=mu;af(gu,Qr.prototype);gu.isPureReactComponent=!0;var nd=Array.isArray,df=Object.prototype.hasOwnProperty,yu={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function ff(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)df.call(e,r)&&!hf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:os,type:t,key:s,ref:o,props:i,_owner:yu.current}}function ly(t,e){return{$$typeof:os,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vu(t){return typeof t=="object"&&t!==null&&t.$$typeof===os}function ay(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rd=/\/+/g;function gl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ay(""+t.key):e.toString(36)}function Os(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case os:case Kg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gl(o,0):r,nd(i)?(n="",t!=null&&(n=t.replace(rd,"$&/")+"/"),Os(i,e,n,"",function(u){return u})):i!=null&&(vu(i)&&(i=ly(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nd(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+gl(s,l);o+=Os(s,e,n,a,i)}else if(a=oy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+gl(s,l++),o+=Os(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vs(t,e,n){if(t==null)return t;var r=[],i=0;return Os(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qe={current:null},Fs={transition:null},cy={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Fs,ReactCurrentOwner:yu};function pf(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:vs,forEach:function(t,e,n){vs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vs(t,function(){e++}),e},toArray:function(t){return vs(t,function(e){return e})||[]},only:function(t){if(!vu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Qr;q.Fragment=Xg;q.Profiler=Jg;q.PureComponent=mu;q.StrictMode=Zg;q.Suspense=ry;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cy;q.act=pf;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=af({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)df.call(e,a)&&!hf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:os,type:t.type,key:i,ref:s,props:r,_owner:o}};q.createContext=function(t){return t={$$typeof:ty,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ey,_context:t},t.Consumer=t};q.createElement=ff;q.createFactory=function(t){var e=ff.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:ny,render:t}};q.isValidElement=vu;q.lazy=function(t){return{$$typeof:sy,_payload:{_status:-1,_result:t},_init:uy}};q.memo=function(t,e){return{$$typeof:iy,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Fs.transition;Fs.transition={};try{t()}finally{Fs.transition=e}};q.unstable_act=pf;q.useCallback=function(t,e){return qe.current.useCallback(t,e)};q.useContext=function(t){return qe.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return qe.current.useDeferredValue(t)};q.useEffect=function(t,e){return qe.current.useEffect(t,e)};q.useId=function(){return qe.current.useId()};q.useImperativeHandle=function(t,e,n){return qe.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return qe.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return qe.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return qe.current.useMemo(t,e)};q.useReducer=function(t,e,n){return qe.current.useReducer(t,e,n)};q.useRef=function(t){return qe.current.useRef(t)};q.useState=function(t){return qe.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return qe.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return qe.current.useTransition()};q.version="18.3.1";of.exports=q;var ee=of.exports;const dy=Yg(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy=ee,fy=Symbol.for("react.element"),py=Symbol.for("react.fragment"),my=Object.prototype.hasOwnProperty,gy=hy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yy={key:!0,ref:!0,__self:!0,__source:!0};function mf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)my.call(e,r)&&!yy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fy,type:t,key:s,ref:o,props:i,_owner:gy.current}}Oo.Fragment=py;Oo.jsx=mf;Oo.jsxs=mf;sf.exports=Oo;var y=sf.exports,ta={},gf={exports:{}},lt={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,z){var F=N.length;N.push(z);e:for(;0<F;){var ue=F-1>>>1,_e=N[ue];if(0<i(_e,z))N[ue]=z,N[F]=_e,F=ue;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var z=N[0],F=N.pop();if(F!==z){N[0]=F;e:for(var ue=0,_e=N.length,ir=_e>>>1;ue<ir;){var Ft=2*(ue+1)-1,ze=N[Ft],Me=Ft+1,yt=N[Me];if(0>i(ze,F))Me<_e&&0>i(yt,ze)?(N[ue]=yt,N[Me]=F,ue=Me):(N[ue]=ze,N[Ft]=F,ue=Ft);else if(Me<_e&&0>i(yt,F))N[ue]=yt,N[Me]=F,ue=Me;else break e}}return z}function i(N,z){var F=N.sortIndex-z.sortIndex;return F!==0?F:N.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,c=3,v=!1,g=!1,L=!1,A=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=N)r(u),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(u)}}function w(N){if(L=!1,m(N),!g)if(n(a)!==null)g=!0,ni(I);else{var z=n(u);z!==null&&bn(w,z.startTime-N)}}function I(N,z){g=!1,L&&(L=!1,p(x),x=-1),v=!0;var F=c;try{for(m(z),d=n(a);d!==null&&(!(d.expirationTime>z)||N&&!Y());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,c=d.priorityLevel;var _e=ue(d.expirationTime<=z);z=t.unstable_now(),typeof _e=="function"?d.callback=_e:d===n(a)&&r(a),m(z)}else r(a);d=n(a)}if(d!==null)var ir=!0;else{var Ft=n(u);Ft!==null&&bn(w,Ft.startTime-z),ir=!1}return ir}finally{d=null,c=F,v=!1}}var k=!1,_=null,x=-1,M=5,T=-1;function Y(){return!(t.unstable_now()-T<M)}function $(){if(_!==null){var N=t.unstable_now();T=N;var z=!0;try{z=_(!0,N)}finally{z?Pt():(k=!1,_=null)}}else k=!1}var Pt;if(typeof f=="function")Pt=function(){f($)};else if(typeof MessageChannel<"u"){var Rn=new MessageChannel,rr=Rn.port2;Rn.port1.onmessage=$,Pt=function(){rr.postMessage(null)}}else Pt=function(){A($,0)};function ni(N){_=N,k||(k=!0,Pt())}function bn(N,z){x=A(function(){N(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){g||v||(g=!0,ni(I))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(c){case 1:case 2:case 3:var z=3;break;default:z=c}var F=c;c=z;try{return N()}finally{c=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,z){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var F=c;c=N;try{return z()}finally{c=F}},t.unstable_scheduleCallback=function(N,z,F){var ue=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ue+F:ue):F=ue,N){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=F+_e,N={id:h++,callback:z,priorityLevel:N,startTime:F,expirationTime:_e,sortIndex:-1},F>ue?(N.sortIndex=F,e(u,N),n(a)===null&&N===n(u)&&(L?(p(x),x=-1):L=!0,bn(w,F-ue))):(N.sortIndex=_e,e(a,N),g||v||(g=!0,ni(I))),N},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(N){var z=c;return function(){var F=c;c=z;try{return N.apply(this,arguments)}finally{c=F}}}})(vf);yf.exports=vf;var vy=yf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y=ee,ot=vy;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _f=new Set,Di={};function Jn(t,e){Ar(t,e),Ar(t+"Capture",e)}function Ar(t,e){for(Di[t]=e,t=0;t<e.length;t++)_f.add(e[t])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=Object.prototype.hasOwnProperty,Ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,id={},sd={};function wy(t){return na.call(sd,t)?!0:na.call(id,t)?!1:Ly.test(t)?sd[t]=!0:(id[t]=!0,!1)}function Cy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xy(t,e,n,r){if(e===null||typeof e>"u"||Cy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ge(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Ge(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Ge(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Ge(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Ge(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Ge(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Ge(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Ge(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Ge(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Ge(t,5,!1,t.toLowerCase(),null,!1,!1)});var _u=/[\-:]([a-z])/g;function Lu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_u,Lu);De[e]=new Ge(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_u,Lu);De[e]=new Ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_u,Lu);De[e]=new Ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Ge(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Ge(t,1,!1,t.toLowerCase(),null,!0,!0)});function wu(t,e,n,r){var i=De.hasOwnProperty(e)?De[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xy(e,n,i,r)&&(n=null),r||i===null?wy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tn=_y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_s=Symbol.for("react.element"),ur=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Cu=Symbol.for("react.strict_mode"),ra=Symbol.for("react.profiler"),Lf=Symbol.for("react.provider"),wf=Symbol.for("react.context"),xu=Symbol.for("react.forward_ref"),ia=Symbol.for("react.suspense"),sa=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),od=Symbol.iterator;function ri(t){return t===null||typeof t!="object"?null:(t=od&&t[od]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,yl;function mi(t){if(yl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yl=e&&e[1]||""}return`
`+yl+t}var vl=!1;function _l(t,e){if(!t||vl)return"";vl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{vl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mi(t):""}function Ey(t){switch(t.tag){case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return t=_l(t.type,!1),t;case 11:return t=_l(t.type.render,!1),t;case 1:return t=_l(t.type,!0),t;default:return""}}function oa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cr:return"Fragment";case ur:return"Portal";case ra:return"Profiler";case Cu:return"StrictMode";case ia:return"Suspense";case sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wf:return(t.displayName||"Context")+".Consumer";case Lf:return(t._context.displayName||"Context")+".Provider";case xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Eu:return e=t.displayName||null,e!==null?e:oa(t.type)||"Memo";case on:e=t._payload,t=t._init;try{return oa(t(e))}catch{}}return null}function Sy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oa(e);case 8:return e===Cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function En(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ky(t){var e=xf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ls(t){t._valueTracker||(t._valueTracker=ky(t))}function Ef(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function la(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ld(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=En(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sf(t,e){e=e.checked,e!=null&&wu(t,"checked",e,!1)}function aa(t,e){Sf(t,e);var n=En(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ua(t,e.type,n):e.hasOwnProperty("defaultValue")&&ua(t,e.type,En(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ad(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ua(t,e,n){(e!=="number"||Ys(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gi=Array.isArray;function Cr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+En(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ca(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ud(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(gi(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:En(n)}}function kf(t,e){var n=En(e.value),r=En(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function If(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function da(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?If(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ws,Tf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ws=ws||document.createElement("div"),ws.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ws.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ai(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iy=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(t){Iy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_i[e]=_i[t]})});function Nf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_i.hasOwnProperty(t)&&_i[t]?(""+e).trim():e+"px"}function Pf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Nf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ty=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(t,e){if(e){if(Ty[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function fa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pa=null;function Su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ma=null,xr=null,Er=null;function dd(t){if(t=us(t)){if(typeof ma!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Wo(e),ma(t.stateNode,t.type,e))}}function Rf(t){xr?Er?Er.push(t):Er=[t]:xr=t}function bf(){if(xr){var t=xr,e=Er;if(Er=xr=null,dd(t),e)for(t=0;t<e.length;t++)dd(e[t])}}function Df(t,e){return t(e)}function Af(){}var Ll=!1;function zf(t,e,n){if(Ll)return t(e,n);Ll=!0;try{return Df(t,e,n)}finally{Ll=!1,(xr!==null||Er!==null)&&(Af(),bf())}}function zi(t,e){var n=t.stateNode;if(n===null)return null;var r=Wo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var ga=!1;if(Yt)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){ga=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{ga=!1}function Ny(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Li=!1,Ks=null,Xs=!1,ya=null,Py={onError:function(t){Li=!0,Ks=t}};function Ry(t,e,n,r,i,s,o,l,a){Li=!1,Ks=null,Ny.apply(Py,arguments)}function by(t,e,n,r,i,s,o,l,a){if(Ry.apply(this,arguments),Li){if(Li){var u=Ks;Li=!1,Ks=null}else throw Error(C(198));Xs||(Xs=!0,ya=u)}}function er(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hd(t){if(er(t)!==t)throw Error(C(188))}function Dy(t){var e=t.alternate;if(!e){if(e=er(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return hd(i),t;if(s===r)return hd(i),e;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function Of(t){return t=Dy(t),t!==null?Ff(t):null}function Ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ff(t);if(e!==null)return e;t=t.sibling}return null}var jf=ot.unstable_scheduleCallback,fd=ot.unstable_cancelCallback,Ay=ot.unstable_shouldYield,zy=ot.unstable_requestPaint,ve=ot.unstable_now,My=ot.unstable_getCurrentPriorityLevel,ku=ot.unstable_ImmediatePriority,Hf=ot.unstable_UserBlockingPriority,Zs=ot.unstable_NormalPriority,Oy=ot.unstable_LowPriority,Uf=ot.unstable_IdlePriority,Fo=null,zt=null;function Fy(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Uy,jy=Math.log,Hy=Math.LN2;function Uy(t){return t>>>=0,t===0?32:31-(jy(t)/Hy|0)|0}var Cs=64,xs=4194304;function yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Js(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=yi(l):(s&=o,s!==0&&(r=yi(s)))}else o=n&~i,o!==0?r=yi(o):s!==0&&(r=yi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-St(e),i=1<<n,r|=t[n],e&=~i;return r}function Wy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function By(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-St(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Wy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function va(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wf(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function wl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ls(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-St(e),t[e]=n}function $y(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-St(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Iu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-St(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Z=0;function Bf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $f,Tu,Vf,qf,Gf,_a=!1,Es=[],fn=null,pn=null,mn=null,Mi=new Map,Oi=new Map,an=[],Vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(t,e){switch(t){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(e.pointerId)}}function si(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=us(e),e!==null&&Tu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qy(t,e,n,r,i){switch(e){case"focusin":return fn=si(fn,t,e,n,r,i),!0;case"dragenter":return pn=si(pn,t,e,n,r,i),!0;case"mouseover":return mn=si(mn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Mi.set(s,si(Mi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Oi.set(s,si(Oi.get(s)||null,t,e,n,r,i)),!0}return!1}function Qf(t){var e=On(t.target);if(e!==null){var n=er(e);if(n!==null){if(e=n.tag,e===13){if(e=Mf(n),e!==null){t.blockedOn=e,Gf(t.priority,function(){Vf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=La(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pa=r,n.target.dispatchEvent(r),pa=null}else return e=us(n),e!==null&&Tu(e),t.blockedOn=n,!1;e.shift()}return!0}function md(t,e,n){js(t)&&n.delete(e)}function Gy(){_a=!1,fn!==null&&js(fn)&&(fn=null),pn!==null&&js(pn)&&(pn=null),mn!==null&&js(mn)&&(mn=null),Mi.forEach(md),Oi.forEach(md)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,_a||(_a=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Gy)))}function Fi(t){function e(i){return oi(i,t)}if(0<Es.length){oi(Es[0],t);for(var n=1;n<Es.length;n++){var r=Es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fn!==null&&oi(fn,t),pn!==null&&oi(pn,t),mn!==null&&oi(mn,t),Mi.forEach(e),Oi.forEach(e),n=0;n<an.length;n++)r=an[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Qf(n),n.blockedOn===null&&an.shift()}var Sr=tn.ReactCurrentBatchConfig,eo=!0;function Qy(t,e,n,r){var i=Z,s=Sr.transition;Sr.transition=null;try{Z=1,Nu(t,e,n,r)}finally{Z=i,Sr.transition=s}}function Yy(t,e,n,r){var i=Z,s=Sr.transition;Sr.transition=null;try{Z=4,Nu(t,e,n,r)}finally{Z=i,Sr.transition=s}}function Nu(t,e,n,r){if(eo){var i=La(t,e,n,r);if(i===null)Rl(t,e,r,to,n),pd(t,r);else if(qy(i,t,e,n,r))r.stopPropagation();else if(pd(t,r),e&4&&-1<Vy.indexOf(t)){for(;i!==null;){var s=us(i);if(s!==null&&$f(s),s=La(t,e,n,r),s===null&&Rl(t,e,r,to,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rl(t,e,r,null,n)}}var to=null;function La(t,e,n,r){if(to=null,t=Su(r),t=On(t),t!==null)if(e=er(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return to=t,null}function Yf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(My()){case ku:return 1;case Hf:return 4;case Zs:case Oy:return 16;case Uf:return 536870912;default:return 16}default:return 16}}var cn=null,Pu=null,Hs=null;function Kf(){if(Hs)return Hs;var t,e=Pu,n=e.length,r,i="value"in cn?cn.value:cn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hs=i.slice(t,1<r?1-r:void 0)}function Us(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function gd(){return!1}function at(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ss:gd,this.isPropagationStopped=gd,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),e}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=at(Yr),as=he({},Yr,{view:0,detail:0}),Ky=at(as),Cl,xl,li,jo=he({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==li&&(li&&t.type==="mousemove"?(Cl=t.screenX-li.screenX,xl=t.screenY-li.screenY):xl=Cl=0,li=t),Cl)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),yd=at(jo),Xy=he({},jo,{dataTransfer:0}),Zy=at(Xy),Jy=he({},as,{relatedTarget:0}),El=at(Jy),e1=he({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),t1=at(e1),n1=he({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r1=at(n1),i1=he({},Yr,{data:0}),vd=at(i1),s1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l1[t])?!!e[t]:!1}function bu(){return a1}var u1=he({},as,{key:function(t){if(t.key){var e=s1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Us(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?o1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bu,charCode:function(t){return t.type==="keypress"?Us(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Us(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),c1=at(u1),d1=he({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=at(d1),h1=he({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bu}),f1=at(h1),p1=he({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),m1=at(p1),g1=he({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y1=at(g1),v1=[9,13,27,32],Du=Yt&&"CompositionEvent"in window,wi=null;Yt&&"documentMode"in document&&(wi=document.documentMode);var _1=Yt&&"TextEvent"in window&&!wi,Xf=Yt&&(!Du||wi&&8<wi&&11>=wi),Ld=String.fromCharCode(32),wd=!1;function Zf(t,e){switch(t){case"keyup":return v1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dr=!1;function L1(t,e){switch(t){case"compositionend":return Jf(e);case"keypress":return e.which!==32?null:(wd=!0,Ld);case"textInput":return t=e.data,t===Ld&&wd?null:t;default:return null}}function w1(t,e){if(dr)return t==="compositionend"||!Du&&Zf(t,e)?(t=Kf(),Hs=Pu=cn=null,dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xf&&e.locale!=="ko"?null:e.data;default:return null}}var C1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!C1[t.type]:e==="textarea"}function ep(t,e,n,r){Rf(r),e=no(e,"onChange"),0<e.length&&(n=new Ru("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ci=null,ji=null;function x1(t){dp(t,0)}function Ho(t){var e=pr(t);if(Ef(e))return t}function E1(t,e){if(t==="change")return e}var tp=!1;if(Yt){var Sl;if(Yt){var kl="oninput"in document;if(!kl){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),kl=typeof xd.oninput=="function"}Sl=kl}else Sl=!1;tp=Sl&&(!document.documentMode||9<document.documentMode)}function Ed(){Ci&&(Ci.detachEvent("onpropertychange",np),ji=Ci=null)}function np(t){if(t.propertyName==="value"&&Ho(ji)){var e=[];ep(e,ji,t,Su(t)),zf(x1,e)}}function S1(t,e,n){t==="focusin"?(Ed(),Ci=e,ji=n,Ci.attachEvent("onpropertychange",np)):t==="focusout"&&Ed()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(ji)}function I1(t,e){if(t==="click")return Ho(e)}function T1(t,e){if(t==="input"||t==="change")return Ho(e)}function N1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tt=typeof Object.is=="function"?Object.is:N1;function Hi(t,e){if(Tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!na.call(e,i)||!Tt(t[i],e[i]))return!1}return!0}function Sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kd(t,e){var n=Sd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sd(n)}}function rp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ip(){for(var t=window,e=Ys();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ys(t.document)}return e}function Au(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P1(t){var e=ip(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rp(n.ownerDocument.documentElement,n)){if(r!==null&&Au(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kd(n,s);var o=kd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var R1=Yt&&"documentMode"in document&&11>=document.documentMode,hr=null,wa=null,xi=null,Ca=!1;function Id(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ca||hr==null||hr!==Ys(r)||(r=hr,"selectionStart"in r&&Au(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&Hi(xi,r)||(xi=r,r=no(wa,"onSelect"),0<r.length&&(e=new Ru("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hr)))}function ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fr={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},Il={},sp={};Yt&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function Uo(t){if(Il[t])return Il[t];if(!fr[t])return t;var e=fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sp)return Il[t]=e[n];return t}var op=Uo("animationend"),lp=Uo("animationiteration"),ap=Uo("animationstart"),up=Uo("transitionend"),cp=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(t,e){cp.set(t,e),Jn(e,[t])}for(var Tl=0;Tl<Td.length;Tl++){var Nl=Td[Tl],b1=Nl.toLowerCase(),D1=Nl[0].toUpperCase()+Nl.slice(1);Tn(b1,"on"+D1)}Tn(op,"onAnimationEnd");Tn(lp,"onAnimationIteration");Tn(ap,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(up,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A1=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function Nd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,by(r,e,void 0,t),t.currentTarget=null}function dp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Nd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Nd(i,l,u),s=a}}}if(Xs)throw t=ya,Xs=!1,ya=null,t}function oe(t,e){var n=e[Ia];n===void 0&&(n=e[Ia]=new Set);var r=t+"__bubble";n.has(r)||(hp(e,t,2,!1),n.add(r))}function Pl(t,e,n){var r=0;e&&(r|=4),hp(n,t,r,e)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[Is]){t[Is]=!0,_f.forEach(function(n){n!=="selectionchange"&&(A1.has(n)||Pl(n,!1,t),Pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Is]||(e[Is]=!0,Pl("selectionchange",!1,e))}}function hp(t,e,n,r){switch(Yf(e)){case 1:var i=Qy;break;case 4:i=Yy;break;default:i=Nu}n=i.bind(null,e,n,t),i=void 0,!ga||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=On(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}zf(function(){var u=s,h=Su(n),d=[];e:{var c=cp.get(t);if(c!==void 0){var v=Ru,g=t;switch(t){case"keypress":if(Us(n)===0)break e;case"keydown":case"keyup":v=c1;break;case"focusin":g="focus",v=El;break;case"focusout":g="blur",v=El;break;case"beforeblur":case"afterblur":v=El;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=f1;break;case op:case lp:case ap:v=t1;break;case up:v=m1;break;case"scroll":v=Ky;break;case"wheel":v=y1;break;case"copy":case"cut":case"paste":v=r1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=_d}var L=(e&4)!==0,A=!L&&t==="scroll",p=L?c!==null?c+"Capture":null:c;L=[];for(var f=u,m;f!==null;){m=f;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,p!==null&&(w=zi(f,p),w!=null&&L.push(Wi(f,w,m)))),A)break;f=f.return}0<L.length&&(c=new v(c,g,null,n,h),d.push({event:c,listeners:L}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",c&&n!==pa&&(g=n.relatedTarget||n.fromElement)&&(On(g)||g[Kt]))break e;if((v||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,v?(g=n.relatedTarget||n.toElement,v=u,g=g?On(g):null,g!==null&&(A=er(g),g!==A||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=u),v!==g)){if(L=yd,w="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(L=_d,w="onPointerLeave",p="onPointerEnter",f="pointer"),A=v==null?c:pr(v),m=g==null?c:pr(g),c=new L(w,f+"leave",v,n,h),c.target=A,c.relatedTarget=m,w=null,On(h)===u&&(L=new L(p,f+"enter",g,n,h),L.target=m,L.relatedTarget=A,w=L),A=w,v&&g)t:{for(L=v,p=g,f=0,m=L;m;m=or(m))f++;for(m=0,w=p;w;w=or(w))m++;for(;0<f-m;)L=or(L),f--;for(;0<m-f;)p=or(p),m--;for(;f--;){if(L===p||p!==null&&L===p.alternate)break t;L=or(L),p=or(p)}L=null}else L=null;v!==null&&Pd(d,c,v,L,!1),g!==null&&A!==null&&Pd(d,A,g,L,!0)}}e:{if(c=u?pr(u):window,v=c.nodeName&&c.nodeName.toLowerCase(),v==="select"||v==="input"&&c.type==="file")var I=E1;else if(Cd(c))if(tp)I=T1;else{I=k1;var k=S1}else(v=c.nodeName)&&v.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(I=I1);if(I&&(I=I(t,u))){ep(d,I,n,h);break e}k&&k(t,c,u),t==="focusout"&&(k=c._wrapperState)&&k.controlled&&c.type==="number"&&ua(c,"number",c.value)}switch(k=u?pr(u):window,t){case"focusin":(Cd(k)||k.contentEditable==="true")&&(hr=k,wa=u,xi=null);break;case"focusout":xi=wa=hr=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,Id(d,n,h);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":Id(d,n,h)}var _;if(Du)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else dr?Zf(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Xf&&n.locale!=="ko"&&(dr||x!=="onCompositionStart"?x==="onCompositionEnd"&&dr&&(_=Kf()):(cn=h,Pu="value"in cn?cn.value:cn.textContent,dr=!0)),k=no(u,x),0<k.length&&(x=new vd(x,t,null,n,h),d.push({event:x,listeners:k}),_?x.data=_:(_=Jf(n),_!==null&&(x.data=_)))),(_=_1?L1(t,n):w1(t,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(h=new vd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=_))}dp(d,e)})}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function no(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zi(t,n),s!=null&&r.unshift(Wi(t,s,i)),s=zi(t,e),s!=null&&r.push(Wi(t,s,i))),t=t.return}return r}function or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=zi(n,s),a!=null&&o.unshift(Wi(n,a,l))):i||(a=zi(n,s),a!=null&&o.push(Wi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var z1=/\r\n?/g,M1=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace(M1,"")}function Ts(t,e,n){if(e=Rd(e),Rd(t)!==e&&n)throw Error(C(425))}function ro(){}var xa=null,Ea=null;function Sa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ka=typeof setTimeout=="function"?setTimeout:void 0,O1=typeof clearTimeout=="function"?clearTimeout:void 0,bd=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof bd<"u"?function(t){return bd.resolve(null).then(t).catch(j1)}:ka;function j1(t){setTimeout(function(){throw t})}function bl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fi(e)}function gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),At="__reactFiber$"+Kr,Bi="__reactProps$"+Kr,Kt="__reactContainer$"+Kr,Ia="__reactEvents$"+Kr,H1="__reactListeners$"+Kr,U1="__reactHandles$"+Kr;function On(t){var e=t[At];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kt]||n[At]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dd(t);t!==null;){if(n=t[At])return n;t=Dd(t)}return e}t=n,n=t.parentNode}return null}function us(t){return t=t[At]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Wo(t){return t[Bi]||null}var Ta=[],mr=-1;function Nn(t){return{current:t}}function le(t){0>mr||(t.current=Ta[mr],Ta[mr]=null,mr--)}function ie(t,e){mr++,Ta[mr]=t.current,t.current=e}var Sn={},Ue=Nn(Sn),Je=Nn(!1),$n=Sn;function zr(t,e){var n=t.type.contextTypes;if(!n)return Sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function et(t){return t=t.childContextTypes,t!=null}function io(){le(Je),le(Ue)}function Ad(t,e,n){if(Ue.current!==Sn)throw Error(C(168));ie(Ue,e),ie(Je,n)}function fp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,Sy(t)||"Unknown",i));return he({},n,r)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,$n=Ue.current,ie(Ue,t),ie(Je,Je.current),!0}function zd(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=fp(t,e,$n),r.__reactInternalMemoizedMergedChildContext=t,le(Je),le(Ue),ie(Ue,t)):le(Je),ie(Je,n)}var Bt=null,Bo=!1,Dl=!1;function pp(t){Bt===null?Bt=[t]:Bt.push(t)}function W1(t){Bo=!0,pp(t)}function Pn(){if(!Dl&&Bt!==null){Dl=!0;var t=0,e=Z;try{var n=Bt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bt=null,Bo=!1}catch(i){throw Bt!==null&&(Bt=Bt.slice(t+1)),jf(ku,Pn),i}finally{Z=e,Dl=!1}}return null}var gr=[],yr=0,oo=null,lo=0,ct=[],dt=0,Vn=null,$t=1,Vt="";function Dn(t,e){gr[yr++]=lo,gr[yr++]=oo,oo=t,lo=e}function mp(t,e,n){ct[dt++]=$t,ct[dt++]=Vt,ct[dt++]=Vn,Vn=t;var r=$t;t=Vt;var i=32-St(r)-1;r&=~(1<<i),n+=1;var s=32-St(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$t=1<<32-St(e)+i|n<<i|r,Vt=s+t}else $t=1<<s|n<<i|r,Vt=t}function zu(t){t.return!==null&&(Dn(t,1),mp(t,1,0))}function Mu(t){for(;t===oo;)oo=gr[--yr],gr[yr]=null,lo=gr[--yr],gr[yr]=null;for(;t===Vn;)Vn=ct[--dt],ct[dt]=null,Vt=ct[--dt],ct[dt]=null,$t=ct[--dt],ct[dt]=null}var st=null,it=null,ae=!1,Ct=null;function gp(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Md(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,st=t,it=gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,st=t,it=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vn!==null?{id:$t,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,st=t,it=null,!0):!1;default:return!1}}function Na(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pa(t){if(ae){var e=it;if(e){var n=e;if(!Md(t,e)){if(Na(t))throw Error(C(418));e=gn(n.nextSibling);var r=st;e&&Md(t,e)?gp(r,n):(t.flags=t.flags&-4097|2,ae=!1,st=t)}}else{if(Na(t))throw Error(C(418));t.flags=t.flags&-4097|2,ae=!1,st=t}}}function Od(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;st=t}function Ns(t){if(t!==st)return!1;if(!ae)return Od(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sa(t.type,t.memoizedProps)),e&&(e=it)){if(Na(t))throw yp(),Error(C(418));for(;e;)gp(t,e),e=gn(e.nextSibling)}if(Od(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){it=gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}it=null}}else it=st?gn(t.stateNode.nextSibling):null;return!0}function yp(){for(var t=it;t;)t=gn(t.nextSibling)}function Mr(){it=st=null,ae=!1}function Ou(t){Ct===null?Ct=[t]:Ct.push(t)}var B1=tn.ReactCurrentBatchConfig;function ai(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Ps(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fd(t){var e=t._init;return e(t._payload)}function vp(t){function e(p,f){if(t){var m=p.deletions;m===null?(p.deletions=[f],p.flags|=16):m.push(f)}}function n(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function i(p,f){return p=Ln(p,f),p.index=0,p.sibling=null,p}function s(p,f,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<f?(p.flags|=2,f):m):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,f,m,w){return f===null||f.tag!==6?(f=Hl(m,p.mode,w),f.return=p,f):(f=i(f,m),f.return=p,f)}function a(p,f,m,w){var I=m.type;return I===cr?h(p,f,m.props.children,w,m.key):f!==null&&(f.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===on&&Fd(I)===f.type)?(w=i(f,m.props),w.ref=ai(p,f,m),w.return=p,w):(w=Qs(m.type,m.key,m.props,null,p.mode,w),w.ref=ai(p,f,m),w.return=p,w)}function u(p,f,m,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Ul(m,p.mode,w),f.return=p,f):(f=i(f,m.children||[]),f.return=p,f)}function h(p,f,m,w,I){return f===null||f.tag!==7?(f=Wn(m,p.mode,w,I),f.return=p,f):(f=i(f,m),f.return=p,f)}function d(p,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Hl(""+f,p.mode,m),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case _s:return m=Qs(f.type,f.key,f.props,null,p.mode,m),m.ref=ai(p,null,f),m.return=p,m;case ur:return f=Ul(f,p.mode,m),f.return=p,f;case on:var w=f._init;return d(p,w(f._payload),m)}if(gi(f)||ri(f))return f=Wn(f,p.mode,m,null),f.return=p,f;Ps(p,f)}return null}function c(p,f,m,w){var I=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:l(p,f,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:return m.key===I?a(p,f,m,w):null;case ur:return m.key===I?u(p,f,m,w):null;case on:return I=m._init,c(p,f,I(m._payload),w)}if(gi(m)||ri(m))return I!==null?null:h(p,f,m,w,null);Ps(p,m)}return null}function v(p,f,m,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(m)||null,l(f,p,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _s:return p=p.get(w.key===null?m:w.key)||null,a(f,p,w,I);case ur:return p=p.get(w.key===null?m:w.key)||null,u(f,p,w,I);case on:var k=w._init;return v(p,f,m,k(w._payload),I)}if(gi(w)||ri(w))return p=p.get(m)||null,h(f,p,w,I,null);Ps(f,w)}return null}function g(p,f,m,w){for(var I=null,k=null,_=f,x=f=0,M=null;_!==null&&x<m.length;x++){_.index>x?(M=_,_=null):M=_.sibling;var T=c(p,_,m[x],w);if(T===null){_===null&&(_=M);break}t&&_&&T.alternate===null&&e(p,_),f=s(T,f,x),k===null?I=T:k.sibling=T,k=T,_=M}if(x===m.length)return n(p,_),ae&&Dn(p,x),I;if(_===null){for(;x<m.length;x++)_=d(p,m[x],w),_!==null&&(f=s(_,f,x),k===null?I=_:k.sibling=_,k=_);return ae&&Dn(p,x),I}for(_=r(p,_);x<m.length;x++)M=v(_,p,x,m[x],w),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?x:M.key),f=s(M,f,x),k===null?I=M:k.sibling=M,k=M);return t&&_.forEach(function(Y){return e(p,Y)}),ae&&Dn(p,x),I}function L(p,f,m,w){var I=ri(m);if(typeof I!="function")throw Error(C(150));if(m=I.call(m),m==null)throw Error(C(151));for(var k=I=null,_=f,x=f=0,M=null,T=m.next();_!==null&&!T.done;x++,T=m.next()){_.index>x?(M=_,_=null):M=_.sibling;var Y=c(p,_,T.value,w);if(Y===null){_===null&&(_=M);break}t&&_&&Y.alternate===null&&e(p,_),f=s(Y,f,x),k===null?I=Y:k.sibling=Y,k=Y,_=M}if(T.done)return n(p,_),ae&&Dn(p,x),I;if(_===null){for(;!T.done;x++,T=m.next())T=d(p,T.value,w),T!==null&&(f=s(T,f,x),k===null?I=T:k.sibling=T,k=T);return ae&&Dn(p,x),I}for(_=r(p,_);!T.done;x++,T=m.next())T=v(_,p,x,T.value,w),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?x:T.key),f=s(T,f,x),k===null?I=T:k.sibling=T,k=T);return t&&_.forEach(function($){return e(p,$)}),ae&&Dn(p,x),I}function A(p,f,m,w){if(typeof m=="object"&&m!==null&&m.type===cr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:e:{for(var I=m.key,k=f;k!==null;){if(k.key===I){if(I=m.type,I===cr){if(k.tag===7){n(p,k.sibling),f=i(k,m.props.children),f.return=p,p=f;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===on&&Fd(I)===k.type){n(p,k.sibling),f=i(k,m.props),f.ref=ai(p,k,m),f.return=p,p=f;break e}n(p,k);break}else e(p,k);k=k.sibling}m.type===cr?(f=Wn(m.props.children,p.mode,w,m.key),f.return=p,p=f):(w=Qs(m.type,m.key,m.props,null,p.mode,w),w.ref=ai(p,f,m),w.return=p,p=w)}return o(p);case ur:e:{for(k=m.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(p,f.sibling),f=i(f,m.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else e(p,f);f=f.sibling}f=Ul(m,p.mode,w),f.return=p,p=f}return o(p);case on:return k=m._init,A(p,f,k(m._payload),w)}if(gi(m))return g(p,f,m,w);if(ri(m))return L(p,f,m,w);Ps(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(p,f.sibling),f=i(f,m),f.return=p,p=f):(n(p,f),f=Hl(m,p.mode,w),f.return=p,p=f),o(p)):n(p,f)}return A}var Or=vp(!0),_p=vp(!1),ao=Nn(null),uo=null,vr=null,Fu=null;function ju(){Fu=vr=uo=null}function Hu(t){var e=ao.current;le(ao),t._currentValue=e}function Ra(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kr(t,e){uo=t,Fu=vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ke=!0),t.firstContext=null)}function mt(t){var e=t._currentValue;if(Fu!==t)if(t={context:t,memoizedValue:e,next:null},vr===null){if(uo===null)throw Error(C(308));vr=t,uo.dependencies={lanes:0,firstContext:t}}else vr=vr.next=t;return e}var Fn=null;function Uu(t){Fn===null?Fn=[t]:Fn.push(t)}function Lp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Uu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xt(t,r)}function Xt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ln=!1;function Wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xt(t,n)}return i=r.interleaved,i===null?(e.next=e,Uu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xt(t,n)}function Ws(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iu(t,n)}}function jd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,r){var i=t.updateQueue;ln=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var c=l.lane,v=l.eventTime;if((r&c)===c){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,L=l;switch(c=e,v=n,L.tag){case 1:if(g=L.payload,typeof g=="function"){d=g.call(v,d,c);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=L.payload,c=typeof g=="function"?g.call(v,d,c):g,c==null)break e;d=he({},d,c);break e;case 2:ln=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else v={eventTime:v,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,a=d):h=h.next=v,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(1);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gn|=o,t.lanes=o,t.memoizedState=d}}function Hd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var cs={},Mt=Nn(cs),$i=Nn(cs),Vi=Nn(cs);function jn(t){if(t===cs)throw Error(C(174));return t}function Bu(t,e){switch(ie(Vi,e),ie($i,t),ie(Mt,cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:da(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=da(e,t)}le(Mt),ie(Mt,e)}function Fr(){le(Mt),le($i),le(Vi)}function Cp(t){jn(Vi.current);var e=jn(Mt.current),n=da(e,t.type);e!==n&&(ie($i,t),ie(Mt,n))}function $u(t){$i.current===t&&(le(Mt),le($i))}var ce=Nn(0);function ho(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Al=[];function Vu(){for(var t=0;t<Al.length;t++)Al[t]._workInProgressVersionPrimary=null;Al.length=0}var Bs=tn.ReactCurrentDispatcher,zl=tn.ReactCurrentBatchConfig,qn=0,de=null,Ce=null,Se=null,fo=!1,Ei=!1,qi=0,$1=0;function Fe(){throw Error(C(321))}function qu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tt(t[n],e[n]))return!1;return!0}function Gu(t,e,n,r,i,s){if(qn=s,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bs.current=t===null||t.memoizedState===null?Q1:Y1,t=n(r,i),Ei){s=0;do{if(Ei=!1,qi=0,25<=s)throw Error(C(301));s+=1,Se=Ce=null,e.updateQueue=null,Bs.current=K1,t=n(r,i)}while(Ei)}if(Bs.current=po,e=Ce!==null&&Ce.next!==null,qn=0,Se=Ce=de=null,fo=!1,e)throw Error(C(300));return t}function Qu(){var t=qi!==0;return qi=0,t}function Dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?de.memoizedState=Se=t:Se=Se.next=t,Se}function gt(){if(Ce===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Se===null?de.memoizedState:Se.next;if(e!==null)Se=e,Ce=t;else{if(t===null)throw Error(C(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Se===null?de.memoizedState=Se=t:Se=Se.next=t}return Se}function Gi(t,e){return typeof e=="function"?e(t):e}function Ml(t){var e=gt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=Ce,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((qn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,de.lanes|=h,Gn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Tt(r,e.memoizedState)||(Ke=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,de.lanes|=s,Gn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ol(t){var e=gt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Tt(s,e.memoizedState)||(Ke=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xp(){}function Ep(t,e){var n=de,r=gt(),i=e(),s=!Tt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ke=!0),r=r.queue,Yu(Ip.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Qi(9,kp.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(C(349));qn&30||Sp(n,e,i)}return i}function Sp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kp(t,e,n,r){e.value=n,e.getSnapshot=r,Tp(e)&&Np(t)}function Ip(t,e,n){return n(function(){Tp(e)&&Np(t)})}function Tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tt(t,n)}catch{return!0}}function Np(t){var e=Xt(t,1);e!==null&&kt(e,t,1,-1)}function Ud(t){var e=Dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},e.queue=t,t=t.dispatch=G1.bind(null,de,t),[e.memoizedState,t]}function Qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Pp(){return gt().memoizedState}function $s(t,e,n,r){var i=Dt();de.flags|=t,i.memoizedState=Qi(1|e,n,void 0,r===void 0?null:r)}function $o(t,e,n,r){var i=gt();r=r===void 0?null:r;var s=void 0;if(Ce!==null){var o=Ce.memoizedState;if(s=o.destroy,r!==null&&qu(r,o.deps)){i.memoizedState=Qi(e,n,s,r);return}}de.flags|=t,i.memoizedState=Qi(1|e,n,s,r)}function Wd(t,e){return $s(8390656,8,t,e)}function Yu(t,e){return $o(2048,8,t,e)}function Rp(t,e){return $o(4,2,t,e)}function bp(t,e){return $o(4,4,t,e)}function Dp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ap(t,e,n){return n=n!=null?n.concat([t]):null,$o(4,4,Dp.bind(null,e,t),n)}function Ku(){}function zp(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mp(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Op(t,e,n){return qn&21?(Tt(n,e)||(n=Wf(),de.lanes|=n,Gn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ke=!0),t.memoizedState=n)}function V1(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=zl.transition;zl.transition={};try{t(!1),e()}finally{Z=n,zl.transition=r}}function Fp(){return gt().memoizedState}function q1(t,e,n){var r=_n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jp(t))Hp(e,n);else if(n=Lp(t,e,n,r),n!==null){var i=$e();kt(n,t,r,i),Up(n,e,r)}}function G1(t,e,n){var r=_n(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jp(t))Hp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Tt(l,o)){var a=e.interleaved;a===null?(i.next=i,Uu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Lp(t,e,i,r),n!==null&&(i=$e(),kt(n,t,r,i),Up(n,e,r))}}function jp(t){var e=t.alternate;return t===de||e!==null&&e===de}function Hp(t,e){Ei=fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Up(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iu(t,n)}}var po={readContext:mt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},Q1={readContext:mt,useCallback:function(t,e){return Dt().memoizedState=[t,e===void 0?null:e],t},useContext:mt,useEffect:Wd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$s(4194308,4,Dp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $s(4194308,4,t,e)},useInsertionEffect:function(t,e){return $s(4,2,t,e)},useMemo:function(t,e){var n=Dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=q1.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=Dt();return t={current:t},e.memoizedState=t},useState:Ud,useDebugValue:Ku,useDeferredValue:function(t){return Dt().memoizedState=t},useTransition:function(){var t=Ud(!1),e=t[0];return t=V1.bind(null,t[1]),Dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,i=Dt();if(ae){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),Ne===null)throw Error(C(349));qn&30||Sp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Wd(Ip.bind(null,r,s,t),[t]),r.flags|=2048,Qi(9,kp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dt(),e=Ne.identifierPrefix;if(ae){var n=Vt,r=$t;n=(r&~(1<<32-St(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y1={readContext:mt,useCallback:zp,useContext:mt,useEffect:Yu,useImperativeHandle:Ap,useInsertionEffect:Rp,useLayoutEffect:bp,useMemo:Mp,useReducer:Ml,useRef:Pp,useState:function(){return Ml(Gi)},useDebugValue:Ku,useDeferredValue:function(t){var e=gt();return Op(e,Ce.memoizedState,t)},useTransition:function(){var t=Ml(Gi)[0],e=gt().memoizedState;return[t,e]},useMutableSource:xp,useSyncExternalStore:Ep,useId:Fp,unstable_isNewReconciler:!1},K1={readContext:mt,useCallback:zp,useContext:mt,useEffect:Yu,useImperativeHandle:Ap,useInsertionEffect:Rp,useLayoutEffect:bp,useMemo:Mp,useReducer:Ol,useRef:Pp,useState:function(){return Ol(Gi)},useDebugValue:Ku,useDeferredValue:function(t){var e=gt();return Ce===null?e.memoizedState=t:Op(e,Ce.memoizedState,t)},useTransition:function(){var t=Ol(Gi)[0],e=gt().memoizedState;return[t,e]},useMutableSource:xp,useSyncExternalStore:Ep,useId:Fp,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ba(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return(t=t._reactInternals)?er(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$e(),i=_n(t),s=Gt(r,i);s.payload=e,n!=null&&(s.callback=n),e=yn(t,s,i),e!==null&&(kt(e,t,i,r),Ws(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$e(),i=_n(t),s=Gt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yn(t,s,i),e!==null&&(kt(e,t,i,r),Ws(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$e(),r=_n(t),i=Gt(n,r);i.tag=2,e!=null&&(i.callback=e),e=yn(t,i,r),e!==null&&(kt(e,t,r,n),Ws(e,t,r))}};function Bd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hi(n,r)||!Hi(i,s):!0}function Wp(t,e,n){var r=!1,i=Sn,s=e.contextType;return typeof s=="object"&&s!==null?s=mt(s):(i=et(e)?$n:Ue.current,r=e.contextTypes,s=(r=r!=null)?zr(t,i):Sn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $d(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Da(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mt(s):(s=et(e)?$n:Ue.current,i.context=zr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ba(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jr(t,e){try{var n="",r=e;do n+=Ey(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Aa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X1=typeof WeakMap=="function"?WeakMap:Map;function Bp(t,e,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){go||(go=!0,$a=r),Aa(t,e)},n}function $p(t,e,n){n=Gt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Aa(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Aa(t,e),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new X1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=dv.bind(null,t,e,n),e.then(t,t))}function qd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gt(-1,1),e.tag=2,yn(n,e,1))),n.lanes|=1),t)}var Z1=tn.ReactCurrentOwner,Ke=!1;function Be(t,e,n,r){e.child=t===null?_p(e,null,n,r):Or(e,t.child,n,r)}function Qd(t,e,n,r,i){n=n.render;var s=e.ref;return kr(e,i),r=Gu(t,e,n,r,s,i),n=Qu(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zt(t,e,i)):(ae&&n&&zu(e),e.flags|=1,Be(t,e,r,i),e.child)}function Yd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ic(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vp(t,e,s,r,i)):(t=Qs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hi,n(o,r)&&t.ref===e.ref)return Zt(t,e,i)}return e.flags|=1,t=Ln(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Hi(s,r)&&t.ref===e.ref)if(Ke=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ke=!0);else return e.lanes=t.lanes,Zt(t,e,i)}return za(t,e,n,r,i)}function qp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Lr,rt),rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(Lr,rt),rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ie(Lr,rt),rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ie(Lr,rt),rt|=r;return Be(t,e,i,n),e.child}function Gp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function za(t,e,n,r,i){var s=et(n)?$n:Ue.current;return s=zr(e,s),kr(e,i),n=Gu(t,e,n,r,s,i),r=Qu(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zt(t,e,i)):(ae&&r&&zu(e),e.flags|=1,Be(t,e,n,i),e.child)}function Kd(t,e,n,r,i){if(et(n)){var s=!0;so(e)}else s=!1;if(kr(e,i),e.stateNode===null)Vs(t,e),Wp(e,n,r),Da(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=et(n)?$n:Ue.current,u=zr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&$d(e,o,r,u),ln=!1;var c=e.memoizedState;o.state=c,co(e,r,o,i),a=e.memoizedState,l!==r||c!==a||Je.current||ln?(typeof h=="function"&&(ba(e,n,h,r),a=e.memoizedState),(l=ln||Bd(e,n,l,r,c,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Lt(e.type,l),o.props=u,d=e.pendingProps,c=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=mt(a):(a=et(n)?$n:Ue.current,a=zr(e,a));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||c!==a)&&$d(e,o,r,a),ln=!1,c=e.memoizedState,o.state=c,co(e,r,o,i);var g=e.memoizedState;l!==d||c!==g||Je.current||ln?(typeof v=="function"&&(ba(e,n,v,r),g=e.memoizedState),(u=ln||Bd(e,n,u,r,c,g,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return Ma(t,e,n,r,s,i)}function Ma(t,e,n,r,i,s){Gp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zd(e,n,!1),Zt(t,e,s);r=e.stateNode,Z1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Or(e,t.child,null,s),e.child=Or(e,null,l,s)):Be(t,e,l,s),e.memoizedState=r.state,i&&zd(e,n,!0),e.child}function Qp(t){var e=t.stateNode;e.pendingContext?Ad(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ad(t,e.context,!1),Bu(t,e.containerInfo)}function Xd(t,e,n,r,i){return Mr(),Ou(i),e.flags|=256,Be(t,e,n,r),e.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yp(t,e,n){var r=e.pendingProps,i=ce.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ie(ce,i&1),t===null)return Pa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qo(o,r,0,null),t=Wn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fa(n),e.memoizedState=Oa,t):Xu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return J1(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ln(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ln(l,s):(s=Wn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Fa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Oa,r}return s=t.child,t=s.sibling,r=Ln(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xu(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,n,r){return r!==null&&Ou(r),Or(e,t.child,null,n),t=Xu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Fl(Error(C(422))),Rs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qo({mode:"visible",children:r.children},i,0,null),s=Wn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Or(e,t.child,null,o),e.child.memoizedState=Fa(o),e.memoizedState=Oa,s);if(!(e.mode&1))return Rs(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(C(419)),r=Fl(s,r,void 0),Rs(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ke||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xt(t,i),kt(r,t,i,-1))}return rc(),r=Fl(Error(C(421))),Rs(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,it=gn(i.nextSibling),st=e,ae=!0,Ct=null,t!==null&&(ct[dt++]=$t,ct[dt++]=Vt,ct[dt++]=Vn,$t=t.id,Vt=t.overflow,Vn=e),e=Xu(e,r.children),e.flags|=4096,e)}function Zd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ra(t.return,e,n)}function jl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Kp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Be(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zd(t,n,e);else if(t.tag===19)Zd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ho(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ho(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jl(e,!0,n,null,s);break;case"together":jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ev(t,e,n){switch(e.tag){case 3:Qp(e),Mr();break;case 5:Cp(e);break;case 1:et(e.type)&&so(e);break;case 4:Bu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ie(ao,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?Yp(t,e,n):(ie(ce,ce.current&1),t=Zt(t,e,n),t!==null?t.sibling:null);ie(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,qp(t,e,n)}return Zt(t,e,n)}var Xp,ja,Zp,Jp;Xp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ja=function(){};Zp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,jn(Mt.current);var s=null;switch(n){case"input":i=la(t,i),r=la(t,r),s=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),s=[];break;case"textarea":i=ca(t,i),r=ca(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ro)}ha(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Di.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Di.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Jp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ui(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tv(t,e,n){var r=e.pendingProps;switch(Mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return et(e.type)&&io(),je(e),null;case 3:return r=e.stateNode,Fr(),le(Je),le(Ue),Vu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ns(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ct!==null&&(Ga(Ct),Ct=null))),ja(t,e),je(e),null;case 5:$u(e);var i=jn(Vi.current);if(n=e.type,t!==null&&e.stateNode!=null)Zp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return je(e),null}if(t=jn(Mt.current),Ns(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[At]=e,r[Bi]=s,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(i=0;i<vi.length;i++)oe(vi[i],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":ld(r,s),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oe("invalid",r);break;case"textarea":ud(r,s),oe("invalid",r)}ha(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),i=["children",""+l]):Di.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Ls(r),ad(r,s,!0);break;case"textarea":Ls(r),cd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ro)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=If(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[At]=e,t[Bi]=r,Xp(t,e,!1,!1),e.stateNode=t;e:{switch(o=fa(n,r),n){case"dialog":oe("cancel",t),oe("close",t),i=r;break;case"iframe":case"object":case"embed":oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<vi.length;i++)oe(vi[i],t);i=r;break;case"source":oe("error",t),i=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),i=r;break;case"details":oe("toggle",t),i=r;break;case"input":ld(t,r),i=la(t,r),oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),oe("invalid",t);break;case"textarea":ud(t,r),i=ca(t,r),oe("invalid",t);break;default:i=r}ha(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Pf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Tf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ai(t,a):typeof a=="number"&&Ai(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Di.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",t):a!=null&&wu(t,s,a,o))}switch(n){case"input":Ls(t),ad(t,r,!1);break;case"textarea":Ls(t),cd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+En(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)Jp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=jn(Vi.current),jn(Mt.current),Ns(e)){if(r=e.stateNode,n=e.memoizedProps,r[At]=e,(s=r.nodeValue!==n)&&(t=st,t!==null))switch(t.tag){case 3:Ts(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ts(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=e,e.stateNode=r}return je(e),null;case 13:if(le(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&it!==null&&e.mode&1&&!(e.flags&128))yp(),Mr(),e.flags|=98560,s=!1;else if(s=Ns(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[At]=e}else Mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),s=!1}else Ct!==null&&(Ga(Ct),Ct=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?xe===0&&(xe=3):rc())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Fr(),ja(t,e),t===null&&Ui(e.stateNode.containerInfo),je(e),null;case 10:return Hu(e.type._context),je(e),null;case 17:return et(e.type)&&io(),je(e),null;case 19:if(le(ce),s=e.memoizedState,s===null)return je(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ui(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ho(t),o!==null){for(e.flags|=128,ui(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(ce,ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&ve()>Hr&&(e.flags|=128,r=!0,ui(s,!1),e.lanes=4194304)}else{if(!r)if(t=ho(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ui(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ae)return je(e),null}else 2*ve()-s.renderingStartTime>Hr&&n!==1073741824&&(e.flags|=128,r=!0,ui(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,n=ce.current,ie(ce,r?n&1|2:n&1),e):(je(e),null);case 22:case 23:return nc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rt&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function nv(t,e){switch(Mu(e),e.tag){case 1:return et(e.type)&&io(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),le(Je),le(Ue),Vu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $u(e),null;case 13:if(le(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ce),null;case 4:return Fr(),null;case 10:return Hu(e.type._context),null;case 22:case 23:return nc(),null;case 24:return null;default:return null}}var bs=!1,He=!1,rv=typeof WeakSet=="function"?WeakSet:Set,R=null;function _r(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function Ha(t,e,n){try{n()}catch(r){pe(t,e,r)}}var Jd=!1;function iv(t,e){if(xa=eo,t=ip(),Au(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,c=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)c=d,d=v;for(;;){if(d===t)break t;if(c===n&&++u===i&&(l=o),c===s&&++h===r&&(a=o),(v=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ea={focusedElem:t,selectionRange:n},eo=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var L=g.memoizedProps,A=g.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?L:Lt(e.type,L),A);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(w){pe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return g=Jd,Jd=!1,g}function Si(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ha(e,n,s)}i=i.next}while(i!==r)}}function qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ua(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function em(t){var e=t.alternate;e!==null&&(t.alternate=null,em(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[At],delete e[Bi],delete e[Ia],delete e[H1],delete e[U1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tm(t){return t.tag===5||t.tag===3||t.tag===4}function eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ro));else if(r!==4&&(t=t.child,t!==null))for(Wa(t,e,n),t=t.sibling;t!==null;)Wa(t,e,n),t=t.sibling}function Ba(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ba(t,e,n),t=t.sibling;t!==null;)Ba(t,e,n),t=t.sibling}var Pe=null,wt=!1;function sn(t,e,n){for(n=n.child;n!==null;)nm(t,e,n),n=n.sibling}function nm(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Fo,n)}catch{}switch(n.tag){case 5:He||_r(n,e);case 6:var r=Pe,i=wt;Pe=null,sn(t,e,n),Pe=r,wt=i,Pe!==null&&(wt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(wt?(t=Pe,n=n.stateNode,t.nodeType===8?bl(t.parentNode,n):t.nodeType===1&&bl(t,n),Fi(t)):bl(Pe,n.stateNode));break;case 4:r=Pe,i=wt,Pe=n.stateNode.containerInfo,wt=!0,sn(t,e,n),Pe=r,wt=i;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ha(n,e,o),i=i.next}while(i!==r)}sn(t,e,n);break;case 1:if(!He&&(_r(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){pe(n,e,l)}sn(t,e,n);break;case 21:sn(t,e,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,sn(t,e,n),He=r):sn(t,e,n);break;default:sn(t,e,n)}}function th(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rv),e.forEach(function(r){var i=fv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,wt=!1;break e;case 3:Pe=l.stateNode.containerInfo,wt=!0;break e;case 4:Pe=l.stateNode.containerInfo,wt=!0;break e}l=l.return}if(Pe===null)throw Error(C(160));nm(s,o,i),Pe=null,wt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rm(e,t),e=e.sibling}function rm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),bt(t),r&4){try{Si(3,t,t.return),qo(3,t)}catch(L){pe(t,t.return,L)}try{Si(5,t,t.return)}catch(L){pe(t,t.return,L)}}break;case 1:_t(e,t),bt(t),r&512&&n!==null&&_r(n,n.return);break;case 5:if(_t(e,t),bt(t),r&512&&n!==null&&_r(n,n.return),t.flags&32){var i=t.stateNode;try{Ai(i,"")}catch(L){pe(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Sf(i,s),fa(l,o);var u=fa(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Pf(i,d):h==="dangerouslySetInnerHTML"?Tf(i,d):h==="children"?Ai(i,d):wu(i,h,d,u)}switch(l){case"input":aa(i,s);break;case"textarea":kf(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Cr(i,!!s.multiple,v,!1):c!==!!s.multiple&&(s.defaultValue!=null?Cr(i,!!s.multiple,s.defaultValue,!0):Cr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bi]=s}catch(L){pe(t,t.return,L)}}break;case 6:if(_t(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(C(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){pe(t,t.return,L)}}break;case 3:if(_t(e,t),bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fi(e.containerInfo)}catch(L){pe(t,t.return,L)}break;case 4:_t(e,t),bt(t);break;case 13:_t(e,t),bt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ec=ve())),r&4&&th(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(He=(u=He)||h,_t(e,t),He=u):_t(e,t),bt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(d=R=h;R!==null;){switch(c=R,v=c.child,c.tag){case 0:case 11:case 14:case 15:Si(4,c,c.return);break;case 1:_r(c,c.return);var g=c.stateNode;if(typeof g.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(L){pe(r,n,L)}}break;case 5:_r(c,c.return);break;case 22:if(c.memoizedState!==null){rh(d);continue}}v!==null?(v.return=c,R=v):rh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Nf("display",o))}catch(L){pe(t,t.return,L)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(L){pe(t,t.return,L)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_t(e,t),bt(t),r&4&&th(t);break;case 21:break;default:_t(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tm(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ai(i,""),r.flags&=-33);var s=eh(t);Ba(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=eh(t);Wa(t,l,o);break;default:throw Error(C(161))}}catch(a){pe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sv(t,e,n){R=t,im(t)}function im(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bs;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||He;l=bs;var u=He;if(bs=o,(He=a)&&!u)for(R=i;R!==null;)o=R,a=o.child,o.tag===22&&o.memoizedState!==null?ih(i):a!==null?(a.return=o,R=a):ih(i);for(;s!==null;)R=s,im(s),s=s.sibling;R=i,bs=l,He=u}nh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):nh(t)}}function nh(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:He||qo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!He)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Hd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Fi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}He||e.flags&512&&Ua(e)}catch(c){pe(e,e.return,c)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function rh(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function ih(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qo(4,e)}catch(a){pe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){pe(e,i,a)}}var s=e.return;try{Ua(e)}catch(a){pe(e,s,a)}break;case 5:var o=e.return;try{Ua(e)}catch(a){pe(e,o,a)}}}catch(a){pe(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var ov=Math.ceil,mo=tn.ReactCurrentDispatcher,Zu=tn.ReactCurrentOwner,pt=tn.ReactCurrentBatchConfig,Q=0,Ne=null,Le=null,be=0,rt=0,Lr=Nn(0),xe=0,Yi=null,Gn=0,Go=0,Ju=0,ki=null,Ye=null,ec=0,Hr=1/0,Wt=null,go=!1,$a=null,vn=null,Ds=!1,dn=null,yo=0,Ii=0,Va=null,qs=-1,Gs=0;function $e(){return Q&6?ve():qs!==-1?qs:qs=ve()}function _n(t){return t.mode&1?Q&2&&be!==0?be&-be:B1.transition!==null?(Gs===0&&(Gs=Wf()),Gs):(t=Z,t!==0||(t=window.event,t=t===void 0?16:Yf(t.type)),t):1}function kt(t,e,n,r){if(50<Ii)throw Ii=0,Va=null,Error(C(185));ls(t,n,r),(!(Q&2)||t!==Ne)&&(t===Ne&&(!(Q&2)&&(Go|=n),xe===4&&un(t,be)),tt(t,r),n===1&&Q===0&&!(e.mode&1)&&(Hr=ve()+500,Bo&&Pn()))}function tt(t,e){var n=t.callbackNode;By(t,e);var r=Js(t,t===Ne?be:0);if(r===0)n!==null&&fd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fd(n),e===1)t.tag===0?W1(sh.bind(null,t)):pp(sh.bind(null,t)),F1(function(){!(Q&6)&&Pn()}),n=null;else{switch(Bf(r)){case 1:n=ku;break;case 4:n=Hf;break;case 16:n=Zs;break;case 536870912:n=Uf;break;default:n=Zs}n=hm(n,sm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sm(t,e){if(qs=-1,Gs=0,Q&6)throw Error(C(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var r=Js(t,t===Ne?be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vo(t,r);else{e=r;var i=Q;Q|=2;var s=lm();(Ne!==t||be!==e)&&(Wt=null,Hr=ve()+500,Un(t,e));do try{uv();break}catch(l){om(t,l)}while(1);ju(),mo.current=s,Q=i,Le!==null?e=0:(Ne=null,be=0,e=xe)}if(e!==0){if(e===2&&(i=va(t),i!==0&&(r=i,e=qa(t,i))),e===1)throw n=Yi,Un(t,0),un(t,r),tt(t,ve()),n;if(e===6)un(t,r);else{if(i=t.current.alternate,!(r&30)&&!lv(i)&&(e=vo(t,r),e===2&&(s=va(t),s!==0&&(r=s,e=qa(t,s))),e===1))throw n=Yi,Un(t,0),un(t,r),tt(t,ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:An(t,Ye,Wt);break;case 3:if(un(t,r),(r&130023424)===r&&(e=ec+500-ve(),10<e)){if(Js(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$e(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ka(An.bind(null,t,Ye,Wt),e);break}An(t,Ye,Wt);break;case 4:if(un(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-St(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ov(r/1960))-r,10<r){t.timeoutHandle=ka(An.bind(null,t,Ye,Wt),r);break}An(t,Ye,Wt);break;case 5:An(t,Ye,Wt);break;default:throw Error(C(329))}}}return tt(t,ve()),t.callbackNode===n?sm.bind(null,t):null}function qa(t,e){var n=ki;return t.current.memoizedState.isDehydrated&&(Un(t,e).flags|=256),t=vo(t,e),t!==2&&(e=Ye,Ye=n,e!==null&&Ga(e)),t}function Ga(t){Ye===null?Ye=t:Ye.push.apply(Ye,t)}function lv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Tt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function un(t,e){for(e&=~Ju,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-St(e),r=1<<n;t[n]=-1,e&=~r}}function sh(t){if(Q&6)throw Error(C(327));Ir();var e=Js(t,0);if(!(e&1))return tt(t,ve()),null;var n=vo(t,e);if(t.tag!==0&&n===2){var r=va(t);r!==0&&(e=r,n=qa(t,r))}if(n===1)throw n=Yi,Un(t,0),un(t,e),tt(t,ve()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,An(t,Ye,Wt),tt(t,ve()),null}function tc(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(Hr=ve()+500,Bo&&Pn())}}function Qn(t){dn!==null&&dn.tag===0&&!(Q&6)&&Ir();var e=Q;Q|=1;var n=pt.transition,r=Z;try{if(pt.transition=null,Z=1,t)return t()}finally{Z=r,pt.transition=n,Q=e,!(Q&6)&&Pn()}}function nc(){rt=Lr.current,le(Lr)}function Un(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,O1(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(Mu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&io();break;case 3:Fr(),le(Je),le(Ue),Vu();break;case 5:$u(r);break;case 4:Fr();break;case 13:le(ce);break;case 19:le(ce);break;case 10:Hu(r.type._context);break;case 22:case 23:nc()}n=n.return}if(Ne=t,Le=t=Ln(t.current,null),be=rt=e,xe=0,Yi=null,Ju=Go=Gn=0,Ye=ki=null,Fn!==null){for(e=0;e<Fn.length;e++)if(n=Fn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fn=null}return t}function om(t,e){do{var n=Le;try{if(ju(),Bs.current=po,fo){for(var r=de.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fo=!1}if(qn=0,Se=Ce=de=null,Ei=!1,qi=0,Zu.current=null,n===null||n.return===null){xe=1,Yi=e,Le=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=be,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=qd(o);if(v!==null){v.flags&=-257,Gd(v,o,l,s,e),v.mode&1&&Vd(s,u,e),e=v,a=u;var g=e.updateQueue;if(g===null){var L=new Set;L.add(a),e.updateQueue=L}else g.add(a);break e}else{if(!(e&1)){Vd(s,u,e),rc();break e}a=Error(C(426))}}else if(ae&&l.mode&1){var A=qd(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Gd(A,o,l,s,e),Ou(jr(a,l));break e}}s=a=jr(a,l),xe!==4&&(xe=2),ki===null?ki=[s]:ki.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Bp(s,a,e);jd(s,p);break e;case 1:l=a;var f=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=$p(s,l,e);jd(s,w);break e}}s=s.return}while(s!==null)}um(n)}catch(I){e=I,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(1)}function lm(){var t=mo.current;return mo.current=po,t===null?po:t}function rc(){(xe===0||xe===3||xe===2)&&(xe=4),Ne===null||!(Gn&268435455)&&!(Go&268435455)||un(Ne,be)}function vo(t,e){var n=Q;Q|=2;var r=lm();(Ne!==t||be!==e)&&(Wt=null,Un(t,e));do try{av();break}catch(i){om(t,i)}while(1);if(ju(),Q=n,mo.current=r,Le!==null)throw Error(C(261));return Ne=null,be=0,xe}function av(){for(;Le!==null;)am(Le)}function uv(){for(;Le!==null&&!Ay();)am(Le)}function am(t){var e=dm(t.alternate,t,rt);t.memoizedProps=t.pendingProps,e===null?um(t):Le=e,Zu.current=null}function um(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nv(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Le=null;return}}else if(n=tv(n,e,rt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);xe===0&&(xe=5)}function An(t,e,n){var r=Z,i=pt.transition;try{pt.transition=null,Z=1,cv(t,e,n,r)}finally{pt.transition=i,Z=r}return null}function cv(t,e,n,r){do Ir();while(dn!==null);if(Q&6)throw Error(C(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($y(t,s),t===Ne&&(Le=Ne=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ds||(Ds=!0,hm(Zs,function(){return Ir(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pt.transition,pt.transition=null;var o=Z;Z=1;var l=Q;Q|=4,Zu.current=null,iv(t,n),rm(n,t),P1(Ea),eo=!!xa,Ea=xa=null,t.current=n,sv(n),zy(),Q=l,Z=o,pt.transition=s}else t.current=n;if(Ds&&(Ds=!1,dn=t,yo=i),s=t.pendingLanes,s===0&&(vn=null),Fy(n.stateNode),tt(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(go)throw go=!1,t=$a,$a=null,t;return yo&1&&t.tag!==0&&Ir(),s=t.pendingLanes,s&1?t===Va?Ii++:(Ii=0,Va=t):Ii=0,Pn(),null}function Ir(){if(dn!==null){var t=Bf(yo),e=pt.transition,n=Z;try{if(pt.transition=null,Z=16>t?16:t,dn===null)var r=!1;else{if(t=dn,dn=null,yo=0,Q&6)throw Error(C(331));var i=Q;for(Q|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Si(8,h,s)}var d=h.child;if(d!==null)d.return=h,R=d;else for(;R!==null;){h=R;var c=h.sibling,v=h.return;if(em(h),h===u){R=null;break}if(c!==null){c.return=v,R=c;break}R=v}}}var g=s.alternate;if(g!==null){var L=g.child;if(L!==null){g.child=null;do{var A=L.sibling;L.sibling=null,L=A}while(L!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Si(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,R=p;break e}R=s.return}}var f=t.current;for(R=f;R!==null;){o=R;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,R=m;else e:for(o=f;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qo(9,l)}}catch(I){pe(l,l.return,I)}if(l===o){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(Q=i,Pn(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Fo,t)}catch{}r=!0}return r}finally{Z=n,pt.transition=e}}return!1}function oh(t,e,n){e=jr(n,e),e=Bp(t,e,1),t=yn(t,e,1),e=$e(),t!==null&&(ls(t,1,e),tt(t,e))}function pe(t,e,n){if(t.tag===3)oh(t,t,n);else for(;e!==null;){if(e.tag===3){oh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){t=jr(n,t),t=$p(e,t,1),e=yn(e,t,1),t=$e(),e!==null&&(ls(e,1,t),tt(e,t));break}}e=e.return}}function dv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$e(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(be&n)===n&&(xe===4||xe===3&&(be&130023424)===be&&500>ve()-ec?Un(t,0):Ju|=n),tt(t,e)}function cm(t,e){e===0&&(t.mode&1?(e=xs,xs<<=1,!(xs&130023424)&&(xs=4194304)):e=1);var n=$e();t=Xt(t,e),t!==null&&(ls(t,e,n),tt(t,n))}function hv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cm(t,n)}function fv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),cm(t,n)}var dm;dm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Ke=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ke=!1,ev(t,e,n);Ke=!!(t.flags&131072)}else Ke=!1,ae&&e.flags&1048576&&mp(e,lo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vs(t,e),t=e.pendingProps;var i=zr(e,Ue.current);kr(e,n),i=Gu(null,e,r,t,i,n);var s=Qu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(s=!0,so(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wu(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Da(e,r,t,n),e=Ma(null,e,r,!0,s,n)):(e.tag=0,ae&&s&&zu(e),Be(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mv(r),t=Lt(r,t),i){case 0:e=za(null,e,r,t,n);break e;case 1:e=Kd(null,e,r,t,n);break e;case 11:e=Qd(null,e,r,t,n);break e;case 14:e=Yd(null,e,r,Lt(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),za(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Kd(t,e,r,i,n);case 3:e:{if(Qp(e),t===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wp(t,e),co(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=jr(Error(C(423)),e),e=Xd(t,e,r,n,i);break e}else if(r!==i){i=jr(Error(C(424)),e),e=Xd(t,e,r,n,i);break e}else for(it=gn(e.stateNode.containerInfo.firstChild),st=e,ae=!0,Ct=null,n=_p(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===i){e=Zt(t,e,n);break e}Be(t,e,r,n)}e=e.child}return e;case 5:return Cp(e),t===null&&Pa(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sa(r,i)?o=null:s!==null&&Sa(r,s)&&(e.flags|=32),Gp(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&Pa(e),null;case 13:return Yp(t,e,n);case 4:return Bu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Or(e,null,r,n):Be(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Qd(t,e,r,i,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ie(ao,r._currentValue),r._currentValue=o,s!==null)if(Tt(s.value,o)){if(s.children===i.children&&!Je.current){e=Zt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Gt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ra(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ra(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Be(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,kr(e,n),i=mt(i),r=r(i),e.flags|=1,Be(t,e,r,n),e.child;case 14:return r=e.type,i=Lt(r,e.pendingProps),i=Lt(r.type,i),Yd(t,e,r,i,n);case 15:return Vp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Vs(t,e),e.tag=1,et(r)?(t=!0,so(e)):t=!1,kr(e,n),Wp(e,r,i),Da(e,r,i,n),Ma(null,e,r,!0,t,n);case 19:return Kp(t,e,n);case 22:return qp(t,e,n)}throw Error(C(156,e.tag))};function hm(t,e){return jf(t,e)}function pv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new pv(t,e,n,r)}function ic(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mv(t){if(typeof t=="function")return ic(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xu)return 11;if(t===Eu)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ic(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cr:return Wn(n.children,i,s,e);case Cu:o=8,i|=8;break;case ra:return t=ht(12,n,e,i|2),t.elementType=ra,t.lanes=s,t;case ia:return t=ht(13,n,e,i),t.elementType=ia,t.lanes=s,t;case sa:return t=ht(19,n,e,i),t.elementType=sa,t.lanes=s,t;case Cf:return Qo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lf:o=10;break e;case wf:o=9;break e;case xu:o=11;break e;case Eu:o=14;break e;case on:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=ht(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wn(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function Qo(t,e,n,r){return t=ht(22,t,r,e),t.elementType=Cf,t.lanes=n,t.stateNode={isHidden:!1},t}function Hl(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function Ul(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sc(t,e,n,r,i,s,o,l,a){return t=new gv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ht(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(s),t}function yv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fm(t){if(!t)return Sn;t=t._reactInternals;e:{if(er(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(et(n))return fp(t,n,e)}return e}function pm(t,e,n,r,i,s,o,l,a){return t=sc(n,r,!0,t,i,s,o,l,a),t.context=fm(null),n=t.current,r=$e(),i=_n(n),s=Gt(r,i),s.callback=e??null,yn(n,s,i),t.current.lanes=i,ls(t,i,r),tt(t,r),t}function Yo(t,e,n,r){var i=e.current,s=$e(),o=_n(i);return n=fm(n),e.context===null?e.context=n:e.pendingContext=n,e=Gt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yn(i,e,o),t!==null&&(kt(t,i,o,s),Ws(t,i,o)),o}function _o(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function oc(t,e){lh(t,e),(t=t.alternate)&&lh(t,e)}function vv(){return null}var mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function lc(t){this._internalRoot=t}Ko.prototype.render=lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));Yo(t,e,null,null)};Ko.prototype.unmount=lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qn(function(){Yo(null,t,null,null)}),e[Kt]=null}};function Ko(t){this._internalRoot=t}Ko.prototype.unstable_scheduleHydration=function(t){if(t){var e=qf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<an.length&&e!==0&&e<an[n].priority;n++);an.splice(n,0,t),n===0&&Qf(t)}};function ac(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ah(){}function _v(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_o(o);s.call(u)}}var o=pm(e,r,t,0,null,!1,!1,"",ah);return t._reactRootContainer=o,t[Kt]=o.current,Ui(t.nodeType===8?t.parentNode:t),Qn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=_o(a);l.call(u)}}var a=sc(t,0,!1,null,null,!1,!1,"",ah);return t._reactRootContainer=a,t[Kt]=a.current,Ui(t.nodeType===8?t.parentNode:t),Qn(function(){Yo(e,a,n,r)}),a}function Zo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=_o(o);l.call(a)}}Yo(e,o,t,i)}else o=_v(n,e,t,i,r);return _o(o)}$f=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yi(e.pendingLanes);n!==0&&(Iu(e,n|1),tt(e,ve()),!(Q&6)&&(Hr=ve()+500,Pn()))}break;case 13:Qn(function(){var r=Xt(t,1);if(r!==null){var i=$e();kt(r,t,1,i)}}),oc(t,1)}};Tu=function(t){if(t.tag===13){var e=Xt(t,134217728);if(e!==null){var n=$e();kt(e,t,134217728,n)}oc(t,134217728)}};Vf=function(t){if(t.tag===13){var e=_n(t),n=Xt(t,e);if(n!==null){var r=$e();kt(n,t,e,r)}oc(t,e)}};qf=function(){return Z};Gf=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};ma=function(t,e,n){switch(e){case"input":if(aa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wo(r);if(!i)throw Error(C(90));Ef(r),aa(r,i)}}}break;case"textarea":kf(t,n);break;case"select":e=n.value,e!=null&&Cr(t,!!n.multiple,e,!1)}};Df=tc;Af=Qn;var Lv={usingClientEntryPoint:!1,Events:[us,pr,Wo,Rf,bf,tc]},ci={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wv={bundleType:ci.bundleType,version:ci.version,rendererPackageName:ci.rendererPackageName,rendererConfig:ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Of(t),t===null?null:t.stateNode},findFiberByHostInstance:ci.findFiberByHostInstance||vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{Fo=As.inject(wv),zt=As}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lv;lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ac(e))throw Error(C(200));return yv(t,e,null,n)};lt.createRoot=function(t,e){if(!ac(t))throw Error(C(299));var n=!1,r="",i=mm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sc(t,1,!1,null,null,n,!1,r,i),t[Kt]=e.current,Ui(t.nodeType===8?t.parentNode:t),new lc(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=Of(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return Qn(t)};lt.hydrate=function(t,e,n){if(!Xo(e))throw Error(C(200));return Zo(null,t,e,!0,n)};lt.hydrateRoot=function(t,e,n){if(!ac(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pm(e,null,t,1,n??null,i,!1,s,o),t[Kt]=e.current,Ui(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ko(e)};lt.render=function(t,e,n){if(!Xo(e))throw Error(C(200));return Zo(null,t,e,!1,n)};lt.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(C(40));return t._reactRootContainer?(Qn(function(){Zo(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};lt.unstable_batchedUpdates=tc;lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xo(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Zo(t,e,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function gm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gm)}catch(t){console.error(t)}}gm(),gf.exports=lt;var Cv=gf.exports,uh=Cv;ta.createRoot=uh.createRoot,ta.hydrateRoot=uh.hydrateRoot;const lr=({card:t,onClick:e,isSelected:n,size:r="md"})=>{if(!t)return null;const i={sm:"w-12 h-16 text-xs",md:"w-20 h-28 text-sm",lg:"w-24 h-32 text-base"},s=()=>{var a;const l=((a=t.hanzi)==null?void 0:a.length)||0;return r==="sm"?l>=4?"text-[0.65rem]":l===3?"text-[0.75rem]":l===2?"text-xs":"text-xl":r==="md"?l>=4?"text-lg":l===3?"text-xl":l===2?"text-3xl":"text-5xl":"text-5xl"},o=()=>{var a;const l=((a=t.pinyin)==null?void 0:a.length)||0;return r==="sm"?"text-[0.5em]":l>10?"text-[0.65em]":"text-[0.8em]"};return y.jsxs("div",{onClick:e,className:`
        relative flex flex-col items-center justify-center gap-0.5 p-1
        bg-white border-[3px] border-[var(--color-stroke-primary)]
        rounded-[12px] cursor-pointer select-none transition-all duration-100 ease-out overflow-hidden
        type-${t.type}
        ${i[r]}
        ${n?"ring-4 ring-offset-2 ring-[var(--color-stroke-primary)] -translate-y-4":"tactile-press hover:-translate-y-1"}
      `,style:{boxShadow:n?"0px 10px 0px var(--color-stroke-primary)":""},children:[y.jsx("span",{className:`font-nunito font-bold text-[var(--color-stroke-primary)] opacity-80 leading-tight text-center w-full break-words ${o()}`,children:t.pinyin}),y.jsx("span",{className:`font-zcool leading-none text-center ${s()}`,style:{color:"var(--tile-accent)"},children:t.hanzi}),t.type==="wild"&&y.jsx("div",{className:"absolute top-0.5 right-0.5 text-[6px] md:text-[8px] bg-[var(--color-wild-purple)] text-white px-1 rounded-full z-10",children:"WIL"})]})},Tr=[{id:"G-01",hanzi:"",pinyin:"gu",en:"(past tense)",type:"grammar",tier:"core"},{id:"G-02",hanzi:"",pinyin:"su rn",en:"although",type:"grammar",tier:"core"},{id:"G-03",hanzi:"",pinyin:"dn sh",en:"but",type:"grammar",tier:"core"},{id:"L1-01",hanzi:"",pinyin:"ho",en:"good",type:"adj",tier:"core"},{id:"L1-02",hanzi:"",pinyin:"n",en:"you",type:"noun",tier:"core",isPronoun:!0},{id:"L1-03",hanzi:"",pinyin:"w",en:"I/me",type:"noun",tier:"core",isPronoun:!0},{id:"L1-04",hanzi:"",pinyin:"jio",en:"to be called",type:"verb",tier:"core",isTransitive:!0},{id:"L1-05",hanzi:"",pinyin:"shn me",en:"what",type:"grammar",tier:"core"},{id:"L1-06",hanzi:"",pinyin:"mng zi",en:"name",type:"noun",tier:"core"},{id:"L1-07",hanzi:"",pinyin:"xng",en:"surname",type:"verb",tier:"core",isTransitive:!0},{id:"L1-08",hanzi:"",pinyin:"gu",en:"noble/expensive",type:"adj",tier:"core"},{id:"L1-09",hanzi:"",pinyin:"qng",en:"please/invite",type:"verb",tier:"core"},{id:"L1-10",hanzi:"",pinyin:"wn",en:"ask",type:"verb",tier:"core"},{id:"L1-11",hanzi:"",pinyin:"wng",en:"Wang (surname)",type:"noun",tier:"core"},{id:"L1-12",hanzi:"",pinyin:"l",en:"Li (surname)",type:"noun",tier:"core"},{id:"L1-13",hanzi:"",pinyin:"xio ji",en:"Miss",type:"noun",tier:"core"},{id:"L1-14",hanzi:"",pinyin:"xin sheng",en:"Mr.",type:"noun",tier:"core"},{id:"L1-15",hanzi:"",pinyin:"ne",en:"(particle)",type:"grammar",tier:"core"},{id:"L1-16",hanzi:"",pinyin:"png you",en:"friend",type:"noun",tier:"core"},{id:"L1-17",hanzi:"",pinyin:"zhng wn",en:"Chinese",type:"noun",tier:"core"},{id:"L1-18",hanzi:"",pinyin:"yng wn",en:"English",type:"noun",tier:"core"},{id:"L1-19",hanzi:"",pinyin:"b",en:"not/no",type:"grammar",tier:"core",isModifier:!0},{id:"L1-20",hanzi:"",pinyin:"sh",en:"is/am/are",type:"verb",tier:"core"},{id:"L1-21",hanzi:"",pinyin:"t",en:"he",type:"noun",tier:"core",isPronoun:!0},{id:"L1-22",hanzi:"",pinyin:"t",en:"she",type:"noun",tier:"core",isPronoun:!0},{id:"L1-23",hanzi:"",pinyin:"zh",en:"this",type:"noun",tier:"core",isDemonstrative:!0},{id:"L1-24",hanzi:"",pinyin:"n",en:"that",type:"noun",tier:"core",isDemonstrative:!0},{id:"L1-25",hanzi:"",pinyin:"y",en:"also",type:"grammar",tier:"core"},{id:"L1-26",hanzi:"",pinyin:"lo sh",en:"teacher",type:"noun",tier:"core"},{id:"L1-27",hanzi:"",pinyin:"xu sheng",en:"student",type:"noun",tier:"core"},{id:"L1-28",hanzi:"",pinyin:"ma",en:"(question)",type:"grammar",tier:"core"},{id:"L1-29",hanzi:"",pinyin:"rn",en:"person",type:"noun",tier:"core"},{id:"L1-30",hanzi:"",pinyin:"zhng gu",en:"China",type:"noun",tier:"core"},{id:"L1-31",hanzi:"",pinyin:"bi jng",en:"Beijing",type:"noun",tier:"core"},{id:"L1-32",hanzi:"",pinyin:"zh zi",en:"live in",type:"verb",tier:"core"},{id:"L1-33",hanzi:"",pinyin:"mi gu",en:"USA",type:"noun",tier:"core"},{id:"L1-34",hanzi:"",pinyin:"xi wi y",en:"Hawaii",type:"noun",tier:"core"},{id:"L1-35",hanzi:"",pinyin:"ni yu",en:"New York",type:"noun",tier:"core"},{id:"L2-01",hanzi:"",pinyin:"w men",en:"we/us",type:"noun",tier:"core",isPronoun:!0},{id:"L2-02",hanzi:"",pinyin:"n men",en:"you (pl)",type:"noun",tier:"core",isPronoun:!0},{id:"L2-03",hanzi:"",pinyin:"t men",en:"they",type:"noun",tier:"core",isPronoun:!0},{id:"L2-04",hanzi:"",pinyin:"du",en:"all/both",type:"grammar",tier:"core"},{id:"L2-05",hanzi:"",pinyin:"shu",en:"speak",type:"verb",tier:"core"},{id:"L2-06",hanzi:"",pinyin:"de",en:"(possessive)",type:"grammar",tier:"core"},{id:"L2-07",hanzi:"",pinyin:"w de",en:"my",type:"noun",tier:"core"},{id:"L2-08",hanzi:"",pinyin:"n de",en:"your",type:"noun",tier:"core"},{id:"L2-09",hanzi:"",pinyin:"t de",en:"his",type:"noun",tier:"core"},{id:"L2-10",hanzi:"",pinyin:"yu",en:"have",type:"verb",tier:"core",isTransitive:!0},{id:"L2-11",hanzi:"",pinyin:"mi yu",en:"not have",type:"verb",tier:"core",isTransitive:!0,isModifier:!0},{id:"L2-12",hanzi:"",pinyin:"h",en:"and",type:"grammar",tier:"core"},{id:"L2-13",hanzi:"",pinyin:"xing",en:"want/think",type:"verb",tier:"core",isTransitive:!0},{id:"L2-14",hanzi:"",pinyin:"x hun",en:"like",type:"verb",tier:"core",isTransitive:!0},{id:"L2-15",hanzi:"",pinyin:"b ba",en:"dad",type:"noun",tier:"core"},{id:"L2-16",hanzi:"",pinyin:"m ma",en:"mom",type:"noun",tier:"core"},{id:"L2-17",hanzi:"",pinyin:"ji jie",en:"older sister",type:"noun",tier:"core"},{id:"L2-18",hanzi:"",pinyin:"g ge",en:"older brother",type:"noun",tier:"core"},{id:"L2-19",hanzi:"",pinyin:"d di",en:"younger brother",type:"noun",tier:"core"},{id:"L2-20",hanzi:"",pinyin:"mi mei",en:"younger sister",type:"noun",tier:"core"},{id:"L2-21",hanzi:"",pinyin:"zho pin",en:"photo",type:"noun",tier:"core"},{id:"L2-22",hanzi:"",pinyin:"g",en:"(measure word)",type:"grammar",tier:"core",isUnit:!0},{id:"L2-23",hanzi:"",pinyin:"shi",en:"who",type:"noun",tier:"core",isPronoun:!0},{id:"L2-24",hanzi:"",pinyin:"ji",en:"home/family",type:"noun",tier:"core"},{id:"L2-25",hanzi:"",pinyin:"j",en:"how many",type:"grammar",tier:"core",isNumber:!0},{id:"L2-26",hanzi:"",pinyin:"ku",en:"(measure word)",type:"grammar",tier:"core",isUnit:!0},{id:"L2-27",hanzi:"",pinyin:"ling",en:"two",type:"noun",tier:"core",isNumber:!0},{id:"L2-28",hanzi:"",pinyin:"zu",en:"do",type:"verb",tier:"core",isTransitive:!0},{id:"L2-29",hanzi:"",pinyin:"gng zu",en:"work",type:"verb",tier:"core"},{id:"L2-30",hanzi:"",pinyin:"l sh",en:"lawyer",type:"noun",tier:"core"},{id:"L2-31",hanzi:"",pinyin:"y shng",en:"doctor",type:"noun",tier:"core"},{id:"L2-32",hanzi:"",pinyin:"zi",en:"at/in",type:"grammar",tier:"core"},{id:"L2-33",hanzi:"",pinyin:"n l",en:"where",type:"noun",tier:"core"},{id:"L2-34",hanzi:"",pinyin:"wi shn me",en:"why",type:"grammar",tier:"core"},{id:"L2-35",hanzi:"",pinyin:"yn wi",en:"because",type:"grammar",tier:"core"},{id:"L3-01",hanzi:"",pinyin:"yu",en:"month",type:"noun",tier:"core",isUnit:!0},{id:"L3-02",hanzi:"",pinyin:"ho",en:"day/number",type:"noun",tier:"core",isUnit:!0},{id:"L3-03",hanzi:"",pinyin:"xng q",en:"week",type:"noun",tier:"core"},{id:"L3-04",hanzi:"",pinyin:"jn tin",en:"today",type:"noun",tier:"core",isTime:!0},{id:"L3-05",hanzi:"",pinyin:"mng tin",en:"tomorrow",type:"noun",tier:"core",isTime:!0},{id:"L3-06",hanzi:"",pinyin:"zu tin",en:"yesterday",type:"noun",tier:"core",isTime:!0},{id:"L3-07",hanzi:"",pinyin:"xin zi",en:"now",type:"noun",tier:"core",isTime:!0},{id:"L3-08",hanzi:"",pinyin:"din",en:"o'clock",type:"noun",tier:"core",isUnit:!0},{id:"L3-09",hanzi:"",pinyin:"zo shang",en:"morning",type:"noun",tier:"core"},{id:"L3-10",hanzi:"",pinyin:"wn shang",en:"evening",type:"noun",tier:"core"},{id:"L3-11",hanzi:"",pinyin:"shng r",en:"birthday",type:"noun",tier:"core"},{id:"L3-12",hanzi:"",pinyin:"jn nin",en:"this year",type:"noun",tier:"core",isTime:!0},{id:"L3-13",hanzi:"",pinyin:"su",en:"years old",type:"noun",tier:"core",isUnit:!0},{id:"L3-14",hanzi:"",pinyin:"yo",en:"want/will",type:"verb",tier:"core"},{id:"L3-15",hanzi:"",pinyin:"gn",en:"with",type:"grammar",tier:"core"},{id:"L3-16",hanzi:"",pinyin:"hu",en:"can/know how",type:"verb",tier:"core"},{id:"L3-17",hanzi:"",pinyin:"kn",en:"look/watch",type:"verb",tier:"core"},{id:"L3-18",hanzi:"",pinyin:"q",en:"go",type:"verb",tier:"core"},{id:"L3-19",hanzi:"",pinyin:"li",en:"come",type:"verb",tier:"core"},{id:"L3-20",hanzi:"",pinyin:"k sh",en:"but",type:"grammar",tier:"core"},{id:"L3-21",hanzi:"",pinyin:"su y",en:"so",type:"grammar",tier:"core"},{id:"L3-22",hanzi:"",pinyin:"k y",en:"can/may",type:"verb",tier:"core"},{id:"L3-23",hanzi:"",pinyin:"zn me yng",en:"how is it",type:"grammar",tier:"core"},{id:"L3-24",hanzi:"",pinyin:"i",en:"love",type:"verb",tier:"core",isTransitive:!0},{id:"L3-25",hanzi:"",pinyin:"zi jin",en:"goodbye",type:"verb",tier:"core"},{id:"L3-26",hanzi:"",pinyin:"ch",en:"eat",type:"verb",tier:"core",isTransitive:!0},{id:"L3-27",hanzi:"",pinyin:"fn",en:"meal/rice",type:"noun",tier:"core"},{id:"L3-28",hanzi:"",pinyin:"xi xie",en:"thanks",type:"verb",tier:"core"},{id:"L3-29",hanzi:"",pinyin:"cn ji",en:"participate",type:"verb",tier:"core"},{id:"L3-30",hanzi:"",pinyin:"hn",en:"very",type:"adj",tier:"core",isModifier:!0},{id:"L3-31",hanzi:"",pinyin:"go xng",en:"happy",type:"adj",tier:"core"},{id:"L3-32",hanzi:"",pinyin:"hi",en:"still/also",type:"grammar",tier:"core"},{id:"L3-33",hanzi:"",pinyin:"xu xio",en:"school",type:"noun",tier:"core"},{id:"L3-34",hanzi:"",pinyin:"zh",en:"only",type:"grammar",tier:"core"},{id:"L3-35",hanzi:"",pinyin:"ci",en:"dish/cuisine",type:"noun",tier:"core"},{id:"L4-01",hanzi:"",pinyin:"zhu m",en:"weekend",type:"noun",tier:"core"},{id:"L4-02",hanzi:"",pinyin:"chng chng",en:"often",type:"grammar",tier:"core"},{id:"L4-03",hanzi:"",pinyin:"wi gu",en:"foreign",type:"noun",tier:"core"},{id:"L4-04",hanzi:"",pinyin:"qng k",en:"treat (host)",type:"verb",tier:"core"},{id:"L4-05",hanzi:"",pinyin:"i ho",en:"hobby",type:"noun",tier:"core"},{id:"L4-06",hanzi:"",pinyin:"dng xi",en:"things",type:"noun",tier:"core"},{id:"L4-07",hanzi:"",pinyin:"shng wng",en:"go online",type:"verb",tier:"core"},{id:"L4-08",hanzi:"",pinyin:"d qi",en:"play ball",type:"verb",tier:"core"},{id:"L4-09",hanzi:"",pinyin:"din yng",en:"movie",type:"noun",tier:"core"},{id:"L4-10",hanzi:"",pinyin:"chng g",en:"sing",type:"verb",tier:"core"},{id:"L4-11",hanzi:"",pinyin:"tng",en:"listen",type:"verb",tier:"core"},{id:"L4-12",hanzi:"",pinyin:"yn yu",en:"music",type:"noun",tier:"core"},{id:"L4-13",hanzi:"",pinyin:"yu de",en:"some",type:"noun",tier:"core"},{id:"L4-14",hanzi:"",pinyin:"de sh hou",en:"when...",type:"grammar",tier:"core"},{id:"L4-15",hanzi:"",pinyin:"fng xu",en:"finish school",type:"verb",tier:"core"},{id:"L4-16",hanzi:"",pinyin:"ho ji",en:"long time",type:"adj",tier:"core"},{id:"L4-17",hanzi:"",pinyin:"b cu",en:"not bad",type:"adj",tier:"core"},{id:"L4-18",hanzi:"",pinyin:"ju de",en:"think/feel",type:"verb",tier:"core",isTransitive:!0},{id:"L4-19",hanzi:"",pinyin:"yu y si",en:"interesting",type:"adj",tier:"core"},{id:"L4-20",hanzi:"",pinyin:"shu jio",en:"sleep",type:"verb",tier:"core"},{id:"L4-21",hanzi:"",pinyin:"sun le",en:"forget it",type:"verb",tier:"core"},{id:"L4-22",hanzi:"",pinyin:"zho",en:"find",type:"verb",tier:"core"},{id:"L4-23",hanzi:"",pinyin:"bi rn",en:"others",type:"noun",tier:"core"},{id:"L5-01",hanzi:"",pinyin:"kui",en:"fast",type:"adj",tier:"core"},{id:"L5-02",hanzi:"",pinyin:"jn li",en:"come in",type:"verb",tier:"core"},{id:"L5-03",hanzi:"",pinyin:"ji sho",en:"introduce",type:"verb",tier:"core",isTransitive:!0},{id:"L5-04",hanzi:"",pinyin:"y xi",en:"a bit",type:"grammar",tier:"core"},{id:"L5-05",hanzi:"",pinyin:"h",en:"drink",type:"verb",tier:"core",isTransitive:!0},{id:"L5-06",hanzi:"",pinyin:"shu",en:"water",type:"noun",tier:"core"},{id:"L5-07",hanzi:"",pinyin:"ch",en:"tea",type:"noun",tier:"core"},{id:"L5-08",hanzi:"",pinyin:"k fi",en:"coffee",type:"noun",tier:"core"},{id:"L5-09",hanzi:"",pinyin:"k l",en:"cola",type:"noun",tier:"core"},{id:"L5-10",hanzi:"",pinyin:"gu zh",en:"juice",type:"noun",tier:"core"},{id:"L5-11",hanzi:"",pinyin:"di",en:"bring",type:"verb",tier:"core"},{id:"L5-12",hanzi:"",pinyin:"pio liang",en:"pretty",type:"adj",tier:"core"},{id:"L5-13",hanzi:"",pinyin:"shui",en:"handsome",type:"adj",tier:"core"},{id:"L5-14",hanzi:"",pinyin:"zu",en:"sit",type:"verb",tier:"core"},{id:"L5-15",hanzi:"",pinyin:"du bu q",en:"sorry",type:"verb",tier:"core"},{id:"L5-16",hanzi:"",pinyin:"ba",en:"(suggestion)",type:"grammar",tier:"core"},{id:"L5-17",hanzi:"",pinyin:"y q",en:"together",type:"grammar",tier:"core"},{id:"L5-18",hanzi:"",pinyin:"lio tin",en:"chat",type:"verb",tier:"core"},{id:"L5-19",hanzi:"",pinyin:"ci",en:"only then",type:"grammar",tier:"core"},{id:"L5-20",hanzi:"",pinyin:"le",en:"(particle)",type:"grammar",tier:"core"},{id:"L5-21",hanzi:"",pinyin:"gi",en:"give/to",type:"verb",tier:"core"},{id:"L6-01",hanzi:"",pinyin:"zu",en:"most",type:"grammar",tier:"core"},{id:"L6-02",hanzi:"",pinyin:"y hu",en:"after",type:"noun",tier:"core"},{id:"L6-03",hanzi:"",pinyin:"y qin",en:"before",type:"noun",tier:"core"},{id:"L6-04",hanzi:"",pinyin:"b ho y si",en:"embarrassed",type:"adj",tier:"core"},{id:"L6-05",hanzi:"",pinyin:"yo shi",en:"if",type:"grammar",tier:"core"},{id:"L6-06",hanzi:"",pinyin:"din z yu jin",en:"email",type:"noun",tier:"core"},{id:"L6-07",hanzi:"",pinyin:"shu do",en:"receive",type:"verb",tier:"core"},{id:"L6-08",hanzi:"",pinyin:"f",en:"send",type:"verb",tier:"core",isTransitive:!0},{id:"L6-09",hanzi:"",pinyin:"xi",en:"write",type:"verb",tier:"core",isTransitive:!0},{id:"L6-10",hanzi:"",pinyin:"ji",en:"then/just",type:"grammar",tier:"core"},{id:"L6-11",hanzi:"",pinyin:"nn",en:"You (polite)",type:"noun",tier:"core",isPronoun:!0},{id:"L6-12",hanzi:"",pinyin:"d din hu",en:"make call",type:"verb",tier:"core"},{id:"L6-13",hanzi:"",pinyin:"n",en:"which",type:"grammar",tier:"core",isDemonstrative:!0},{id:"L6-14",hanzi:"",pinyin:"wi",en:"(measure)",type:"grammar",tier:"core",isUnit:!0},{id:"L6-15",hanzi:"",pinyin:"sh jin",en:"time",type:"noun",tier:"core",isTime:!0},{id:"L6-16",hanzi:"",pinyin:"ki hu",en:"meeting",type:"verb",tier:"core"},{id:"L6-17",hanzi:"",pinyin:"yu sh jin",en:"schedule",type:"verb",tier:"core"},{id:"L6-18",hanzi:"",pinyin:"shu j",en:"mobile",type:"noun",tier:"core"},{id:"L6-19",hanzi:"",pinyin:"ko sh",en:"exam",type:"noun",tier:"core"},{id:"L6-20",hanzi:"",pinyin:"fng bin",en:"convenient",type:"adj",tier:"core"},{id:"L6-21",hanzi:"",pinyin:"bn gng sh",en:"office",type:"noun",tier:"core"},{id:"L6-22",hanzi:"",pinyin:"dng",en:"wait",type:"verb",tier:"core"},{id:"L6-23",hanzi:"",pinyin:"bi",en:"don't",type:"grammar",tier:"core"},{id:"L6-24",hanzi:"",pinyin:"k qi",en:"polite",type:"adj",tier:"core"},{id:"L6-25",hanzi:"",pinyin:"bng",en:"help",type:"verb",tier:"core"},{id:"L6-26",hanzi:"",pinyin:"zhn bi",en:"prepare",type:"verb",tier:"core"},{id:"L6-27",hanzi:"",pinyin:"lin x",en:"practice",type:"verb",tier:"core"},{id:"L6-28",hanzi:"",pinyin:"di",en:"must",type:"grammar",tier:"core"},{id:"L6-29",hanzi:"",pinyin:"jin min",en:"meet",type:"verb",tier:"core"},{id:"L6-30",hanzi:"",pinyin:"hu li",en:"come back",type:"verb",tier:"core"},{id:"L6-31",hanzi:"",pinyin:"yng gi",en:"should",type:"verb",tier:"core"},{id:"L6-32",hanzi:"",pinyin:"zn me",en:"how",type:"grammar",tier:"core"},{id:"L4-24",hanzi:"",pinyin:"yu de sh hou",en:"sometimes",type:"grammar",tier:"core",isTime:!0},{id:"L4-25",hanzi:"",pinyin:"din z yu x",en:"video games",type:"noun",tier:"core"},{id:"L4-26",hanzi:"",pinyin:"d",en:"play/hit",type:"verb",tier:"core",isTransitive:!0},{id:"L4-27",hanzi:"",pinyin:"tio w",en:"dance",type:"verb",tier:"core"},{id:"L4-28",hanzi:"",pinyin:"ho wnr",en:"fun",type:"adj",tier:"core"},{id:"L4-29",hanzi:"",pinyin:"sh",en:"book",type:"noun",tier:"core"},{id:"L4-30",hanzi:"",pinyin:"hi bin",en:"seaside",type:"noun",tier:"core"},{id:"L4-31",hanzi:"",pinyin:"mng",en:"busy",type:"adj",tier:"core"},{id:"L4-32",hanzi:"",pinyin:"y si",en:"meaning",type:"noun",tier:"core"},{id:"L4-33",hanzi:"",pinyin:"y",en:"one",type:"noun",tier:"core",isNumber:!0},{id:"L4-34",hanzi:"",pinyin:"wnr",en:"play",type:"verb",tier:"core"},{id:"L4-35",hanzi:"",pinyin:"ji rn",en:"family members",type:"noun",tier:"core"},{id:"L4-36",hanzi:"",pinyin:"gng yun",en:"park",type:"noun",tier:"core"},{id:"L4-37",hanzi:"",pinyin:"jin",en:"see",type:"verb",tier:"core",isTransitive:!0},{id:"L5-22",hanzi:"'Iolani",pinyin:"'Iolani",en:"'Iolani",type:"noun",tier:"core"},{id:"L5-23",hanzi:"",pinyin:"shng",en:"attend/up",type:"verb",tier:"core",isTransitive:!0},{id:"L5-24",hanzi:"",pinyin:"k",en:"class",type:"noun",tier:"core"},{id:"L5-25",hanzi:"",pinyin:"gng k",en:"homework",type:"noun",tier:"core"},{id:"L5-26",hanzi:"",pinyin:"ti",en:"too",type:"adj",tier:"core",isModifier:!0},{id:"L5-27",hanzi:"",pinyin:"nn",en:"difficult",type:"adj",tier:"core"},{id:"L5-28",hanzi:"",pinyin:"s",en:"four",type:"noun",tier:"core",isNumber:!0},{id:"L5-29",hanzi:"",pinyin:"bn",en:"half",type:"noun",tier:"core",isNumber:!0},{id:"L5-30",hanzi:"",pinyin:"do",en:"arrive",type:"verb",tier:"core"},{id:"L5-31",hanzi:"",pinyin:"bi",en:"cup",type:"grammar",tier:"core",isUnit:!0},{id:"L5-32",hanzi:"",pinyin:"zhn zh ni ch",en:"boba tea",type:"noun",tier:"core"},{id:"L5-33",hanzi:"",pinyin:"l",en:"inside",type:"noun",tier:"core"},{id:"L5-34",hanzi:"",pinyin:"bng gn",en:"cookies",type:"noun",tier:"core"},{id:"L5-35",hanzi:"",pinyin:"shu gu",en:"fruit",type:"noun",tier:"core"},{id:"L5-36",hanzi:"",pinyin:"y dinr",en:"a little",type:"grammar",tier:"core"},{id:"L5-37",hanzi:"",pinyin:"hu",en:"return",type:"verb",tier:"core",isTransitive:!0},{id:"L5-38",hanzi:"",pinyin:"sh",en:"ten",type:"noun",tier:"core",isNumber:!0},{id:"L6-33",hanzi:"",pinyin:"hu",en:"after",type:"grammar",tier:"core"},{id:"L6-34",hanzi:"",pinyin:"shng w",en:"morning",type:"noun",tier:"core",isTime:!0},{id:"L6-35",hanzi:"",pinyin:"xi w",en:"afternoon",type:"noun",tier:"core",isTime:!0},{id:"L6-36",hanzi:"",pinyin:"dun xn",en:"text message",type:"noun",tier:"core"},{id:"L6-37",hanzi:"",pinyin:"k fi din",en:"coffee shop",type:"noun",tier:"core"},{id:"L6-38",hanzi:"",pinyin:"shng q",en:"angry",type:"adj",tier:"core"},{id:"L6-39",hanzi:"",pinyin:"bng gng",en:"helper",type:"noun",tier:"core"},{id:"L6-40",hanzi:"",pinyin:"zh do",en:"know",type:"verb",tier:"core",isTransitive:!0},{id:"L6-41",hanzi:"",pinyin:"zn me bn",en:"what to do",type:"verb",tier:"core"},{id:"L6-42",hanzi:"",pinyin:"zu hu",en:"finally",type:"noun",tier:"core",isTime:!0},{id:"w1",hanzi:"",pinyin:"Wild",en:"Any",type:"wild",tier:"core"}],xv=["L2-06","L5-20","L1-28","G-01","L2-35","L3-21","G-02","G-03"],ym=["L1-20","L2-32","L3-14","L2-13","L3-18","L2-14","L2-10","L2-11"],Ev=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},Wl=(t=40)=>{let e=[];const n=Tr.filter(r=>!ym.includes(r.id));for(let r=0;r<t;r++){const i=n[r%n.length];e.push({...i,id:`${i.id}-${Date.now()}-${r}`})}return Ev(e)},vm=[{id:"L1",title:"Basic Identity",description:"Introducing yourself",vocabularyIds:["L1-01","L1-02","L1-03","L1-04","L1-05","L1-06","L1-07","L1-08","L1-09","L1-10","L1-11","L1-12","L1-13","L1-14","L1-15","L1-16","L1-17","L1-18","L1-19","L1-20","L1-21","L1-22","L1-23","L1-24","L1-25","L1-26","L1-27","L1-28","L1-29","L1-30","L1-31","L1-32","L1-33","L1-34","L1-35","L2-06"],problems:[{id:"L1-P1",prompt:'Translate: "I am a teacher"',solutions:["",""],requiredCardIds:["L1-03","L1-20","L1-26"]},{id:"L1-P2",prompt:'Translate: "You are a student"',solutions:["",""],requiredCardIds:["L1-02","L1-20","L1-27"]},{id:"L1-P3",prompt:'Translate: "Is he your friend?"',solutions:["",""],requiredCardIds:["L1-21","L1-20","L1-02","L2-06","L1-16","L1-28"]},{id:"L1-P4",prompt:'Translate: "I am not a teacher"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L1-26"]},{id:"L1-P5",prompt:'Translate: "Are you American?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-33","L1-29","L1-28"]},{id:"L1-P6",prompt:'Translate: "He lives in Beijing"',solutions:[""],requiredCardIds:["L1-21","L1-32","L1-31"]},{id:"L1-P7",prompt:'Translate: "What is her name?"',solutions:[""],requiredCardIds:["L1-22","L1-04","L1-05","L1-06"]},{id:"L1-P8",prompt:'Translate: "Are you Chinese?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-30","L1-29","L1-28"]},{id:"L1-P9",prompt:'Translate: "Hello"',solutions:[""],requiredCardIds:["L1-02","L1-01"]},{id:"L1-P10",prompt:'Translate: "My surname is Wang"',solutions:[""],requiredCardIds:["L1-03","L1-07","L1-11"]},{id:"L1-P11",prompt:'Translate: "Is he a student?"',solutions:[""],requiredCardIds:["L1-21","L1-20","L1-27","L1-28"]},{id:"L1-P12",prompt:'Translate: "I ask you"',solutions:[""],requiredCardIds:["L1-03","L1-10","L1-02"]},{id:"L1-P13",prompt:'Translate: "May I ask teacher?"',solutions:["",""],requiredCardIds:["L1-09","L1-10","L1-26"]},{id:"L1-P14",prompt:'Translate: "She is Teacher Li"',solutions:[""],requiredCardIds:["L1-22","L1-20","L1-12","L1-26"]},{id:"L1-P15",prompt:'Translate: "Are you a teacher?"',solutions:["",""],requiredCardIds:["L1-02","L1-20","L1-26","L1-28"]},{id:"L1-P16",prompt:'Translate: "I am not a student"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L1-27"]},{id:"L1-P17",prompt:'Translate: "Is she your friend?"',solutions:["",""],requiredCardIds:["L1-22","L1-20","L1-02","L2-06","L1-16","L1-28"]},{id:"L1-P18",prompt:'Translate: "Do you live in New York?"',solutions:[""],requiredCardIds:["L1-02","L1-32","L1-35","L1-28"]},{id:"L1-P19",prompt:'Translate: "He is Chinese"',solutions:[""],requiredCardIds:["L1-21","L1-20","L1-30","L1-29"]},{id:"L1-P20",prompt:'Translate: "Are you Miss Wang?"',solutions:[""],requiredCardIds:["L1-02","L1-20","L1-11","L1-13","L1-28"]}]},{id:"L2",title:"Likes & Dislikes",description:"Expressing preferences",vocabularyIds:["L2-01","L2-02","L2-03","L2-04","L2-05","L2-06","L2-07","L2-08","L2-09","L2-10","L2-11","L2-12","L2-13","L2-14","L2-15","L2-16","L2-17","L2-18","L2-19","L2-20","L2-21","L2-22","L2-23","L2-24","L2-25","L2-26","L2-27","L2-28","L2-29","L2-30","L2-31","L2-32","L2-33","L2-34","L2-35"],problems:[{id:"L2-P1",prompt:'Translate: "I like Chinese food"',solutions:["","","",""],requiredCardIds:["L1-03","L2-14","L1-30","L3-27","L3-35"]},{id:"L2-P2",prompt:'Translate: "I do not like exams"',solutions:[""],requiredCardIds:["L1-03","L1-19","L2-14","L6-19"]},{id:"L2-P3",prompt:'Translate: "We all like him"',solutions:[""],requiredCardIds:["L2-01","L2-04","L2-14","L1-21"]},{id:"L2-P4",prompt:'Translate: "I do not have a brother"',solutions:["",""],requiredCardIds:["L1-03","L2-11","L2-18"]},{id:"L2-P5",prompt:'Translate: "My dad is a doctor"',solutions:["",""],requiredCardIds:["L1-03","L2-15","L1-20","L2-31"]},{id:"L2-P6",prompt:'Translate: "She likes to work"',solutions:[""],requiredCardIds:["L1-22","L2-14","L2-29"]},{id:"L2-P7",prompt:'Translate: "We are all friends"',solutions:[""],requiredCardIds:["L2-01","L2-04","L1-20","L1-16"]},{id:"L2-P8",prompt:'Translate: "Whose photo is this?"',solutions:[""],requiredCardIds:["L1-23","L1-20","L2-23","L2-06","L2-21"]},{id:"L2-P9",prompt:'Translate: "How many people in your family?"',solutions:[""],requiredCardIds:["L1-02","L2-24","L2-10","L2-25","L2-26","L1-29"]},{id:"L2-P10",prompt:'Translate: "What do you want to do?"',solutions:[""],requiredCardIds:["L1-02","L2-13","L2-28","L1-05"]},{id:"L2-P11",prompt:'Translate: "I am not a lawyer"',solutions:[""],requiredCardIds:["L1-03","L1-19","L1-20","L2-30"]},{id:"L2-P12",prompt:'Translate: "Do you like him?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L1-21","L1-28"]},{id:"L2-P13",prompt:'Translate: "Because I like Chinese"',solutions:[""],requiredCardIds:["L2-35","L1-03","L2-14","L1-17"]},{id:"L2-P14",prompt:'Translate: "Who is she?"',solutions:[""],requiredCardIds:["L1-22","L1-20","L2-23"]},{id:"L2-P15",prompt:'Translate: "Does he have a younger brother?"',solutions:[""],requiredCardIds:["L1-21","L2-10","L2-19","L1-28"]},{id:"L2-P16",prompt:'Translate: "We do not have photos"',solutions:[""],requiredCardIds:["L2-01","L2-11","L2-21"]},{id:"L2-P17",prompt:'Translate: "My older sister is a doctor"',solutions:["",""],requiredCardIds:["L1-03","L2-17","L1-20","L2-31"]},{id:"L2-P18",prompt:'Translate: "I want to be a lawyer"',solutions:[""],requiredCardIds:["L1-03","L2-13","L2-28","L2-30"]},{id:"L2-P19",prompt:'Translate: "Where does he work?"',solutions:[""],requiredCardIds:["L1-21","L2-32","L2-33","L2-29"]},{id:"L2-P20",prompt:'Translate: "They are all students"',solutions:[""],requiredCardIds:["L2-03","L2-04","L1-20","L1-27"]}]},{id:"L3",title:"Making Plans",description:"Time and arrangements",vocabularyIds:["L3-01","L3-02","L3-03","L3-04","L3-05","L3-06","L3-07","L3-08","L3-09","L3-10","L3-11","L3-12","L3-13","L3-14","L3-15","L3-16","L3-17","L3-18","L3-19","L3-20","L3-21","L3-22","L3-23","L3-24","L3-25","L3-26","L3-27","L3-28","L3-29","L3-30","L3-31","L3-32","L3-33","L3-34","L3-35"],problems:[{id:"L3-P1",prompt:'Translate: "Tomorrow evening"',solutions:[""],requiredCardIds:["L3-05","L3-10"]},{id:"L3-P2",prompt:'Translate: "I treat (pay for meal)"',solutions:[""],requiredCardIds:["L1-03","L4-04"]},{id:"L3-P3",prompt:'Translate: "Tomorrow evening I treat"',solutions:[""],requiredCardIds:["L3-05","L3-10","L1-03","L4-04"]},{id:"L3-P4",prompt:'Translate: "What time is it now?"',solutions:[""],requiredCardIds:["L3-07","L2-25","L3-08"]},{id:"L3-P5",prompt:'Translate: "I go to Beijing tomorrow"',solutions:["",""],requiredCardIds:["L1-03","L3-05","L3-18","L1-31"]},{id:"L3-P6",prompt:'Translate: "I like to eat Chinese food"',solutions:["",""],requiredCardIds:["L1-03","L2-14","L3-26","L1-30","L3-27","L3-35"]},{id:"L3-P7",prompt:'Translate: "Is Chinese food tasty?"',solutions:["",""],requiredCardIds:["L1-30","L3-27","L3-35","L1-01","L3-26","L1-28"]},{id:"L3-P8",prompt:'Translate: "Today is not my birthday"',solutions:[""],requiredCardIds:["L3-04","L1-19","L1-20","L2-07","L3-11"]},{id:"L3-P9",prompt:'Translate: "Do you like watching movies?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L3-17","L4-09","L1-28"]},{id:"L3-P10",prompt:'Translate: "I go to school"',solutions:[""],requiredCardIds:["L1-03","L3-18","L3-33"]},{id:"L3-P11",prompt:'Translate: "Thank you teacher"',solutions:[""],requiredCardIds:["L3-28","L1-26"]},{id:"L3-P12",prompt:'Translate: "I am very happy"',solutions:[""],requiredCardIds:["L1-03","L3-30","L3-31"]},{id:"L3-P13",prompt:'Translate: "Come to my home"',solutions:[""],requiredCardIds:["L3-19","L1-03","L2-24"]},{id:"L3-P14",prompt:'Translate: "I go to see a friend"',solutions:[""],requiredCardIds:["L1-03","L3-18","L3-17","L1-16"]},{id:"L3-P15",prompt:'Translate: "Do you want to eat Chinese food?"',solutions:["",""],requiredCardIds:["L1-02","L3-14","L3-26","L1-30","L3-27","L3-35","L1-28"]},{id:"L3-P16",prompt:'Translate: "Is tomorrow your birthday?"',solutions:[""],requiredCardIds:["L3-05","L1-20","L1-02","L2-06","L3-11","L1-28"]},{id:"L3-P17",prompt:'Translate: "Goodbye"',solutions:[""],requiredCardIds:["L3-25"]},{id:"L3-P18",prompt:'Translate: "I am very good"',solutions:[""],requiredCardIds:["L1-03","L3-30","L1-01"]},{id:"L3-P19",prompt:'Translate: "Do you like school?"',solutions:[""],requiredCardIds:["L1-02","L2-14","L3-33","L1-28"]},{id:"L3-P20",prompt:'Translate: "I like to eat rice"',solutions:[""],requiredCardIds:["L1-03","L2-14","L3-26","L3-27"]}]},{id:"L4",title:"Hobbies & Free Time",description:"Activities and frequency",vocabularyIds:["L4-01","L4-02","L4-03","L4-04","L4-05","L4-06","L4-08","L4-09","L4-10","L4-11","L4-12","L4-13","L4-14","L4-15","L4-16","L4-17","L4-18","L4-19","L4-20","L4-21","L4-22","L4-23","L4-24","L4-25","L4-26","L4-27","L4-28","L4-29","L4-30","L4-31","L4-32","L4-33","L4-34","L4-35","L4-36","L4-37","L1-21","L1-22","L1-02","L1-03","L2-14","L2-32","L3-17","L2-35","L3-21","L2-11","L3-30","L3-31"],problems:[{id:"L4-P1",prompt:'Translate: "He is often at home on weekends"',solutions:[""],requiredCardIds:["L1-21","L4-01","L4-02","L2-32","L2-24"]},{id:"L4-P2",prompt:'Translate: "She sometimes watches movies"',solutions:[""],requiredCardIds:["L1-22","L4-24","L3-17","L4-09"]},{id:"L4-P3",prompt:'Translate: "He sometimes plays video games"',solutions:[""],requiredCardIds:["L1-21","L4-24","L4-26","L4-25"]},{id:"L4-P4",prompt:'Translate: "She likes to go dancing with friends"',solutions:[""],requiredCardIds:["L1-22","L2-14","L3-15","L1-16","L3-18","L4-27"]},{id:"L4-P5",prompt:'Translate: "He likes playing ball"',solutions:[""],requiredCardIds:["L1-21","L2-14","L4-08"]},{id:"L4-P6",prompt:'Translate: "She is not at home on weekends"',solutions:[""],requiredCardIds:["L1-22","L4-01","L1-19","L2-32","L2-24"]},{id:"L4-P7",prompt:'Translate: "He thinks watching movies is fun"',solutions:[""],requiredCardIds:["L1-21","L4-18","L3-17","L4-09","L3-30","L4-28"]},{id:"L4-P8",prompt:'Translate: "She thinks playing ball is boring (no meaning)"',solutions:[""],requiredCardIds:["L1-22","L4-18","L4-08","L2-11","L4-32"]},{id:"L4-P9",prompt:'Translate: "Some people like reading books"',solutions:[""],requiredCardIds:["L4-13","L1-29","L2-14","L3-17","L4-29"]},{id:"L4-P10",prompt:'Translate: "Some people like playing ball"',solutions:[""],requiredCardIds:["L4-13","L1-29","L2-14","L4-08"]},{id:"L4-P11",prompt:'Translate: "He often plays alone at home"',solutions:[""],requiredCardIds:["L1-21","L4-02","L4-33","L2-22","L1-29","L2-32","L2-24","L4-34"]},{id:"L4-P12",prompt:'Translate: "She goes to the seaside with family"',solutions:[""],requiredCardIds:["L1-22","L3-15","L4-35","L3-18","L4-30"]},{id:"L4-P13",prompt:'Translate: "Because he likes playing ball, so he goes to the park"',solutions:["",""],requiredCardIds:["L2-35","L1-21","L2-14","L4-08","L3-21","L3-18","L4-36"]},{id:"L4-P14",prompt:'Translate: "Because she is busy, so she does not come"',solutions:["",""],requiredCardIds:["L2-35","L1-22","L3-30","L4-31","L3-21","L1-19","L3-19"]},{id:"L4-P15",prompt:`Translate: "He hasn't seen his friend for a long time"`,solutions:[""],requiredCardIds:["L1-21","L4-16","L1-19","L4-37","L1-16","L5-20"]},{id:"L4-P16",prompt:'Translate: "Is she busy today?"',solutions:[""],requiredCardIds:["L1-22","L3-04","L4-31","L1-19","L4-31"]},{id:"L4-P17",prompt:'Translate: "He wants to find someone to play ball with"',solutions:[""],requiredCardIds:["L1-21","L2-13","L4-22","L1-29","L3-15","L1-21","L4-08"]},{id:"L4-P18",prompt:'Translate: "No one wants to play ball with him"',solutions:[""],requiredCardIds:["L2-11","L1-29","L2-13","L3-15","L1-21","L4-08"]},{id:"L4-P19",prompt:'Translate: "He goes to play ball alone"',solutions:[""],requiredCardIds:["L1-21","L4-33","L2-22","L1-29","L3-18","L4-08"]},{id:"L4-P20",prompt:'Translate: "He is very unhappy"',solutions:[""],requiredCardIds:["L1-21","L3-30","L1-19","L3-31"]}]},{id:"L5",title:"School Life",description:"Visiting friends & school",vocabularyIds:["L5-01","L5-02","L5-03","L5-04","L5-05","L5-06","L5-07","L5-08","L5-09","L5-10","L5-11","L5-12","L5-13","L5-14","L5-15","L5-16","L5-17","L5-18","L5-19","L5-20","L5-21","L5-22","L5-23","L5-24","L5-25","L5-26","L5-27","L5-28","L5-29","L5-30","L5-31","L5-32","L5-33","L5-34","L5-35","L5-36","L5-37","L5-38","L6-24","L1-20","L1-21","L2-06","L3-33","L2-03","L1-17","L2-35","L3-21","L2-11"],problems:[{id:"L5-P1",prompt:`Translate: "He is a student at 'Iolani School"`,solutions:["Iolani","Iolani"],requiredCardIds:["L1-21","L1-20","L5-22","L3-33","L2-06","L1-27"]},{id:"L5-P2",prompt:'Translate: "They attend Chinese class together"',solutions:[""],requiredCardIds:["L2-03","L5-17","L5-23","L1-17","L5-24"]},{id:"L5-P3",prompt:`Translate: "Because homework is too hard, he didn't do it"`,solutions:["",""],requiredCardIds:["L2-35","L5-25","L5-26","L5-27","L3-21","L1-21","L2-11","L2-28"]},{id:"L5-P4",prompt:`Translate: "He arrives at friend's home at 4:30"`,solutions:[""],requiredCardIds:["L1-21","L5-28","L3-08","L5-29","L5-30","L1-16","L2-06","L2-24"]},{id:"L5-P5",prompt:'Translate: "His mom is also at home"',solutions:[""],requiredCardIds:["L2-09","L2-16","L1-25","L2-32","L2-24"]},{id:"L5-P6",prompt:'Translate: "He wants to introduce his good friend"',solutions:[""],requiredCardIds:["L1-21","L2-13","L5-03","L2-09","L1-01","L1-16"]},{id:"L5-P7",prompt:'Translate: "He brought two cups of boba tea"',solutions:[""],requiredCardIds:["L1-21","L5-11","L5-20","L2-27","L5-31","L5-32"]},{id:"L5-P8",prompt:'Translate: "Mom says: You are too polite"',solutions:[""],requiredCardIds:["L2-16","L2-05","L1-02","L5-26","L6-24","L5-20"]},{id:"L5-P9",prompt:'Translate: "There are no cookies at home (Home inside no cookies)"',solutions:[""],requiredCardIds:["L2-24","L5-33","L2-11","L5-34"]},{id:"L5-P10",prompt:'Translate: "They have fruit"',solutions:[""],requiredCardIds:["L2-03","L2-10","L5-35"]},{id:"L5-P11",prompt:'Translate: "He wants to eat a little fruit"',solutions:[""],requiredCardIds:["L1-21","L2-13","L3-26","L5-36","L5-35"]},{id:"L5-P12",prompt:'Translate: "They chat, do not do homework"',solutions:["",""],requiredCardIds:["L2-03","L5-18","L1-19","L2-28","L5-25"]},{id:"L5-P13",prompt:'Translate: "He thinks homework is not hard"',solutions:[""],requiredCardIds:["L1-21","L4-18","L5-25","L1-19","L5-27"]},{id:"L5-P14",prompt:'Translate: "They want to do homework tomorrow"',solutions:[""],requiredCardIds:["L2-03","L2-13","L3-05","L2-28","L5-25"]},{id:"L5-P15",prompt:'Translate: "Mom is not happy"',solutions:[""],requiredCardIds:["L2-16","L1-19","L3-31"]},{id:"L5-P16",prompt:'Translate: "They play video games"',solutions:[""],requiredCardIds:["L2-03","L4-26","L4-25"]},{id:"L5-P17",prompt:'Translate: "They play together"',solutions:[""],requiredCardIds:["L2-03","L5-17","L4-34"]},{id:"L5-P18",prompt:'Translate: "He returns home at 10pm"',solutions:[""],requiredCardIds:["L1-21","L3-10","L5-38","L3-08","L5-37","L2-24"]},{id:"L5-P19",prompt:`Translate: "They didn't do Chinese homework"`,solutions:[""],requiredCardIds:["L2-03","L2-11","L2-28","L1-17","L5-25"]},{id:"L5-P20",prompt:'Translate: "Teacher will be unhappy"',solutions:[""],requiredCardIds:["L1-26","L3-16","L1-19","L3-31"]}]},{id:"L6",title:"Daily Life",description:"Time & sequencing",vocabularyIds:["L6-01","L6-02","L6-03","L6-04","L6-05","L6-06","L6-07","L6-08","L6-09","L6-10","L6-11","L6-12","L6-13","L6-14","L6-15","L6-16","L6-17","L6-18","L6-19","L6-20","L6-21","L6-22","L6-23","L6-24","L6-25","L6-26","L6-27","L6-28","L6-29","L6-30","L6-31","L6-32","L6-33","L6-34","L6-35","L6-36","L6-37","L6-38","L6-39","L6-40","L6-41","L6-42","L4-15","L1-21","L5-37","L2-24","L4-20","L3-17","L2-10","L5-24","L3-30","L4-31","L5-21","L1-16"],problems:[{id:"L6-P1",prompt:'Translate: "After school, he goes home"',solutions:[""],requiredCardIds:["L4-15","L6-33","L1-21","L5-37","L2-24"]},{id:"L6-P2",prompt:'Translate: "He does homework after returning home"',solutions:[""],requiredCardIds:["L1-21","L5-37","L2-24","L6-02","L2-28","L5-25"]},{id:"L6-P3",prompt:'Translate: "Before sleeping, he looks at phone"',solutions:[""],requiredCardIds:["L4-20","L6-03","L1-21","L3-17","L6-18"]},{id:"L6-P4",prompt:'Translate: "He has class in the morning"',solutions:[""],requiredCardIds:["L6-34","L1-21","L2-10","L5-24"]},{id:"L6-P5",prompt:'Translate: "He is very busy in the afternoon"',solutions:[""],requiredCardIds:["L6-35","L1-21","L3-30","L4-31"]},{id:"L6-P6",prompt:'Translate: "He calls a friend"',solutions:[""],requiredCardIds:["L1-21","L5-21","L1-16","L6-12"]},{id:"L6-P7",prompt:'Translate: "He texts a friend"',solutions:[""],requiredCardIds:["L1-21","L5-21","L1-16","L6-08","L6-36"]},{id:"L6-P8",prompt:`Translate: "He received friend's text"`,solutions:[""],requiredCardIds:["L1-21","L6-07","L1-16","L2-06","L6-36"]},{id:"L6-P9",prompt:'Translate: "Friend wants to schedule time with him"',solutions:[""],requiredCardIds:["L1-16","L2-13","L3-15","L1-21","L6-17"]},{id:"L6-P10",prompt:'Translate: "They meet at coffee shop"',solutions:[""],requiredCardIds:["L2-03","L2-32","L6-37","L6-29"]},{id:"L6-P11",prompt:`Translate: "Because it's convenient, they go to coffee shop"`,solutions:["",""],requiredCardIds:["L2-35","L3-30","L6-20","L3-21","L2-03","L3-18","L6-37"]},{id:"L6-P12",prompt:'Translate: "He has no time"',solutions:[""],requiredCardIds:["L1-21","L2-11","L6-15"]},{id:"L6-P13",prompt:'Translate: "He is not convenient now"',solutions:[""],requiredCardIds:["L1-21","L3-07","L1-19","L6-20"]},{id:"L6-P14",prompt:'Translate: "Sometimes he is very busy"',solutions:[""],requiredCardIds:["L4-24","L1-21","L3-30","L4-31"]},{id:"L6-P15",prompt:'Translate: "He thinks friend is very angry"',solutions:[""],requiredCardIds:["L1-21","L4-18","L1-16","L3-30","L6-38"]},{id:"L6-P16",prompt:'Translate: "He wants to chat with friend"',solutions:[""],requiredCardIds:["L1-21","L2-13","L3-15","L1-16","L5-18"]},{id:"L6-P17",prompt:'Translate: "Teacher is not present"',solutions:["",""],requiredCardIds:["L1-26","L1-19","L2-32"]},{id:"L6-P18",prompt:`Translate: "He waits for teacher's helper"`,solutions:[""],requiredCardIds:["L1-21","L6-22","L1-26","L2-06","L6-39"]},{id:"L6-P19",prompt:`Translate: "He doesn't know what to do"`,solutions:[""],requiredCardIds:["L1-21","L1-19","L6-40","L6-41"]},{id:"L6-P20",prompt:'Translate: "Finally, he went home"',solutions:[""],requiredCardIds:["L6-42","L1-21","L5-37","L2-24","L5-20"]}]}],Sv=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=function(t,e){if(!t)throw Xr(e)},Xr=function(t){return new Error("Firebase Database ("+_m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let c=(l&15)<<2|u>>6,v=u&63;a||(v=64,o||(c=64)),r.push(n[h],n[d],n[c],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new Iv;const c=s<<2|l>>4;if(r.push(c),u!==64){const v=l<<4&240|u>>2;if(r.push(v),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Iv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wm=function(t){const e=Lm(t);return uc.encodeByteArray(e,!0)},Lo=function(t){return wm(t).replace(/\./g,"")},Qa=function(t){try{return uc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){return Cm(void 0,t)}function Cm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Nv(n)||(t[n]=Cm(t[n],e[n]));return t}function Nv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=()=>Pv().__FIREBASE_DEFAULTS__,bv=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Dv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qa(t[1]);return e&&JSON.parse(e)},xm=()=>{try{return Sv()||Rv()||bv()||Dv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Av=t=>{var e,n;return(n=(e=xm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zv=t=>{const e=Av(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Em=()=>{var t;return(t=xm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Lo(JSON.stringify(n)),Lo(JSON.stringify(o)),l].join(".")}const Ti={};function Fv(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ti))Ti[e]?t.emulator.push(e):t.prod.push(e);return t}function jv(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ch=!1;function Hv(t,e){if(typeof window>"u"||typeof document>"u"||!cc(window.location.host)||Ti[t]===e||Ti[t]||ch)return;Ti[t]=e;function n(c){return`__firebase__banner__${c}`}const r="__firebase__banner",s=Fv().prod.length>0;function o(){const c=document.getElementById(r);c&&c.remove()}function l(c){c.style.display="flex",c.style.background="#7faaf0",c.style.position="fixed",c.style.bottom="5px",c.style.left="5px",c.style.padding=".5em",c.style.borderRadius="5px",c.style.alignItems="center"}function a(c,v){c.setAttribute("width","24"),c.setAttribute("id",v),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px"}function u(){const c=document.createElement("span");return c.style.cursor="pointer",c.style.marginLeft="16px",c.style.fontSize="24px",c.innerHTML=" &times;",c.onclick=()=>{ch=!0,o()},c}function h(c,v){c.setAttribute("id",v),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline"}function d(){const c=jv(r),v=n("text"),g=document.getElementById(v)||document.createElement("span"),L=n("learnmore"),A=document.getElementById(L)||document.createElement("a"),p=n("preprendIcon"),f=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.created){const m=c.element;l(m),h(A,L);const w=u();a(f,p),m.append(f,g,A,w),document.body.appendChild(m)}s?(g.innerText="Preview backend disconnected.",f.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(f.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Uv())}function Wv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function km(){return _m.NODE_ADMIN===!0}function Bv(){try{return typeof indexedDB=="object"}catch{return!1}}function $v(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vv,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Im.prototype.create)}}class Im{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qv(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new hs(i,l,r)}}function qv(t,e){return t.replace(Gv,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Gv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){return JSON.parse(t)}function Te(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ki(Qa(s[0])||""),n=Ki(Qa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Qv=function(t){const e=Tm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Yv=function(t){const e=Tm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ur(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function dh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Co(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hh(s)&&hh(o)){if(!Co(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const c=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Jo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,S(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},el=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ds;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t_(e))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zn){return this.instances.has(e)}getOptions(e=zn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zn){return this.component?this.component.multipleInstances?e:zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e_(t){return t===zn?void 0:t}function t_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Jv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const r_={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},i_=ne.INFO,s_={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},o_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=s_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=i_,this._logHandler=o_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const l_=(t,e)=>e.some(n=>t instanceof n);let fh,ph;function a_(){return fh||(fh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u_(){return ph||(ph=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pm=new WeakMap,Ya=new WeakMap,Rm=new WeakMap,Bl=new WeakMap,dc=new WeakMap;function c_(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(wn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pm.set(n,t)}).catch(()=>{}),dc.set(e,t),e}function d_(t){if(Ya.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ya.set(t,e)}let Ka={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ya.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h_(t){Ka=t(Ka)}function f_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($l(this),e,...n);return Rm.set(r,e.sort?e.sort():[e]),wn(r)}:u_().includes(t)?function(...e){return t.apply($l(this),e),wn(Pm.get(this))}:function(...e){return wn(t.apply($l(this),e))}}function p_(t){return typeof t=="function"?f_(t):(t instanceof IDBTransaction&&d_(t),l_(t,a_())?new Proxy(t,Ka):t)}function wn(t){if(t instanceof IDBRequest)return c_(t);if(Bl.has(t))return Bl.get(t);const e=p_(t);return e!==t&&(Bl.set(t,e),dc.set(e,t)),e}const $l=t=>dc.get(t);function m_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=wn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(wn(o.result),a.oldVersion,a.newVersion,wn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const g_=["get","getKey","getAll","getAllKeys","count"],y_=["put","add","delete","clear"],Vl=new Map;function mh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vl.get(e))return Vl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=y_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||g_.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Vl.set(e,s),s}h_(t=>({...t,get:(e,n,r)=>mh(e,n)||t.get(e,n,r),has:(e,n)=>!!mh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(__(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function __(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xa="@firebase/app",gh="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new Nm("@firebase/app"),L_="@firebase/app-compat",w_="@firebase/analytics-compat",C_="@firebase/analytics",x_="@firebase/app-check-compat",E_="@firebase/app-check",S_="@firebase/auth",k_="@firebase/auth-compat",I_="@firebase/database",T_="@firebase/data-connect",N_="@firebase/database-compat",P_="@firebase/functions",R_="@firebase/functions-compat",b_="@firebase/installations",D_="@firebase/installations-compat",A_="@firebase/messaging",z_="@firebase/messaging-compat",M_="@firebase/performance",O_="@firebase/performance-compat",F_="@firebase/remote-config",j_="@firebase/remote-config-compat",H_="@firebase/storage",U_="@firebase/storage-compat",W_="@firebase/firestore",B_="@firebase/ai",$_="@firebase/firestore-compat",V_="firebase",q_="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="[DEFAULT]",G_={[Xa]:"fire-core",[L_]:"fire-core-compat",[C_]:"fire-analytics",[w_]:"fire-analytics-compat",[E_]:"fire-app-check",[x_]:"fire-app-check-compat",[S_]:"fire-auth",[k_]:"fire-auth-compat",[I_]:"fire-rtdb",[T_]:"fire-data-connect",[N_]:"fire-rtdb-compat",[P_]:"fire-fn",[R_]:"fire-fn-compat",[b_]:"fire-iid",[D_]:"fire-iid-compat",[A_]:"fire-fcm",[z_]:"fire-fcm-compat",[M_]:"fire-perf",[O_]:"fire-perf-compat",[F_]:"fire-rc",[j_]:"fire-rc-compat",[H_]:"fire-gcs",[U_]:"fire-gcs-compat",[W_]:"fire-fst",[$_]:"fire-fst-compat",[B_]:"fire-vertex","fire-js":"fire-js",[V_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Map,Q_=new Map,Ja=new Map;function yh(t,e){try{t.container.addComponent(e)}catch(n){Jt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(Ja.has(e))return Jt.debug(`There were multiple attempts to register component ${e}.`),!1;Ja.set(e,t);for(const n of xo.values())yh(n,t);for(const n of Q_.values())yh(n,t);return!0}function Y_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function K_(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new Im("app","Firebase",X_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=q_;function bm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Za,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=Em()),!n)throw Cn.create("no-options");const s=xo.get(i);if(s){if(Co(n,s.options)&&Co(r,s.config))return s;throw Cn.create("duplicate-app",{appName:i})}const o=new n_(i);for(const a of Ja.values())o.addComponent(a);const l=new Z_(n,r,o);return xo.set(i,l),l}function e0(t=Za){const e=xo.get(t);if(!e&&t===Za&&Em())return bm();if(!e)throw Cn.create("no-app",{appName:t});return e}function Nr(t,e,n){let r=G_[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jt.warn(o.join(" "));return}Eo(new Xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebase-heartbeat-database",n0=1,Zi="firebase-heartbeat-store";let ql=null;function Dm(){return ql||(ql=m_(t0,n0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),ql}async function r0(t){try{const n=(await Dm()).transaction(Zi),r=await n.objectStore(Zi).get(Am(t));return await n.done,r}catch(e){if(e instanceof hs)Jt.warn(e.message);else{const n=Cn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jt.warn(n.message)}}}async function vh(t,e){try{const r=(await Dm()).transaction(Zi,"readwrite");await r.objectStore(Zi).put(e,Am(t)),await r.done}catch(n){if(n instanceof hs)Jt.warn(n.message);else{const r=Cn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jt.warn(r.message)}}}function Am(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=1024,s0=30;class o0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_h();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>s0){const o=u0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_h(),{heartbeatsToSend:r,unsentEntries:i}=l0(this._heartbeatsCache.heartbeats),s=Lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jt.warn(n),""}}}function _h(){return new Date().toISOString().substring(0,10)}function l0(t,e=i0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Lh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bv()?$v().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lh(t){return Lo(JSON.stringify({version:2,heartbeats:t})).length}function u0(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){Eo(new Xi("platform-logger",e=>new v_(e),"PRIVATE")),Eo(new Xi("heartbeat",e=>new o0(e),"PRIVATE")),Nr(Xa,gh,t),Nr(Xa,gh,"esm2020"),Nr("fire-js","")}c0("");var d0="firebase",h0="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(d0,h0,"app");const wh="@firebase/database",Ch="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm="";function f0(t){zm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Te(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ki(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ot(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p0(e)}}catch{}return new m0},Hn=Mm("localStorage"),eu=Mm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Nm("@firebase/database"),g0=function(){let t=1;return function(){return t++}}(),Om=function(t){const e=Zv(t),n=new Xv;n.update(e);const r=n.digest();return uc.encodeByteArray(r)},fs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fs.apply(null,r):typeof r=="object"?e+=Te(r):e+=r,e+=" "}return e};let Bn=null,xh=!0;const y0=function(t,e){S(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Pr.logLevel=ne.VERBOSE,Bn=Pr.log.bind(Pr),e&&eu.set("logging_enabled",!0)):typeof t=="function"?Bn=t:(Bn=null,eu.remove("logging_enabled"))},Re=function(...t){if(xh===!0&&(xh=!1,Bn===null&&eu.get("logging_enabled")===!0&&y0(!0)),Bn){const e=fs.apply(null,t);Bn(e)}},ps=function(t){return function(...e){Re(t,...e)}},tu=function(...t){const e="FIREBASE INTERNAL ERROR: "+fs(...t);Pr.error(e)},en=function(...t){const e=`FIREBASE FATAL ERROR: ${fs(...t)}`;throw Pr.error(e),new Error(e)},Ve=function(...t){const e="FIREBASE WARNING: "+fs(...t);Pr.warn(e)},v0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ve("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_0=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wr="[MIN_NAME]",Yn="[MAX_NAME]",tr=function(t,e){if(t===e)return 0;if(t===Wr||e===Yn)return-1;if(e===Wr||t===Yn)return 1;{const n=Eh(t),r=Eh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},L0=function(t,e){return t===e?0:t<e?-1:1},di=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Te(e))},fc=function(t){if(typeof t!="object"||t===null)return Te(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Te(e[r]),n+=":",n+=fc(t[e[r]]);return n+="}",n},Fm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ae(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jm=function(t){S(!hc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let c=parseInt(h.substr(a,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},w0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},C0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function x0(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const E0=new RegExp("^-?(0*)\\d{1,10}$"),S0=-2147483648,k0=2147483647,Eh=function(t){if(E0.test(t)){const e=Number(t);if(e>=S0&&e<=k0)return e}return null},Jr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ve("Exception was thrown by user callback.",n),e},Math.floor(0))}},I0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ni=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,K_(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ve(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ve(e)}}class Rr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="5",Hm="v",Um="s",Wm="r",Bm="f",$m=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vm="ls",qm="p",nu="ac",Gm="websocket",Qm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function P0(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Km(t,e,n){S(typeof e=="string","typeof type must == string"),S(typeof n=="object","typeof params must == object");let r;if(e===Gm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Qm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);P0(t)&&(n.ns=t.namespace);const i=[];return Ae(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.counters_={}}incrementCounter(e,n=1){Ot(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Tv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl={},Ql={};function mc(t){const e=t.toString();return Gl[e]||(Gl[e]=new R0),Gl[e]}function b0(t,e){const n=t.toString();return Ql[n]||(Ql[n]=e()),Ql[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="start",A0="close",z0="pLPCommand",M0="pRTLPCB",Xm="id",Zm="pw",Jm="ser",O0="cb",F0="seg",j0="ts",H0="d",U0="dframe",eg=1870,tg=30,W0=eg-tg,B0=25e3,$0=3e4;class wr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ps(e),this.stats_=mc(n),this.urlFn=a=>(this.appCheckToken&&(a[nu]=this.appCheckToken),Km(n,Qm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new D0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($0)),_0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gc((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Sh)this.id=l,this.password=a;else if(o===A0)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Sh]="t",r[Jm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[O0]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Hm]=pc,this.transportSessionId&&(r[Um]=this.transportSessionId),this.lastSessionId&&(r[Vm]=this.lastSessionId),this.applicationId&&(r[qm]=this.applicationId),this.appCheckToken&&(r[nu]=this.appCheckToken),typeof location<"u"&&location.hostname&&$m.test(location.hostname)&&(r[Wm]=Bm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wr.forceAllow_=!0}static forceDisallow(){wr.forceDisallow_=!0}static isAvailable(){return wr.forceAllow_?!0:!wr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!w0()&&!C0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=wm(n),i=Fm(r,W0);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[U0]="t",r[Xm]=e,r[Zm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Te(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class gc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=g0(),window[z0+this.uniqueCallbackIdentifier]=e,window[M0+this.uniqueCallbackIdentifier]=n,this.myIFrame=gc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Re("frame writing exception"),l.stack&&Re(l.stack),Re(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Re("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Xm]=this.myID,e[Zm]=this.myPW,e[Jm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tg+r.length<=eg;){const o=this.pendingSegs.shift();r=r+"&"+F0+i+"="+o.seg+"&"+j0+i+"="+o.ts+"&"+H0+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(B0)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=16384,q0=45e3;let So=null;typeof MozWebSocket<"u"?So=MozWebSocket:typeof WebSocket<"u"&&(So=WebSocket);class xt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ps(this.connId),this.stats_=mc(n),this.connURL=xt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Hm]=pc,typeof location<"u"&&location.hostname&&$m.test(location.hostname)&&(o[Wm]=Bm),n&&(o[Um]=n),r&&(o[Vm]=r),i&&(o[nu]=i),s&&(o[qm]=s),Km(e,Gm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;km(),this.mySock=new So(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){xt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&So!==null&&!xt.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ki(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fm(n,V0);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(q0))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xt.responsesRequiredToBeHealthy=2;xt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{static get ALL_TRANSPORTS(){return[wr,xt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=xt&&xt.isAvailable();let r=n&&!xt.previouslyFailed();if(e.webSocketOnly&&(n||Ve("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xt];else{const i=this.transports_=[];for(const s of Ji.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ji.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ji.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=6e4,Q0=5e3,Y0=10*1024,K0=100*1024,Yl="t",kh="d",X0="s",Ih="r",Z0="e",Th="o",Nh="a",Ph="n",Rh="p",J0="h";class eL{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ps("c:"+this.id+":"),this.transportManager_=new Ji(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ni(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>K0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Y0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yl in e){const n=e[Yl];n===Nh?this.upgradeIfSecondaryHealthy_():n===Ih?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Th&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=di("t",e),r=di("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Rh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Nh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ph,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=di("t",e),r=di("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=di(Yl,e);if(kh in e){const r=e[kh];if(n===J0){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Ph){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===X0?this.onConnectionShutdown_(r):n===Ih?this.onReset_(r):n===Z0?tu("Server Error: "+r):n===Th?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),pc!==r&&Ve("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ni(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(G0))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ni(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Q0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Rh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends rg{static getInstance(){return new ko}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Sm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=32,Dh=768;class J{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function X(){return new J("")}function W(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function kn(t){return t.pieces_.length-t.pieceNum_}function re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new J(t.pieces_,e)}function yc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function es(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ig(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new J(e,0)}function me(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Xe(t,e){const n=W(t),r=W(e);if(n===null)return e;if(n===r)return Xe(re(t),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nL(t,e){const n=es(t,0),r=es(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=tr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function vc(t,e){if(kn(t)!==kn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ft(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(kn(t)>kn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class rL{constructor(e,n){this.errorPrefix_=n,this.parts_=es(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=el(this.parts_[r]);sg(this)}}function iL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=el(e),sg(t)}function sL(t){const e=t.parts_.pop();t.byteLength_-=el(e),t.parts_.length>0&&(t.byteLength_-=1)}function sg(t){if(t.byteLength_>Dh)throw new Error(t.errorPrefix_+"has a key path longer than "+Dh+" bytes ("+t.byteLength_+").");if(t.parts_.length>bh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bh+") or object contains a cycle "+Mn(t))}function Mn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends rg{static getInstance(){return new _c}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=1e3,oL=60*5*1e3,Ah=30*1e3,lL=1.3,aL=3e4,uL="server_kill",zh=3;class Qt extends ng{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Qt.nextPersistentConnectionId_++,this.log_=ps("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hi,this.maxReconnectDelay_=oL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!km())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_c.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ko.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Te(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ds,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Qt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ot(e,"w")){const r=Ur(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ve(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Yv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ah)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Qv(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Te(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):tu("Unrecognized action received from server: "+Te(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aL&&(this.reconnectDelay_=hi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Qt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){S(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Re("getToken() completed but was canceled"):(Re("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,l=new eL(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{Ve(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(uL)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ve(d),a())}}}interrupt(e){Re("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Re("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dh(this.interruptReasons_)&&(this.reconnectDelay_=hi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>fc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new J(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Re("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zh&&(this.reconnectDelay_=Ah,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Re("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+zm.replace(/\./g,"-")]=1,Sm()?e["framework.cordova"]=1:Wv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ko.getInstance().currentlyOnline();return dh(this.interruptReasons_)&&e}}Qt.nextPersistentConnectionId_=0;Qt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new B(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new B(Wr,e),i=new B(Wr,n);return this.compare(r,i)!==0}minPost(){return B.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs;class og extends tl{static get __EMPTY_NODE(){return zs}static set __EMPTY_NODE(e){zs=e}compare(e,n){return tr(e.name,n.name)}isDefinedOn(e){throw Xr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return B.MIN}maxPost(){return new B(Yn,zs)}makePost(e,n){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,zs)}toString(){return".key"}}const br=new og;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ke{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ke.RED,this.left=i??Ze.EMPTY_NODE,this.right=s??Ze.EMPTY_NODE}copy(e,n,r,i,s){return new ke(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ze.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ze.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ke.RED=!0;ke.BLACK=!1;class cL{copy(e,n,r,i,s){return this}insert(e,n,r){return new ke(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ze{constructor(e,n=Ze.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ze(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ke.BLACK,null,null))}remove(e){return new Ze(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ke.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ms(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ms(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ms(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ms(this.root_,null,this.comparator_,!0,e)}}Ze.EMPTY_NODE=new cL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t,e){return tr(t.name,e.name)}function Lc(t,e){return tr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru;function hL(t){ru=t}const lg=function(t){return typeof t=="number"?"number:"+jm(t):"string:"+t},ag=function(t){if(t.isLeafNode()){const e=t.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ot(e,".sv"),"Priority must be a string or number.")}else S(t===ru||t.isEmpty(),"priority of unexpected type.");S(t===ru||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh;class Ee{static set __childrenNodeConstructor(e){Mh=e}static get __childrenNodeConstructor(){return Mh}constructor(e,n=Ee.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ag(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ee(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return V(e)?this:W(e)===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ee.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=W(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||kn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ee.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=jm(this.value_):e+=this.value_,this.lazyHash_=Om(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ee.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ee.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ee.VALUE_TYPE_ORDER.indexOf(n),s=Ee.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ee.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug,cg;function fL(t){ug=t}function pL(t){cg=t}class mL extends tl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?tr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Yn,new Ee("[PRIORITY-POST]",cg))}makePost(e,n){const r=ug(e);return new B(n,new Ee("[PRIORITY-POST]",r))}toString(){return".priority"}}const ge=new mL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=Math.log(2);class yL{constructor(e){const n=s=>parseInt(Math.log(s)/gL,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Io=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,c;if(h===0)return null;if(h===1)return d=t[a],c=n?n(d):d,new ke(c,d.node,ke.BLACK,null,null);{const v=parseInt(h/2,10)+a,g=i(a,v),L=i(v+1,u);return d=t[v],c=n?n(d):d,new ke(c,d.node,ke.BLACK,g,L)}},s=function(a){let u=null,h=null,d=t.length;const c=function(g,L){const A=d-g,p=d;d-=g;const f=i(A+1,p),m=t[A],w=n?n(m):m;v(new ke(w,m.node,L,null,f))},v=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<a.count;++g){const L=a.nextBitIsOne(),A=Math.pow(2,a.count-(g+1));L?c(A,ke.BLACK):(c(A,ke.BLACK),c(A,ke.RED))}return h},o=new yL(t.length),l=s(o);return new Ze(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;const ar={};class qt{static get Default(){return S(ar&&ge,"ChildrenNode.ts has not been loaded"),Kl=Kl||new qt({".priority":ar},{".priority":ge}),Kl}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ur(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ze?n:null}hasIndex(e){return Ot(this.indexSet_,e.toString())}addIndex(e,n){S(e!==br,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(B.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Io(r,e.getCompare()):l=ar;const a=e.toString(),u={...this.indexSet_};u[a]=e;const h={...this.indexes_};return h[a]=l,new qt(h,u)}addToIndexes(e,n){const r=wo(this.indexes_,(i,s)=>{const o=Ur(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),i===ar)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(B.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Io(l,o.getCompare())}else return ar;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new B(e.name,l))),a.insert(e,e.node)}});return new qt(r,this.indexSet_)}removeFromIndexes(e,n){const r=wo(this.indexes_,i=>{if(i===ar)return i;{const s=n.get(e.name);return s?i.remove(new B(e.name,s)):i}});return new qt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi;class O{static get EMPTY_NODE(){return fi||(fi=new O(new Ze(Lc),null,qt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ag(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fi}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?fi:n}}getChild(e){const n=W(e);return n===null?this:this.getImmediateChild(n).getChild(re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(S(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new B(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?fi:this.priorityNode_;return new O(i,o,s)}}updateChild(e,n){const r=W(e);if(r===null)return n;{S(W(e)!==".priority"||kn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(re(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ge,(o,l)=>{n[o]=l.val(e),r++,s&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lg(this.getPriority().val())+":"),this.forEachChild(ge,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Om(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new B(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new B(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new B(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,B.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,B.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ms?-1:0}withIndex(e){if(e===br||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===br||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ge),i=n.getIterator(ge);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===br?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vL extends O{constructor(){super(new Ze(Lc),O.EMPTY_NODE,qt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const ms=new vL;Object.defineProperties(B,{MIN:{value:new B(Wr,O.EMPTY_NODE)},MAX:{value:new B(Yn,ms)}});og.__EMPTY_NODE=O.EMPTY_NODE;Ee.__childrenNodeConstructor=O;hL(ms);pL(ms);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=!0;function Ie(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ee(n,Ie(e))}if(!(t instanceof Array)&&_L){const n=[];let r=!1;if(Ae(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ie(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new B(o,a)))}}),n.length===0)return O.EMPTY_NODE;const s=Io(n,dL,o=>o.name,Lc);if(r){const o=Io(n,ge.getCompare());return new O(s,Ie(e),new qt({".priority":o},{".priority":ge}))}else return new O(s,Ie(e),qt.Default)}else{let n=O.EMPTY_NODE;return Ae(t,(r,i)=>{if(Ot(t,r)&&r.substring(0,1)!=="."){const s=Ie(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ie(e))}}fL(Ie);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends tl{constructor(e){super(),this.indexPath_=e,S(!V(e)&&W(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?tr(e.name,n.name):s}makePost(e,n){const r=Ie(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new B(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,ms);return new B(Yn,e)}toString(){return es(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL extends tl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?tr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,n){const r=Ie(e);return new B(n,r)}toString(){return".value"}}const CL=new wL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){return{type:"value",snapshotNode:t}}function Br(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ts(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ns(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function xL(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ts(n,l)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Br(n,r)):o.trackChildChange(ns(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ge,(i,s)=>{n.hasChild(i)||r.trackChildChange(ts(i,s))}),n.isLeafNode()||n.forEachChild(ge,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ns(i,s,o))}else r.trackChildChange(Br(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.indexedFilter_=new wc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rs.getStartPost_(e),this.endPost_=rs.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new B(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const s=this;return n.forEachChild(ge,(o,l)=>{s.matches(new B(o,l))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new rs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new B(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,v)=>d(v,c)}else o=this.index_.getCompare();const l=e;S(l.numChildren()===this.limit_,"");const a=new B(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const v=c==null?1:o(c,a);if(h&&!r.isEmpty()&&v>=0)return s!=null&&s.trackChildChange(ns(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ts(n,d));const L=l.updateImmediateChild(n,O.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(s!=null&&s.trackChildChange(Br(c.name,c.node)),L.updateImmediateChild(c.name,c.node)):L}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(ts(u.name,u.node)),s.trackChildChange(Br(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){const e=new Cc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SL(t){return t.loadsAllData()?new wc(t.getIndex()):t.hasLimit()?new EL(t):new rs(t)}function Oh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ge?n="$priority":t.index_===CL?n="$value":t.index_===br?n="$key":(S(t.index_ instanceof LL,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Te(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Te(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Te(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Te(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Te(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Fh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ge&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends ng{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ps("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=To.getListenId_(e,r),l={};this.listens_[o]=l;const a=Oh(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Ur(this.listens_,o)===l){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",i(c,null)}})}unlisten(e,n){const r=To.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Oh(e._queryParams),r=e._path.toString(),i=new ds;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Kv(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Ki(l.responseText)}catch{Ve("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Ve("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return{value:null,children:new Map}}function hg(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=W(e);t.children.has(r)||t.children.set(r,No());const i=t.children.get(r);e=re(e),hg(i,e,n)}}function iu(t,e,n){t.value!==null?n(e,t.value):IL(t,(r,i)=>{const s=new J(e.toString()+"/"+r);iu(i,s,n)})}function IL(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ae(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=10*1e3,NL=30*1e3,PL=5*60*1e3;class RL{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new TL(e);const r=jh+(NL-jh)*Math.random();Ni(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ae(e,(i,s)=>{s>0&&Ot(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ni(this.reportStats_.bind(this),Math.floor(Math.random()*2*PL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Et||(Et={}));function xc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ec(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Et.ACK_USER_WRITE,this.source=xc()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new J(e));return new Po(X(),n,this.revert)}}else return S(W(this.path)===e,"operationForChild called for unrelated child."),new Po(re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.source=e,this.path=n,this.type=Et.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new is(this.source,X()):new is(this.source,re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Et.OVERWRITE}operationForChild(e){return V(this.path)?new Kn(this.source,X(),this.snap.getImmediateChild(e)):new Kn(this.source,re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Et.MERGE}operationForChild(e){if(V(this.path)){const n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new Kn(this.source,X(),n.value):new $r(this.source,X(),n)}else return S(W(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $r(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;const n=W(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function DL(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(xL(o.childName,o.snapshotNode))}),pi(t,i,"child_removed",e,r,n),pi(t,i,"child_added",e,r,n),pi(t,i,"child_moved",s,r,n),pi(t,i,"child_changed",e,r,n),pi(t,i,"value",e,r,n),i}function pi(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>zL(t,l,a)),o.forEach(l=>{const a=AL(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function AL(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function zL(t,e,n){if(e.childName==null||n.childName==null)throw Xr("Should only compare child_ events.");const r=new B(e.childName,e.snapshotNode),i=new B(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){return{eventCache:t,serverCache:e}}function Pi(t,e,n,r){return nl(new Xn(e,n,r),t.serverCache)}function fg(t,e,n,r){return nl(t.eventCache,new Xn(e,n,r))}function su(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Zn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl;const ML=()=>(Xl||(Xl=new Ze(L0)),Xl);class te{static fromObject(e){let n=new te(null);return Ae(e,(r,i)=>{n=n.set(new J(r),i)}),n}constructor(e,n=ML()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:X(),value:this.value};if(V(e))return null;{const r=W(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(re(e),n);return s!=null?{path:me(new J(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{const n=W(e),r=this.children.get(n);return r!==null?r.subtree(re(e)):new te(null)}}set(e,n){if(V(e))return new te(n,this.children);{const r=W(e),s=(this.children.get(r)||new te(null)).set(re(e),n),o=this.children.insert(r,s);return new te(this.value,o)}}remove(e){if(V(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=W(e),r=this.children.get(n);if(r){const i=r.remove(re(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new te(null):new te(this.value,s)}else return this}}get(e){if(V(e))return this.value;{const n=W(e),r=this.children.get(n);return r?r.get(re(e)):null}}setTree(e,n){if(V(e))return n;{const r=W(e),s=(this.children.get(r)||new te(null)).setTree(re(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new te(this.value,o)}}fold(e){return this.fold_(X(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(me(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,X(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{const s=W(e),o=this.children.get(s);return o?o.findOnPath_(re(e),me(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,X(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);const i=W(e),s=this.children.get(i);return s?s.foreachOnPath_(re(e),me(n,i),r):new te(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(me(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.writeTree_=e}static empty(){return new It(new te(null))}}function Ri(t,e,n){if(V(e))return new It(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Xe(i,e);return s=s.updateChild(o,n),new It(t.writeTree_.set(i,s))}else{const i=new te(n),s=t.writeTree_.setTree(e,i);return new It(s)}}}function ou(t,e,n){let r=t;return Ae(n,(i,s)=>{r=Ri(r,me(e,i),s)}),r}function Hh(t,e){if(V(e))return It.empty();{const n=t.writeTree_.setTree(e,new te(null));return new It(n)}}function lu(t,e){return nr(t,e)!=null}function nr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Xe(n.path,e)):null}function Uh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ge,(r,i)=>{e.push(new B(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new B(r,i.value))}),e}function xn(t,e){if(V(e))return t;{const n=nr(t,e);return n!=null?new It(new te(n)):new It(t.writeTree_.subtree(e))}}function au(t){return t.writeTree_.isEmpty()}function Vr(t,e){return pg(X(),t.writeTree_,e)}function pg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=pg(me(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(me(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e){return vg(e,t)}function OL(t,e,n,r,i){S(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ri(t.visibleWrites,e,n)),t.lastWriteId=r}function FL(t,e,n,r){S(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=ou(t.visibleWrites,e,n),t.lastWriteId=r}function jL(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function HL(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);S(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&UL(l,r.path)?i=!1:ft(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return WL(t),!0;if(r.snap)t.visibleWrites=Hh(t.visibleWrites,r.path);else{const l=r.children;Ae(l,a=>{t.visibleWrites=Hh(t.visibleWrites,me(r.path,a))})}return!0}else return!1}function UL(t,e){if(t.snap)return ft(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ft(me(t.path,n),e))return!0;return!1}function WL(t){t.visibleWrites=mg(t.allWrites,BL,X()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function BL(t){return t.visible}function mg(t,e,n){let r=It.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)ft(n,o)?(l=Xe(n,o),r=Ri(r,l,s.snap)):ft(o,n)&&(l=Xe(o,n),r=Ri(r,X(),s.snap.getChild(l)));else if(s.children){if(ft(n,o))l=Xe(n,o),r=ou(r,l,s.children);else if(ft(o,n))if(l=Xe(o,n),V(l))r=ou(r,X(),s.children);else{const a=Ur(s.children,W(l));if(a){const u=a.getChild(re(l));r=Ri(r,X(),u)}}}else throw Xr("WriteRecord should have .snap or .children")}}return r}function gg(t,e,n,r,i){if(!r&&!i){const s=nr(t.visibleWrites,e);if(s!=null)return s;{const o=xn(t.visibleWrites,e);if(au(o))return n;if(n==null&&!lu(o,X()))return null;{const l=n||O.EMPTY_NODE;return Vr(o,l)}}}else{const s=xn(t.visibleWrites,e);if(!i&&au(s))return n;if(!i&&n==null&&!lu(s,X()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ft(u.path,e)||ft(e,u.path))},l=mg(t.allWrites,o,e),a=n||O.EMPTY_NODE;return Vr(l,a)}}}function $L(t,e,n){let r=O.EMPTY_NODE;const i=nr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ge,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=xn(t.visibleWrites,e);return n.forEachChild(ge,(o,l)=>{const a=Vr(xn(s,new J(o)),l);r=r.updateImmediateChild(o,a)}),Uh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=xn(t.visibleWrites,e);return Uh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function VL(t,e,n,r,i){S(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=me(e,n);if(lu(t.visibleWrites,s))return null;{const o=xn(t.visibleWrites,s);return au(o)?i.getChild(n):Vr(o,i.getChild(n))}}function qL(t,e,n,r){const i=me(e,n),s=nr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=xn(t.visibleWrites,i);return Vr(o,r.getNode().getImmediateChild(n))}else return null}function GL(t,e){return nr(t.visibleWrites,e)}function QL(t,e,n,r,i,s,o){let l;const a=xn(t.visibleWrites,e),u=nr(a,X());if(u!=null)l=u;else if(n!=null)l=Vr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),c=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let v=c.getNext();for(;v&&h.length<i;)d(v,r)!==0&&h.push(v),v=c.getNext();return h}else return[]}function YL(){return{visibleWrites:It.empty(),allWrites:[],lastWriteId:-1}}function Ro(t,e,n,r){return gg(t.writeTree,t.treePath,e,n,r)}function Ic(t,e){return $L(t.writeTree,t.treePath,e)}function Wh(t,e,n,r){return VL(t.writeTree,t.treePath,e,n,r)}function bo(t,e){return GL(t.writeTree,me(t.treePath,e))}function KL(t,e,n,r,i,s){return QL(t.writeTree,t.treePath,e,n,r,i,s)}function Tc(t,e,n){return qL(t.writeTree,t.treePath,e,n)}function yg(t,e){return vg(me(t.treePath,e),t.writeTree)}function vg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;S(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),S(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ns(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ts(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Br(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ns(r,e.snapshotNode,i.oldSnap));else throw Xr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const _g=new ZL;class Nc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Zn(this.viewCache_),s=KL(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){return{filter:t}}function ew(t,e){S(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function tw(t,e,n,r,i){const s=new XL;let o,l;if(n.type===Et.OVERWRITE){const u=n;u.source.fromUser?o=uu(t,e,u.path,u.snap,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!V(u.path),o=Do(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===Et.MERGE){const u=n;u.source.fromUser?o=rw(t,e,u.path,u.children,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=cu(t,e,u.path,u.children,r,i,l,s))}else if(n.type===Et.ACK_USER_WRITE){const u=n;u.revert?o=ow(t,e,u.path,r,i,s):o=iw(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Et.LISTEN_COMPLETE)o=sw(t,e,n.path,r,s);else throw Xr("Unknown operation type: "+n.type);const a=s.getChanges();return nw(e,o,a),{viewCache:o,changes:a}}function nw(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=su(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(dg(su(e)))}}function Lg(t,e,n,r,i,s){const o=e.eventCache;if(bo(r,n)!=null)return e;{let l,a;if(V(n))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Zn(e),h=u instanceof O?u:O.EMPTY_NODE,d=Ic(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Ro(r,Zn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=W(n);if(u===".priority"){S(kn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=Wh(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=re(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const c=Wh(r,n,o.getNode(),a);c!=null?d=o.getNode().getImmediateChild(u).updateChild(h,c):d=o.getNode().getImmediateChild(u)}else d=Tc(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return Pi(e,l,o.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function Do(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(V(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const v=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),v,null)}else{const v=W(n);if(!a.isCompleteForPath(n)&&kn(n)>1)return e;const g=re(n),A=a.getNode().getImmediateChild(v).updateChild(g,r);v===".priority"?u=h.updatePriority(a.getNode(),A):u=h.updateChild(a.getNode(),v,A,g,_g,null)}const d=fg(e,u,a.isFullyInitialized()||V(n),h.filtersNodes()),c=new Nc(i,d,s);return Lg(t,d,n,i,c,l)}function uu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new Nc(i,e,s);if(V(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Pi(e,u,!0,t.filter.filtersNodes());else{const d=W(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Pi(e,u,l.isFullyInitialized(),l.isFiltered());else{const c=re(n),v=l.getNode().getImmediateChild(d);let g;if(V(c))g=r;else{const L=h.getCompleteChild(d);L!=null?yc(c)===".priority"&&L.getChild(ig(c)).isEmpty()?g=L:g=L.updateChild(c,r):g=O.EMPTY_NODE}if(v.equals(g))a=e;else{const L=t.filter.updateChild(l.getNode(),d,g,c,h,o);a=Pi(e,L,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Bh(t,e){return t.eventCache.isCompleteForChild(e)}function rw(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=me(n,a);Bh(e,W(h))&&(l=uu(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=me(n,a);Bh(e,W(h))||(l=uu(t,l,h,u,i,s,o))}),l}function $h(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function cu(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;V(n)?u=r:u=new te(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(h.hasChild(d)){const v=e.serverCache.getNode().getImmediateChild(d),g=$h(t,v,c);a=Do(t,a,new J(d),g,i,s,o,l)}}),u.children.inorderTraversal((d,c)=>{const v=!e.serverCache.isCompleteForChild(d)&&c.value===null;if(!h.hasChild(d)&&!v){const g=e.serverCache.getNode().getImmediateChild(d),L=$h(t,g,c);a=Do(t,a,new J(d),L,i,s,o,l)}}),a}function iw(t,e,n,r,i,s,o){if(bo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(V(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Do(t,e,n,a.getNode().getChild(n),i,s,l,o);if(V(n)){let u=new te(null);return a.getNode().forEachChild(br,(h,d)=>{u=u.set(new J(h),d)}),cu(t,e,n,u,i,s,l,o)}else return e}else{let u=new te(null);return r.foreach((h,d)=>{const c=me(n,h);a.isCompleteForPath(c)&&(u=u.set(h,a.getNode().getChild(c)))}),cu(t,e,n,u,i,s,l,o)}}function sw(t,e,n,r,i){const s=e.serverCache,o=fg(e,s.getNode(),s.isFullyInitialized()||V(n),s.isFiltered());return Lg(t,o,n,r,_g,i)}function ow(t,e,n,r,i,s){let o;if(bo(r,n)!=null)return e;{const l=new Nc(r,e,i),a=e.eventCache.getNode();let u;if(V(n)||W(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Ro(r,Zn(e));else{const d=e.serverCache.getNode();S(d instanceof O,"serverChildren would be complete if leaf node"),h=Ic(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=W(n);let d=Tc(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,re(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,O.EMPTY_NODE,re(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ro(r,Zn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||bo(r,X())!=null,Pi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new wc(r.getIndex()),s=SL(r);this.processor_=JL(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(O.EMPTY_NODE,l.getNode(),null),h=new Xn(a,o.isFullyInitialized(),i.filtersNodes()),d=new Xn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=nl(d,h),this.eventGenerator_=new bL(this.query_)}get query(){return this.query_}}function aw(t){return t.viewCache_.serverCache.getNode()}function uw(t,e){const n=Zn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild(W(e)).isEmpty())?n.getChild(e):null}function Vh(t){return t.eventRegistrations_.length===0}function cw(t,e){t.eventRegistrations_.push(e)}function qh(t,e,n){const r=[];if(n){S(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Gh(t,e,n,r){e.type===Et.MERGE&&e.source.queryId!==null&&(S(Zn(t.viewCache_),"We should always have a full cache before handling merges"),S(su(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=tw(t.processor_,i,e,n,r);return ew(t.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,wg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function dw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ge,(s,o)=>{r.push(Br(s,o))}),n.isFullyInitialized()&&r.push(dg(n.getNode())),wg(t,r,n.getNode(),e)}function wg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return DL(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao;class hw{constructor(){this.views=new Map}}function fw(t){S(!Ao,"__referenceConstructor has already been defined"),Ao=t}function pw(){return S(Ao,"Reference.ts has not been loaded"),Ao}function mw(t){return t.views.size===0}function Pc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return S(s!=null,"SyncTree gave us an op for an invalid query."),Gh(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Gh(o,e,n,r));return s}}function gw(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=Ro(n,i?r:null),a=!1;l?a=!0:r instanceof O?(l=Ic(n,r),a=!1):(l=O.EMPTY_NODE,a=!1);const u=nl(new Xn(l,a,!1),new Xn(r,i,!1));return new lw(e,u)}return o}function yw(t,e,n,r,i,s){const o=gw(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),cw(o,n),dw(o,n)}function vw(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=In(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(qh(u,n,r)),Vh(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(qh(a,n,r)),Vh(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!In(t)&&s.push(new(pw())(e._repo,e._path)),{removed:s,events:o}}function Cg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dr(t,e){let n=null;for(const r of t.views.values())n=n||uw(r,e);return n}function xg(t,e){if(e._queryParams.loadsAllData())return rl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Eg(t,e){return xg(t,e)!=null}function In(t){return rl(t)!=null}function rl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo;function _w(t){S(!zo,"__referenceConstructor has already been defined"),zo=t}function Lw(){return S(zo,"Reference.ts has not been loaded"),zo}let ww=1;class Qh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=YL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Sg(t,e,n,r,i){return OL(t.pendingWriteTree_,e,n,r,i),i?ei(t,new Kn(xc(),e,n)):[]}function Cw(t,e,n,r){FL(t.pendingWriteTree_,e,n,r);const i=te.fromObject(n);return ei(t,new $r(xc(),e,i))}function hn(t,e,n=!1){const r=jL(t.pendingWriteTree_,e);if(HL(t.pendingWriteTree_,e)){let s=new te(null);return r.snap!=null?s=s.set(X(),!0):Ae(r.children,o=>{s=s.set(new J(o),!0)}),ei(t,new Po(r.path,s,n))}else return[]}function il(t,e,n){return ei(t,new Kn(Ec(),e,n))}function xw(t,e,n){const r=te.fromObject(n);return ei(t,new $r(Ec(),e,r))}function Ew(t,e){return ei(t,new is(Ec(),e))}function Sw(t,e,n){const r=bc(t,n);if(r){const i=Dc(r),s=i.path,o=i.queryId,l=Xe(s,e),a=new is(Sc(o),l);return Ac(t,s,a)}else return[]}function du(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Eg(o,e))){const a=vw(o,e,n,r);mw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(c=>c._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(c,v)=>In(v));if(h&&!d){const c=t.syncPointTree_.subtree(s);if(!c.isEmpty()){const v=Tw(c);for(let g=0;g<v.length;++g){const L=v[g],A=L.query,p=Tg(t,L);t.listenProvider_.startListening(bi(A),Mo(t,A),p.hashFn,p.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(bi(e),null):u.forEach(c=>{const v=t.queryToTagMap.get(sl(c));t.listenProvider_.stopListening(bi(c),v)}))}Nw(t,u)}return l}function kw(t,e,n,r){const i=bc(t,r);if(i!=null){const s=Dc(i),o=s.path,l=s.queryId,a=Xe(o,e),u=new Kn(Sc(l),a,n);return Ac(t,o,u)}else return[]}function Iw(t,e,n,r){const i=bc(t,r);if(i){const s=Dc(i),o=s.path,l=s.queryId,a=Xe(o,e),u=te.fromObject(n),h=new $r(Sc(l),a,u);return Ac(t,o,h)}else return[]}function Yh(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(c,v)=>{const g=Xe(c,i);s=s||Dr(v,g),o=o||In(v)});let l=t.syncPointTree_.get(i);l?(o=o||In(l),s=s||Dr(l,X())):(l=new hw,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,g)=>{const L=Dr(g,X());L&&(s=s.updateImmediateChild(v,L))}));const u=Eg(l,e);if(!u&&!e._queryParams.loadsAllData()){const c=sl(e);S(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const v=Pw();t.queryToTagMap.set(c,v),t.tagToQueryMap.set(v,c)}const h=kc(t.pendingWriteTree_,i);let d=yw(l,e,n,h,s,a);if(!u&&!o&&!r){const c=xg(l,e);d=d.concat(Rw(t,e,c))}return d}function Rc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Xe(o,e),u=Dr(l,a);if(u)return u});return gg(i,e,s,n,!0)}function ei(t,e){return kg(e,t.syncPointTree_,null,kc(t.pendingWriteTree_,X()))}function kg(t,e,n,r){if(V(t.path))return Ig(t,e,n,r);{const i=e.get(X());n==null&&i!=null&&(n=Dr(i,X()));let s=[];const o=W(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=yg(r,o);s=s.concat(kg(l,a,u,h))}return i&&(s=s.concat(Pc(i,t,r,n))),s}}function Ig(t,e,n,r){const i=e.get(X());n==null&&i!=null&&(n=Dr(i,X()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=yg(r,o),h=t.operationForChild(o);h&&(s=s.concat(Ig(h,l,a,u)))}),i&&(s=s.concat(Pc(i,t,r,n))),s}function Tg(t,e){const n=e.query,r=Mo(t,n);return{hashFn:()=>(aw(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Sw(t,n._path,r):Ew(t,n._path);{const s=x0(i,n);return du(t,n,null,s)}}}}function Mo(t,e){const n=sl(e);return t.queryToTagMap.get(n)}function sl(t){return t._path.toString()+"$"+t._queryIdentifier}function bc(t,e){return t.tagToQueryMap.get(e)}function Dc(t){const e=t.indexOf("$");return S(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}}function Ac(t,e,n){const r=t.syncPointTree_.get(e);S(r,"Missing sync point for query tag that we're tracking");const i=kc(t.pendingWriteTree_,e);return Pc(r,n,i,null)}function Tw(t){return t.fold((e,n,r)=>{if(n&&In(n))return[rl(n)];{let i=[];return n&&(i=Cg(n)),Ae(r,(s,o)=>{i=i.concat(o)}),i}})}function bi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Lw())(t._repo,t._path):t}function Nw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=sl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Pw(){return ww++}function Rw(t,e,n){const r=e._path,i=Mo(t,e),s=Tg(t,n),o=t.listenProvider_.startListening(bi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)S(!In(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!V(u)&&h&&In(h))return[rl(h).query];{let c=[];return h&&(c=c.concat(Cg(h).map(v=>v.query))),Ae(d,(v,g)=>{c=c.concat(g)}),c}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(bi(h),Mo(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new zc(n)}node(){return this.node_}}class Mc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=me(this.path_,e);return new Mc(this.syncTree_,n)}node(){return Rc(this.syncTree_,this.path_)}}const bw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Kh=function(t,e,n){if(!t||typeof t!="object")return t;if(S(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Dw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Aw(t[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Dw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:S(!1,"Unexpected server value: "+t)}},Aw=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&S(!1,"Unexpected increment value: "+r);const i=e.node();if(S(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Ng=function(t,e,n,r){return Oc(e,new Mc(n,t),r)},Pg=function(t,e,n){return Oc(t,new zc(e),n)};function Oc(t,e,n){const r=t.getPriority().val(),i=Kh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Kh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new Ee(l,Ie(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ee(i))),o.forEachChild(ge,(l,a)=>{const u=Oc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function jc(t,e){let n=e instanceof J?e:new J(e),r=t,i=W(n);for(;i!==null;){const s=Ur(r.node.children,i)||{children:{},childCount:0};r=new Fc(i,r,s),n=re(n),i=W(n)}return r}function ti(t){return t.node.value}function Rg(t,e){t.node.value=e,hu(t)}function bg(t){return t.node.childCount>0}function zw(t){return ti(t)===void 0&&!bg(t)}function ol(t,e){Ae(t.node.children,(n,r)=>{e(new Fc(n,t,r))})}function Dg(t,e,n,r){n&&!r&&e(t),ol(t,i=>{Dg(i,e,!0,r)}),n&&r&&e(t)}function Mw(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gs(t){return new J(t.parent===null?t.name:gs(t.parent)+"/"+t.name)}function hu(t){t.parent!==null&&Ow(t.parent,t.name,t)}function Ow(t,e,n){const r=zw(n),i=Ot(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,hu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,hu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=/[\[\].#$\/\u0000-\u001F\u007F]/,jw=/[\[\].#$\u0000-\u001F\u007F]/,Zl=10*1024*1024,Hc=function(t){return typeof t=="string"&&t.length!==0&&!Fw.test(t)},Ag=function(t){return typeof t=="string"&&t.length!==0&&!jw.test(t)},Hw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ag(t)},Uw=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!hc(t)||t&&typeof t=="object"&&Ot(t,".sv")},zg=function(t,e,n,r){r&&e===void 0||ll(Jo(t,"value"),e,n)},ll=function(t,e,n){const r=n instanceof J?new rL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Mn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Mn(r)+" with contents = "+e.toString());if(hc(e))throw new Error(t+"contains "+e.toString()+" "+Mn(r));if(typeof e=="string"&&e.length>Zl/3&&el(e)>Zl)throw new Error(t+"contains a string greater than "+Zl+" utf8 bytes "+Mn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ae(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Hc(o)))throw new Error(t+" contains an invalid key ("+o+") "+Mn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);iL(r,o),ll(t,l,r),sL(r)}),i&&s)throw new Error(t+' contains ".value" child '+Mn(r)+" in addition to actual children.")}},Ww=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=es(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Hc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(nL);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ft(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Bw=function(t,e,n,r){if(r&&e===void 0)return;const i=Jo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ae(e,(o,l)=>{const a=new J(o);if(ll(i,l,me(n,a)),yc(a)===".priority"&&!Uw(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),Ww(i,s)},Mg=function(t,e,n,r){if(!(r&&n===void 0)&&!Ag(n))throw new Error(Jo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$w=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Mg(t,e,n,r)},Uc=function(t,e){if(W(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Vw=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Hw(n))throw new Error(Jo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function al(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!vc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Og(t,e,n){al(t,n),Fg(t,r=>vc(r,e))}function Nt(t,e,n){al(t,n),Fg(t,r=>ft(r,e)||ft(e,r))}function Fg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Gw(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Gw(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Bn&&Re("event: "+n.toString()),Jr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="repo_interrupt",Yw=25;class Kw{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=No(),this.transactionQueueTree_=new Fc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Xw(t,e,n){if(t.stats_=mc(t.repoInfo_),t.forceRestClient_||I0())t.server_=new To(t.repoInfo_,(r,i,s,o)=>{Xh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Zh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Qt(t.repoInfo_,e,(r,i,s,o)=>{Xh(t,r,i,s,o)},r=>{Zh(t,r)},r=>{Zw(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=b0(t.repoInfo_,()=>new RL(t.stats_,t.server_)),t.infoData_=new kL,t.infoSyncTree_=new Qh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=il(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Wc(t,"connected",!1),t.serverSyncTree_=new Qh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);Nt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function jg(t){const n=t.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ul(t){return bw({timestamp:jg(t)})}function Xh(t,e,n,r,i){t.dataUpdateCount++;const s=new J(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=wo(n,u=>Ie(u));o=Iw(t.serverSyncTree_,s,a,i)}else{const a=Ie(n);o=kw(t.serverSyncTree_,s,a,i)}else if(r){const a=wo(n,u=>Ie(u));o=xw(t.serverSyncTree_,s,a)}else{const a=Ie(n);o=il(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=qr(t,s)),Nt(t.eventQueue_,l,o)}function Zh(t,e){Wc(t,"connected",e),e===!1&&tC(t)}function Zw(t,e){Ae(e,(n,r)=>{Wc(t,n,r)})}function Wc(t,e,n){const r=new J("/.info/"+e),i=Ie(n);t.infoData_.updateSnapshot(r,i);const s=il(t.infoSyncTree_,r,i);Nt(t.eventQueue_,r,s)}function Bc(t){return t.nextWriteId_++}function Jw(t,e,n,r,i){cl(t,"set",{path:e.toString(),value:n,priority:r});const s=ul(t),o=Ie(n,r),l=Rc(t.serverSyncTree_,e),a=Pg(o,l,s),u=Bc(t),h=Sg(t.serverSyncTree_,e,a,u,!0);al(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(c,v)=>{const g=c==="ok";g||Ve("set at "+e+" failed: "+c);const L=hn(t.serverSyncTree_,u,!g);Nt(t.eventQueue_,e,L),fu(t,i,c,v)});const d=Vc(t,e);qr(t,d),Nt(t.eventQueue_,d,[])}function eC(t,e,n,r){cl(t,"update",{path:e.toString(),value:n});let i=!0;const s=ul(t),o={};if(Ae(n,(l,a)=>{i=!1,o[l]=Ng(me(e,l),Ie(a),t.serverSyncTree_,s)}),i)Re("update() called with empty data.  Don't do anything."),fu(t,r,"ok",void 0);else{const l=Bc(t),a=Cw(t.serverSyncTree_,e,o,l);al(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||Ve("update at "+e+" failed: "+u);const c=hn(t.serverSyncTree_,l,!d),v=c.length>0?qr(t,e):e;Nt(t.eventQueue_,v,c),fu(t,r,u,h)}),Ae(n,u=>{const h=Vc(t,me(e,u));qr(t,h)}),Nt(t.eventQueue_,e,[])}}function tC(t){cl(t,"onDisconnectEvents");const e=ul(t),n=No();iu(t.onDisconnect_,X(),(i,s)=>{const o=Ng(i,s,t.serverSyncTree_,e);hg(n,i,o)});let r=[];iu(n,X(),(i,s)=>{r=r.concat(il(t.serverSyncTree_,i,s));const o=Vc(t,i);qr(t,o)}),t.onDisconnect_=No(),Nt(t.eventQueue_,X(),r)}function nC(t,e,n){let r;W(e._path)===".info"?r=Yh(t.infoSyncTree_,e,n):r=Yh(t.serverSyncTree_,e,n),Og(t.eventQueue_,e._path,r)}function Jh(t,e,n){let r;W(e._path)===".info"?r=du(t.infoSyncTree_,e,n):r=du(t.serverSyncTree_,e,n),Og(t.eventQueue_,e._path,r)}function rC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Qw)}function cl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Re(n,...e)}function fu(t,e,n,r){e&&Jr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Hg(t,e,n){return Rc(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function $c(t,e=t.transactionQueueTree_){if(e||dl(t,e),ti(e)){const n=Wg(t,e);S(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&iC(t,gs(e),n)}else bg(e)&&ol(e,n=>{$c(t,n)})}function iC(t,e,n){const r=n.map(u=>u.currentWriteId),i=Hg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];S(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Xe(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{cl(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,h=h.concat(hn(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();dl(t,jc(t.transactionQueueTree_,e)),$c(t,t.transactionQueueTree_),Nt(t.eventQueue_,e,h);for(let c=0;c<d.length;c++)Jr(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ve("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}qr(t,e)}},o)}function qr(t,e){const n=Ug(t,e),r=gs(n),i=Wg(t,n);return sC(t,i,r),r}function sC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Xe(n,a.path);let h=!1,d;if(S(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(hn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Yw)h=!0,d="maxretry",i=i.concat(hn(t.serverSyncTree_,a.currentWriteId,!0));else{const c=Hg(t,a.path,o);a.currentInputSnapshot=c;const v=e[l].update(c.val());if(v!==void 0){ll("transaction failed: Data returned ",v,a.path);let g=Ie(v);typeof v=="object"&&v!=null&&Ot(v,".priority")||(g=g.updatePriority(c.getPriority()));const A=a.currentWriteId,p=ul(t),f=Pg(g,c,p);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=f,a.currentWriteId=Bc(t),o.splice(o.indexOf(A),1),i=i.concat(Sg(t.serverSyncTree_,a.path,f,a.currentWriteId,a.applyLocally)),i=i.concat(hn(t.serverSyncTree_,A,!0))}else h=!0,d="nodata",i=i.concat(hn(t.serverSyncTree_,a.currentWriteId,!0))}Nt(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}dl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Jr(r[l]);$c(t,t.transactionQueueTree_)}function Ug(t,e){let n,r=t.transactionQueueTree_;for(n=W(e);n!==null&&ti(r)===void 0;)r=jc(r,n),e=re(e),n=W(e);return r}function Wg(t,e){const n=[];return Bg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Bg(t,e,n){const r=ti(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ol(e,i=>{Bg(t,i,n)})}function dl(t,e){const n=ti(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Rg(e,n.length>0?n:void 0)}ol(e,r=>{dl(t,r)})}function Vc(t,e){const n=gs(Ug(t,e)),r=jc(t.transactionQueueTree_,e);return Mw(r,i=>{Jl(t,i)}),Jl(t,r),Dg(r,i=>{Jl(t,i)}),n}function Jl(t,e){const n=ti(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(S(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Rg(e,void 0):n.length=s+1,Nt(t.eventQueue_,gs(e),i);for(let o=0;o<r.length;o++)Jr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function lC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ve(`Invalid query segment '${n}' in query '${t}'`)}return e}const ef=function(t,e){const n=aC(t),r=n.namespace;n.domain==="firebase.com"&&en(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&en("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||v0();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ym(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new J(n.pathString)}},aC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=oC(t.substring(h,d)));const c=lC(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in c&&(s=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=tf.charAt(n%64),n=Math.floor(n/64);S(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=tf.charAt(e[i]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Te(this.snapshot.exportVal())}}class Vg{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:yc(this._path)}get ref(){return new nn(this._repo,this._path)}get _queryIdentifier(){const e=Fh(this._queryParams),n=fc(e);return n==="{}"?"default":n}get _queryObject(){return Fh(this._queryParams)}isEqual(e){if(e=Zr(e),!(e instanceof qc))return!1;const n=this._repo===e._repo,r=vc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+tL(this._path)}}class nn extends qc{constructor(e,n){super(e,n,new Cc,!1)}get parent(){const e=ig(this._path);return e===null?null:new nn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ss{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new J(e),r=Gr(this.ref,e);return new ss(this._node.getChild(n),r,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ss(i,Gr(this.ref,r),ge)))}hasChild(e){const n=new J(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ht(t,e){return t=Zr(t),t._checkNotDeleted("ref"),e!==void 0?Gr(t._root,e):t._root}function Gr(t,e){return t=Zr(t),W(t._path)===null?$w("child","path",e,!1):Mg("child","path",e,!1),new nn(t._repo,me(t._path,e))}function dC(t,e){t=Zr(t),Uc("push",t._path),zg("push",e,t._path,!0);const n=jg(t._repo),r=uC(n),i=Gr(t,r),s=Gr(t,r);let o;return e!=null?o=Gc(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function hC(t){return Uc("remove",t._path),Gc(t,null)}function Gc(t,e){t=Zr(t),Uc("set",t._path),zg("set",e,t._path,!1);const n=new ds;return Jw(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ea(t,e){Bw("update",e,t._path,!1);const n=new ds;return eC(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Qc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new $g("value",this,new ss(e.snapshotNode,new nn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vg(this,e,n):null}matches(e){return e instanceof Qc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Yc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vg(this,e,n):null}createEvent(e,n){S(e.childName!=null,"Child events should have a childName.");const r=Gr(new nn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new $g(e.type,this,new ss(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function qg(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(h,d)=>{Jh(t._repo,t,l),a(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new cC(n,s||void 0),l=e==="value"?new Qc(o):new Yc(e,o);return nC(t._repo,t,l),()=>Jh(t._repo,t,l)}function nf(t,e,n,r){return qg(t,"value",e,n,r)}function fC(t,e,n,r){return qg(t,"child_added",e,n,r)}fw(nn);_w(nn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="FIREBASE_DATABASE_EMULATOR_HOST",pu={};let mC=!1;function gC(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=cc(s);t.repoInfo_=new Ym(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function yC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||en("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Re("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ef(s,i),l=o.repoInfo,a,u;typeof process<"u"&&process.env&&(u=process.env[pC]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=ef(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const h=i&&a?new Rr(Rr.OWNER):new N0(t.name,t.options,e);Vw("Invalid Firebase Database URL",o),V(o.path)||en("Database URL must point to the root of a Firebase Database (not including a child path).");const d=_C(l,t,h,new T0(t,n));return new LC(d,t)}function vC(t,e){const n=pu[e];(!n||n[t.key]!==t)&&en(`Database ${e}(${t.repoInfo_}) has already been deleted.`),rC(t),delete n[t.key]}function _C(t,e,n,r){let i=pu[e.name];i||(i={},pu[e.name]=i);let s=i[t.toURLString()];return s&&en("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Kw(t,mC,n,r),i[t.toURLString()]=s,s}class LC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Xw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nn(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&en("Cannot call "+e+" on a deleted database.")}}function wC(t=e0(),e){const n=Y_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=zv("database");r&&CC(n,...r)}return n}function CC(t,e,n,r={}){t=Zr(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Co(r,s.repoInfo_.emulatorOptions))return;en("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&en('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rr(Rr.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:Ov(r.mockUserToken,t.app.options.projectId);o=new Rr(l)}cc(e)&&(Mv(e),Hv("Database",!0)),gC(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){f0(J_),Eo(new Xi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return yC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Nr(wh,Ch,t),Nr(wh,Ch,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={".sv":"timestamp"};function rf(){return EC}Qt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Qt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};xC();const SC={apiKey:"AIzaSyAeg700zLPvBv_SIZxHy8MLjYB2RCCvwao",authDomain:"studyspark-959ac.firebaseapp.com",databaseURL:"https://studyspark-959ac-default-rtdb.firebaseio.com",projectId:"studyspark-959ac",storageBucket:"studyspark-959ac.firebasestorage.app",messagingSenderId:"529045127702",appId:"1:529045127702:web:2e193893d46b8f262beb37",measurementId:"G-LS0N6CSZGN"},kC=bm(SC),Ut=wC(kC),IC=()=>{var Zc,Jc;const[t,e]=ee.useState(null),[n,r]=ee.useState(null),[i,s]=ee.useState(0),[o,l]=ee.useState(0),[a,u]=ee.useState([]),[h,d]=ee.useState([]),[c,v]=ee.useState([]),[g,L]=ee.useState(0),[A,p]=ee.useState("DRAW"),[f,m]=ee.useState([]),[w,I]=ee.useState(null),[k,_]=ee.useState("OFFLINE"),[x,M]=ee.useState(""),[T,Y]=ee.useState(1),[$,Pt]=ee.useState(null),Rn=(c==null?void 0:c[g])||{name:"Connecting...",hand:[],melds:[],id:-1,score:0,isHost:!1},rr=k==="OFFLINE"||((Zc=c==null?void 0:c[g])==null?void 0:Zc.id)===T,ni=((Jc=c==null?void 0:c.find(E=>E.id===T))==null?void 0:Jc.hand)||[],bn=n?n.problems[i]:null;let N="";if(t==="LESSON"&&bn&&o>0){const E=bn.solutions[0];o===1?N=`Length: ${E.length} characters`:o===2?N=`Starts with: "${E[0]}"`:o>=3&&(N=`Answer: ${E}`)}const z=E=>{I(E),setTimeout(()=>I(null),4e3)},F=E=>{let b=5;const P=E.map(U=>U.hanzi).join(""),D=E.some(U=>U.isPronoun||U.type==="noun"),j=E.some(U=>U.type==="verb"||U.hanzi===""||U.hanzi===""),K=E.filter(U=>U.type==="noun"||U.type==="adj").length>=1;D&&j&&K&&(b+=15),E.some(U=>U.isModifier)&&(b+=10);const G=["","","",""],se=E.filter(U=>G.includes(U.hanzi)).length;return se>0&&(b*=Math.pow(2,se)),(P.includes("")&&P.includes("")||P.includes("")&&P.includes(""))&&(b*=2),b},ue=E=>{if(E.length<2)return{isValid:!1,error:"Sentence too short (min 2 words)"};const b=E.length-1,P=E.some(H=>H.type==="verb"),D=E.some(H=>H.type==="adj"),j=E.some(H=>H.hanzi===""),K=E.some(H=>H.hanzi==="");if(!P&&!D&&!j&&!K)return{isValid:!1,error:"Missing Action: Every sentence needs a verb or 'is'."};for(let H=0;H<E.length;H++){const we=E[H],We=H>0?E[H-1]:null;if(we.isUnit){if(H===0)return{isValid:!1,error:`Grammar: Unit '${we.hanzi}' cannot start a sentence.`};const Rt=(We==null?void 0:We.isNumber)||["","","","","","","","","","","",""].includes((We==null?void 0:We.hanzi)||""),rn=(We==null?void 0:We.isDemonstrative)||["","",""].includes((We==null?void 0:We.hanzi)||"");if(!Rt&&!rn)return{isValid:!1,error:`Grammar: Unit '${we.hanzi}' needs a number or 'this/that' before it.`}}if(we.isModifier){if(H===0&&we.hanzi!=="")return{isValid:!1,error:`Start Error: Sentences cannot start with modifier '${we.hanzi}'.`};const Rt=H<E.length-1?E[H+1]:null,rn=Rt==null?void 0:Rt.type,fl=we.hanzi===""?["verb","adj","noun"]:["verb","adj"];if(!Rt||!fl.includes(rn||""))return{isValid:!1,error:we.hanzi===""?"Grammar: '' must be followed by a Noun, Verb, or Adjective.":`Grammar: Modifier '${we.hanzi}' must be followed by a Verb or Adjective.`}}}const G=E[b];if(G.isTransitive)return{isValid:!1,error:`Incomplete Thought: Transitive verb '${G.hanzi}' needs an object.`};const se=E.filter(H=>H.isTime),ye=E.filter(H=>H.isPronoun);if(se.length>0&&ye.length>0){const H=E[0];if(!H.isTime&&!H.isPronoun)return{isValid:!1,error:"Word Order: When using Time and Pronoun, one must start the sentence."}}const U=["","","","","",""],vt=E.some(H=>U.includes(H.hanzi)),ut=E.some(H=>H.hanzi==="");return vt&&ut?{isValid:!1,error:"Question Error: Don't use 'who/what' and 'ma' together."}:{isValid:!0,error:null}},_e=()=>Math.random().toString(36).substring(2,6).toUpperCase(),ir=async E=>{const b=_e(),P=[{id:1,name:E+" (Host)",hand:[],melds:[],score:0,isHost:!0}],D={state:{players:P,deckCount:0,discardPile:[],currentTurn:0,phase:"DRAW",roomLocked:!1,lastUpdated:rf(),hostId:b},members:{1:E}};try{console.log("Attempting to create lobby with ID:",b),await Gc(Ht(Ut,`rooms/${b}`),D),console.log("Lobby created successfully!"),v(P),M(b),_("HOST"),e("LOBBY"),Y(1)}catch(j){console.error("Firebase Create Lobby Error:",j),z(`Failed to create room: ${j.message||"Unknown error"}`)}},Ft=async(E,b)=>{const P=E.toUpperCase(),D=Ht(Ut,`rooms/${P}`);nf(D,j=>{const K=j.val();if(!K){z("Room not found!");return}if(K.state.roomLocked){z("Room is already in progress!");return}const G=K.state.players||[];if(G.length>=4){z("Room is full!");return}if(!G.find(ye=>ye.name===b)&&k==="OFFLINE"){const ye=G.length+1,U={id:ye,name:b,hand:[],melds:[],score:0,isHost:!1},vt=[...G,U];ea(Ht(Ut,`rooms/${P}/state`),{players:vt}),ea(Ht(Ut,`rooms/${P}/members`),{[ye]:b}),Y(ye),M(P),_("CLIENT"),e("LOBBY")}},{onlyOnce:!0})};ee.useEffect(()=>{if(k!=="HOST"||!x)return;const E=Ht(Ut,`rooms/${x}/actions`),b=fC(E,P=>{const D=P.val();D&&(hl(D.action,D.playerId),hC(Ht(Ut,`rooms/${x}/actions/${P.key}`)))});return()=>b()},[k,x,c,a,h,g,A]),ee.useEffect(()=>{if(!x||k==="OFFLINE")return;const E=Ht(Ut,`rooms/${x}/state`),b=nf(E,P=>{const D=P.val();D&&(v(D.players||[]),k==="CLIENT"&&u(new Array(D.deckCount).fill({})),d(D.discardPile||[]),L(D.currentTurn),p(D.phase),Pt(D.challenge||null),t==="LOBBY"&&D.roomLocked&&e("SANDBOX"))});return()=>b()},[x,t,k]);const ze=ee.useCallback((E,b,P,D,j,K=!0,G=null)=>{console.log(`[Host] Broadcasting State: Phase=${b}, Turn=${P}`);const se=(E||[]).map(U=>U||{id:-1,name:"Empty",hand:[],melds:[],score:0});for(;se.length<2;)se.push({id:se.length+1,name:"Waiting...",hand:[],melds:[],score:0,isHost:!1});const ye=JSON.parse(JSON.stringify({players:se,deckCount:j,discardPile:D||[],currentTurn:P||0,phase:b,roomLocked:K,lastUpdated:Date.now(),challenge:G||null}));ea(Ht(Ut,`rooms/${x}/state`),ye)},[k,x]),Me=E=>{k==="CLIENT"?dC(Ht(Ut,`rooms/${x}/actions`),{playerId:T,action:E,timestamp:rf()}):hl(E,T)},yt=ee.useCallback(E=>{var ye;if(k!=="HOST")return;console.log("[Host] Finalizing Meld:",E.map(U=>U.hanzi).join(""));const b=g,P=c==null?void 0:c[b];if(!P){console.error("[Host] Cannot finalize meld: Active player not found at index",b);return}const D=F(E);let j=[...a];const K=11-(((ye=P.hand)==null?void 0:ye.length)||0);let G=P.hand?P.hand.filter(U=>!E.includes(U)):[];if(K>0){const vt=j.slice(0,K).filter(ut=>{const H=ut&&ut.hanzi&&ut.pinyin&&ut.type;return H||console.error("[Host] Detected corrupted/empty tile in deck during refill:",ut),H});console.log("[Host] Refilling hand with drawn cards:",vt),G=[...G,...vt],j=j.slice(K)}const se=c.map((U,vt)=>{if(vt!==b)return U;const ut=Array.isArray(U.melds)?U.melds:[];return{...U,hand:G,melds:[...ut,E],score:U.score+D}});z(`Score Awarded: ${D}pts!`),ze(se,"DISCARD",g,h,j.length,!0,null),v(se),u(j),p("DISCARD")},[k,g,c,a,h,ze]),Kc=ee.useCallback(()=>{if(k!=="HOST"||!$)return;const E=g,b=$.challengerId;if(!c||c.length<2||!c[E]){console.warn("[Host] resolveChallenge: Insufficient or missing player data. Defaulting to Pass."),yt($.meld);return}if($.status==="CHALLENGED"&&(b==null||!c[b])){console.warn("[Host] resolveChallenge: Challenger missing or invalid. Defaulting to Pass."),yt($.meld);return}const P=Object.values($.votes||{}),D=P.filter(K=>K===!0).length,j=P.filter(K=>K===!1).length;if(console.log(`[Host] Resolving Challenge: Accept(${D}) vs Reject(${j})`),D>=j)z("Challenge Failed! Meld Accepted."),yt($.meld);else{z("Incorrect grammar! Try again.");const K=c.map((G,se)=>{if(se!==(g||0)||!G)return G;const U=G.hand||[];return{...G,hand:[...U,...$.meld]}});v(K),p("MELD"),ze(K,"MELD",g,h,a.length,!0,null)}},[k,$,c,g,h,a.length,ze,yt]);ee.useEffect(()=>{if(k!=="HOST"||!x||A!=="CHALLENGE"||!$)return;console.log(`[Host] Challenge timer started (setInterval). Target: ${$.endTime}`);const E=setInterval(()=>{const b=$.challengerId,P=b??-1;if(!(c==null?void 0:c[P])||$.status!=="CHALLENGED"){console.log("[Host] Timer detected missing player or non-challenged state. Finalizing quietly."),clearInterval(E),yt($.meld);return}Date.now()>=$.endTime&&(console.log("[Host] Challenge window expired. Resolving challenge..."),clearInterval(E),Kc())},1e3);return()=>{console.log("[Host] Cleaning up challenge timer (unmount/phase change)"),clearInterval(E)}},[k,x,A,$,c,Kc,yt]);const hl=(E,b)=>{var U,vt,ut;if(k==="CLIENT")return;let P=[...c],D=[...h],j=[...a],K=A,G=g;const se=g,ye=P==null?void 0:P[se];if(!ye){console.warn("[Host] processAction ignored: Player state not yet initialized or player not found at index",se);return}if(E.actionType==="CHALLENGE"){if(A!=="CHALLENGE"||!$)return;const H=ye||(P==null?void 0:P[0]);if(b===(H==null?void 0:H.id))return;const we={...$,challengerId:b,status:"CHALLENGED",endTime:Date.now()+5e3};ze(c,"CHALLENGE",g,D,j.length,!0,we);return}if(E.actionType==="VOTE"){if(A!=="CHALLENGE"||!$||$.status!=="CHALLENGED")return;const H={...$.votes,[b]:E.data},we={...$,votes:H};ze(c,"CHALLENGE",g,D,j.length,!0,we);return}switch(E.actionType){case"DRAW_DECK":if(A!=="DRAW"||j.length===0)return;P[g]={...P[g],hand:[...((U=P[g])==null?void 0:U.hand)||[],j[0]]},console.log("Hand updated:",(vt=P[g])==null?void 0:vt.hand),j=j.slice(1),ze(P,"MELD",g,D,j.length,!0,null),v(P),u(j),p("MELD");return;case"DRAW_DISCARD":if(A!=="DRAW"||D.length===0)return;P[g]={...P[g],hand:[...((ut=P[g])==null?void 0:ut.hand)||[],D[0]]},D=D.slice(1),ze(P,"MELD",g,D,j.length,!0,null),v(P),d(D),p("MELD");return;case"MELD":const H=E.data,we=H.map(fe=>{if(fe.type==="HAND")return ye.hand[fe.identifier];const nt=Tr.find(Qe=>Qe.id===fe.identifier);return nt?{...nt,id:`PU-${nt.id}-${Date.now()}`}:null}).filter(fe=>!!fe),We=H.filter(fe=>fe.type==="HAND").map(fe=>fe.identifier);if(t==="LESSON"&&n){const fe=we.map(Qe=>Qe.hanzi).join("");if(n.problems[i].solutions.includes(fe)){z(" Correct! +100pts");const Qe=i+1,Oe=c.map((jt,sr)=>sr!==g?jt:{...jt,score:jt.score+100,hand:[]});if(Qe<n.problems.length){s(Qe),l(0);const jt=n.problems[Qe],{riggedHand:sr,remainingDeck:ys}=Xc(n,jt),ml=Oe.map((ed,Qg)=>Qg!==g?ed:{...ed,hand:sr});v(ml),u(ys)}else z(" Lesson Complete!"),e(null);return}else{z(" Grammatically incorrect or word order is off.");return}}else{const fe=ue(we);if(!fe.isValid){z(` ${fe.error}`);return}if(k==="HOST"&&c.length>1){const nt=c.map((Oe,jt)=>jt!==g?Oe:{...Oe,hand:Oe.hand.filter((sr,ys)=>!We.includes(ys))}),Qe={meld:we,challengerId:null,status:"PENDING",endTime:Date.now()+5e3,votes:{}};K="CHALLENGE",ze(nt,"CHALLENGE",g,D,j.length,!0,Qe);return}else{const nt=F(we),Qe=c.map((Oe,jt)=>{if(jt!==g)return Oe;const sr=Array.isArray(Oe.melds)?Oe.melds:[];return{...Oe,melds:[...sr,we],hand:Oe.hand.filter((ys,ml)=>!We.includes(ml)),score:Oe.score+nt}});z(` Correct Construction! +${nt}pts`),P=Qe,K="DISCARD"}}break;case"SKIP":ze(c,"DISCARD",g,h,a.length,!0,null),v(c),p("DISCARD");return;case"DISCARD":const Rt=E.data,rn=c==null?void 0:c[g];if(!rn||!rn.hand||!rn.hand[Rt]){console.error("[Host] Cannot discard: Hand or index invalid.");return}const fl=rn.hand[Rt];P=c.map((fe,nt)=>nt!==g?fe:{...fe,hand:fe.hand.filter((Qe,Oe)=>Oe!==Rt)}),D=[fl,...h],c.length>1&&(G=(g+1)%c.length),K="DRAW";break;case"SORT":const pl={noun:1,verb:2,adj:3,grammar:4,wild:5};P=c.map((fe,nt)=>nt!==g?fe:{...fe,hand:[...fe.hand].sort((Qe,Oe)=>pl[Qe.type]-pl[Oe.type])});break}k==="OFFLINE"||t==="LESSON"?(v(P),d(D),u(j),p(K),L(G)):k==="HOST"&&ze(P,K,G,D,j.length,!0)},Xc=(E,b)=>{const P=b.requiredCardIds.map((G,se)=>{const ye=Tr.find(U=>U.id===G);return ye?{...ye,id:`L-${G}-${se}`}:null}).filter(Boolean),D=6,j=E.vocabularyIds.map(G=>Tr.find(se=>se.id===G)).filter(Boolean),K=[];for(let G=0;G<D;G++){const se=j[Math.floor(Math.random()*j.length)];K.push({...se,id:`D-${se.id}-${G}`})}return{riggedHand:[...P,...K].sort(()=>Math.random()-.5),remainingDeck:Wl(20)}};return{mode:t,activeLesson:n,currentProblem:bn,currentProblemIndex:i,players:c,currentPlayer:Rn,currentTurn:g,deck:a,discardPile:h,phase:A,selectionQueue:f,message:w,role:k,roomId:x,myPlayerId:T,myHand:ni,isMyTurn:rr,activeHint:N,challengeState:$,createLobby:ir,joinLobby:Ft,startGame:()=>{if(k!=="HOST")return;const E=Wl(80);let b=0;const P=c.map(K=>{const G=E.slice(b,b+10);return b+=10,{...K,hand:G,score:0}}),D=E.slice(b+1),j=[E[b]];u(D),d(j),v(P),p("DRAW"),L(0),e("SANDBOX"),ze(P,"DRAW",0,j,D.length,!0,null)},startOfflineSandbox:()=>{_("OFFLINE");const E=Wl(80);v([{id:1,name:"Student",hand:E.slice(0,10),melds:[],score:0,isHost:!0}]),d([E[10]]),u(E.slice(11)),p("DRAW"),L(0),e("SANDBOX"),Y(1)},startLesson:E=>{const b=vm.find(j=>j.id===E);if(!b)return;_("OFFLINE"),s(0),l(0);const{riggedHand:P,remainingDeck:D}=Xc(b,b.problems[0]);v([{id:1,name:"Student",hand:P,melds:[],score:0,isHost:!0}]),u(D),d([]),p("MELD"),e("LESSON"),r(b),L(0),Y(1),z(`Lesson Start: ${b.title}`)},getHint:()=>{!n||t!=="LESSON"||l(E=>Math.min(E+1,3))},exitToMenu:()=>{e(null),M(""),_("OFFLINE"),m([])},drawFromDeck:()=>Me({actionType:"DRAW_DECK"}),drawFromDiscard:()=>Me({actionType:"DRAW_DISCARD"}),toggleSelect:E=>{m(b=>{const P=b.find(D=>D.type==="HAND"&&D.identifier===E);return P?b.filter(D=>D!==P):[...b,{type:"HAND",identifier:E}]})},togglePowerUp:E=>{m(b=>{const P=b.find(D=>D.type==="SHELF"&&D.identifier===E);return P?b.filter(D=>D!==P):[...b,{type:"SHELF",identifier:E}]})},confirmMeld:()=>{Me({actionType:"MELD",data:f}),m([])},skipMeld:()=>{Me({actionType:"SKIP"}),m([])},discardCard:E=>{Me({actionType:"DISCARD",data:E}),m([])},sortHand:()=>Me({actionType:"SORT"}),triggerMessage:z,setSelectionQueue:m,challengeMeld:()=>Me({actionType:"CHALLENGE"}),voteMeld:E=>Me({actionType:"VOTE",data:E})}};function TC(){var L,A,p,f,m,w,I,k;const t=IC(),{currentPlayer:e,players:n,mode:r,role:i,isMyTurn:s,myHand:o,currentProblem:l,currentProblemIndex:a,activeLesson:u}=t,[h,d]=ee.useState(""),[c,v]=ee.useState(""),g=t.phase==="MELD"&&s||t.phase==="DRAW"&&s;if(!r)return y.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-[var(--color-bg-canvas)] p-6 gap-4 overflow-y-auto",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"font-zcool text-6xl text-[var(--color-stroke-primary)] animate-bounce",children:""}),y.jsx("p",{className:"text-[var(--color-stroke-primary)] font-bold opacity-60",children:"Mahjong Grammar"})]}),y.jsxs("div",{className:"main-menu-card flex flex-col gap-6 w-full max-w-md bg-white p-6 shadow-xl",children:[y.jsx("div",{children:y.jsxs("label",{className:"block text-xs font-bold uppercase text-[var(--color-stroke-primary)] mb-1",children:["Your Name",y.jsx("input",{name:"playerName",id:"playerName",type:"text",value:h,onChange:_=>d(_.target.value),placeholder:"Enter Name...",className:"w-full bg-[var(--color-bg-canvas)] border-2 border-[var(--color-stroke-primary)] rounded-lg p-3 font-bold focus:outline-none focus:ring-2 focus:ring-[var(--color-noun-blue)] mt-1"})]})}),y.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] opacity-10 w-full"}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("button",{onClick:()=>{if(!h)return t.triggerMessage("Enter a name first!");t.createLobby(h)},className:"w-full bg-[var(--color-verb-red)] text-white text-lg py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_var(--color-stroke-primary)] hover:translate-y-1 hover:shadow-none transition-all font-bold",children:"Host New Game"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:c,onChange:_=>v(_.target.value),placeholder:"Room Code",className:"flex-1 bg-[var(--color-bg-canvas)] border-2 border-[var(--color-stroke-primary)] rounded-lg p-3 font-bold uppercase"}),y.jsx("button",{onClick:()=>{if(!h)return t.triggerMessage("Enter a name first!");if(!c)return t.triggerMessage("Enter a room code!");t.joinLobby(c,h)},className:"bg-[var(--color-noun-blue)] text-white px-6 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_var(--color-stroke-primary)] active:shadow-none active:translate-y-1 font-bold",children:"Join"})]})]}),y.jsx("div",{className:"text-center font-bold text-[var(--color-stroke-primary)] opacity-50 text-xs",children:"- OR -"}),y.jsx("button",{onClick:t.startOfflineSandbox,className:"w-full bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)] py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] font-bold hover:brightness-110",children:"Offline Practice (Hot Seat)"}),y.jsxs("div",{className:"space-y-2 pt-4",children:[y.jsx("div",{className:"text-xs font-bold uppercase opacity-50",children:"Lessons"}),y.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-1",children:vm.map(_=>y.jsxs("button",{onClick:()=>t.startLesson(_.id),className:"w-full bg-[var(--color-bg-canvas)] text-left p-2 rounded-lg border border-[var(--color-stroke-primary)]/30 hover:bg-white hover:border-[var(--color-stroke-primary)] transition-all flex justify-between items-center text-sm",children:[y.jsx("span",{className:"font-bold",children:_.title}),y.jsx("span",{className:"opacity-50",children:"Play "})]},_.id))})]})]})]});if((r==="SANDBOX"||r==="LESSON"||r==="LOBBY")&&(!n||n.length===0)){const _=r==="LOBBY"?"Initializing Room...":"Syncing Table...";return y.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-[var(--color-bg-canvas)] gap-4",children:[y.jsx("div",{className:"font-zcool text-4xl animate-pulse text-[var(--color-stroke-primary)]",children:_}),y.jsx("div",{className:"text-sm font-bold opacity-50 uppercase tracking-widest text-[var(--color-stroke-primary)]/50",children:r==="LOBBY"?"Preparing your session":"Waiting for player data"})]})}return r==="LOBBY"?y.jsx("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[var(--color-bg-canvas)] p-6",children:y.jsxs("div",{className:"bg-white p-8 rounded-2xl border-[3px] border-[var(--color-stroke-primary)] shadow-2xl max-w-lg w-full text-center space-y-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-zcool mb-2",children:"Lobby"}),i==="HOST"?y.jsxs("div",{className:"bg-[var(--color-func-yellow)] p-4 rounded-xl border-2 border-[var(--color-stroke-primary)] border-dashed",children:[y.jsx("div",{className:"text-xs uppercase font-bold opacity-60",children:"Room Code"}),y.jsx("div",{className:"text-4xl font-mono font-bold tracking-widest select-all",children:t.roomId}),y.jsx("div",{className:"text-xs mt-2 opacity-60",children:"Share this code with players on other iPads"})]}):y.jsx("div",{className:"animate-pulse font-bold text-[var(--color-noun-blue)]",children:"Waiting for Host to start..."})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"text-xs font-bold uppercase opacity-50 text-left",children:["Players (",(n==null?void 0:n.length)||0,"/4)"]}),n==null?void 0:n.map(_=>{var x;return y.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[var(--color-bg-canvas)] rounded-lg border border-[var(--color-stroke-primary)]/20",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--color-noun-blue)] text-white flex items-center justify-center font-bold",children:((x=_.name)==null?void 0:x[0])||"?"}),y.jsxs("span",{className:"font-bold",children:[_.name||"Unknown"," ",_.id===t.myPlayerId?"(You)":""]}),_.isHost&&y.jsx("span",{className:"text-xs bg-[var(--color-func-yellow)] px-2 py-0.5 rounded text-[var(--color-stroke-primary)] border border-black",children:"HOST"})]},_.id)})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:t.exitToMenu,className:"flex-1 py-3 font-bold opacity-50 hover:opacity-100",children:"Leave"}),i==="HOST"&&y.jsx("button",{onClick:t.startGame,disabled:((n==null?void 0:n.length)||0)<2,className:"flex-[2] bg-[var(--color-verb-red)] text-white font-bold py-3 rounded-xl border-2 border-[var(--color-stroke-primary)] shadow-[4px_4px_0_black] active:shadow-none active:translate-y-1 disabled:opacity-50 disabled:shadow-none",children:"Start Game"})]})]})}):y.jsxs("div",{className:"h-screen w-full flex flex-col bg-[var(--color-bg-canvas)] overflow-hidden",children:[t.message&&y.jsx("div",{className:"fixed top-28 left-1/2 -translate-x-1/2 z-50 flex justify-center pointer-events-none w-full px-4 animate-in slide-in-from-top-4",children:y.jsx("div",{className:"bg-[var(--color-stroke-primary)] text-white px-6 py-3 rounded-2xl font-bold shadow-2xl border-2 border-white text-center w-auto max-w-[90vw]",children:t.message})}),(!t.players||!Array.isArray(t.players))&&y.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col items-center justify-center bg-black/90 text-white p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"State Desync Detected"}),y.jsx("p",{className:"mb-8 text-center opacity-80",children:"The game encountered missing player data."}),y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-gray-200",children:"Reload Game"})]}),t.phase==="CHALLENGE"&&t.challengeState&&((L=t.players)==null?void 0:L.length)>0&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[var(--color-bg-canvas)]/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:(()=>{var _,x;if(!t.players||t.players.length===0||!t.challengeState)return console.error("[UI Guard] Missing critical challenge data. Suppressing render."),null;try{const M=(_=t.players)==null?void 0:_[t.currentTurn||0],T=t.challengeState.meld||[];return y.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl border-4 border-[var(--color-stroke-primary)] shadow-[0_12px_0_var(--color-stroke-primary)] p-8 flex flex-col items-center space-y-8",children:[y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest text-[var(--color-verb-red)]",children:"Challenge Window"}),y.jsx("p",{className:"font-bold opacity-60",children:"Is this a valid Chinese sentence?"})]}),y.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8 px-4 bg-[var(--color-bg-canvas)] rounded-2xl border-2 border-dashed border-[var(--color-stroke-primary)]/20 w-full",children:T.map((Y,$)=>y.jsx(lr,{card:Y,size:"lg"},$))}),y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx("div",{className:"w-64 h-4 bg-[var(--color-bg-canvas)] rounded-full border-2 border-[var(--color-stroke-primary)] overflow-hidden",children:y.jsx("div",{className:"h-full bg-[var(--color-verb-red)] transition-all duration-500",style:{width:`${Math.max(0,(t.challengeState.endTime-Date.now())/5e3)*100}%`}})}),y.jsx("div",{className:"text-sm font-bold opacity-50",children:"Auto-accepting soon..."})]}),y.jsx("div",{className:"w-full flex flex-col gap-4",children:t.challengeState.status==="PENDING"?y.jsx("div",{className:"flex justify-center",children:M&&t.myPlayerId!==(M==null?void 0:M.id)?y.jsx("button",{onClick:t.challengeMeld,className:"bg-[var(--color-verb-red)] text-white px-12 py-4 rounded-2xl border-2 border-[var(--color-stroke-primary)] shadow-[0_6px_0_var(--color-stroke-primary)] active:shadow-none active:translate-y-1 font-bold text-xl hover:brightness-110 transition-all",children:"Challenge!"}):y.jsx("div",{className:"text-[var(--color-noun-blue)] font-bold animate-pulse text-center",children:t.myPlayerId===(M==null?void 0:M.id)?"Searching for errors...":"Waiting for peer review..."})}):y.jsxs("div",{className:"space-y-6 w-full",children:[y.jsx("div",{className:"text-center font-bold text-xl text-[var(--color-verb-red)] animate-bounce italic",children:"SENTENCE CHALLENGED!"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsx("button",{onClick:()=>t.voteMeld(!0),className:`py-6 rounded-2xl border-2 border-[var(--color-stroke-primary)] font-bold text-xl transition-all
                                                ${t.challengeState.votes[t.myPlayerId]===!0?"bg-[var(--color-adj-green)] text-white shadow-none translate-y-1":"bg-white shadow-[0_6px_0_var(--color-stroke-primary)] hover:brightness-95"}`,children:"Accept (Valid)"}),y.jsx("button",{onClick:()=>t.voteMeld(!1),className:`py-6 rounded-2xl border-2 border-[var(--color-stroke-primary)] font-bold text-xl transition-all
                                                ${t.challengeState.votes[t.myPlayerId]===!1?"bg-[var(--color-verb-red)] text-white shadow-none translate-y-1":"bg-white shadow-[0_6px_0_var(--color-stroke-primary)] hover:brightness-95"}`,children:"Reject (Error)"})]}),y.jsx("div",{className:"flex justify-center gap-2",children:(x=t.players)==null?void 0:x.map(Y=>{var Pt,Rn,rr;const $=(Rn=(Pt=t.challengeState)==null?void 0:Pt.votes)==null?void 0:Rn[Y.id];return y.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-[var(--color-stroke-primary)] flex items-center justify-center font-bold text-xs
                                                    ${$===!0?"bg-[var(--color-adj-green)] text-white":$===!1?"bg-[var(--color-verb-red)] text-white":"bg-gray-200 opacity-50"}`,children:((rr=Y==null?void 0:Y.name)==null?void 0:rr[0])||"?"},Y.id)})})]})})]})}catch(M){return console.error("[UI Guard] Crash caught in Challenge UI. Suppressing.",M),y.jsxs("div",{className:"bg-white p-8 rounded-3xl border-4 border-red-500 text-center shadow-2xl",children:[y.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"State Desync Recovered"}),y.jsx("p",{className:"mb-4 text-black opacity-80",children:"The game encountered missing data during sync."}),y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-black text-white px-8 py-3 rounded-full font-bold hover:bg-gray-800 transition-colors",children:"Reload Data"})]})}})()}),y.jsxs("header",{className:"flex flex-col bg-[var(--color-bg-canvas)] shadow-sm z-10",children:[y.jsxs("div",{className:"p-3 flex justify-between items-center border-b border-[var(--color-stroke-primary)]/10",children:[y.jsx("button",{onClick:t.exitToMenu,className:"text-xs font-bold underline opacity-50 hover:opacity-100",children:" Leave"}),r==="LESSON"&&l?y.jsxs("div",{className:"flex flex-col items-center animate-in fade-in slide-in-from-top-4",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsxs("span",{className:"text-[10px] font-bold text-[var(--color-noun-blue)] uppercase tracking-wider",children:["Problem ",a+1," / ",u==null?void 0:u.problems.length]}),y.jsx("button",{onClick:t.getHint,className:"bg-[var(--color-func-yellow)] rounded-full w-5 h-5 flex items-center justify-center shadow-sm hover:scale-110 active:scale-95 text-xs",children:""})]}),y.jsx("span",{className:"font-zcool text-xl leading-none text-center px-4",children:l.prompt}),t.activeHint&&y.jsxs("div",{className:"mt-2 text-sm font-bold text-[var(--color-verb-red)] bg-white/50 px-3 py-1 rounded-lg border border-[var(--color-stroke-primary)]/20 animate-in fade-in slide-in-from-top-2",children:[" ",t.activeHint]})]}):y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("h1",{className:"font-zcool text-xl text-[var(--color-stroke-primary)]",children:""}),i!=="OFFLINE"&&y.jsxs("span",{className:"text-[10px] opacity-50 font-bold",children:["Room: ",t.roomId]})]}),y.jsx("div",{className:`
                px-3 py-1 rounded-full border-2 border-[var(--color-stroke-primary)] font-bold text-xs md:text-sm uppercase tracking-wider
                ${t.phase==="DRAW"?"bg-[var(--color-noun-blue)] text-white":""}
                ${t.phase==="MELD"?"bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)]":""}
                ${t.phase==="DISCARD"?"bg-[var(--color-verb-red)] text-white":""}
            `,children:t.phase})]}),y.jsx("div",{className:"flex justify-between items-center px-4 py-2 bg-[var(--color-bg-surface)]/50 overflow-x-auto no-scrollbar gap-2",children:n==null?void 0:n.map((_,x)=>{var T;const M=x===t.currentTurn;return y.jsxs("div",{className:`
                            flex flex-col items-center justify-center min-w-[70px] p-1 rounded-lg transition-all duration-300 relative
                            ${M?"bg-white shadow-[0_4px_0_var(--color-noun-blue)] border-2 border-[var(--color-noun-blue)] -translate-y-1":"opacity-60 grayscale scale-90"}
                        `,children:[_.id===t.myPlayerId&&y.jsx("div",{className:"absolute -top-2 bg-black text-white text-[8px] px-1 rounded",children:"YOU"}),y.jsx("div",{className:"text-xs font-bold text-[var(--color-stroke-primary)] mb-1 truncate max-w-[60px]",children:_.name}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold bg-[var(--color-stroke-primary)] text-white px-2 py-0.5 rounded-full",children:[y.jsx("span",{children:""}),y.jsx("span",{children:((T=_.hand)==null?void 0:T.length)||0})]}),y.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold bg-[var(--color-func-yellow)] text-[var(--color-stroke-primary)] px-2 py-0.5 rounded-full border border-black",children:[y.jsx("span",{children:""}),y.jsx("span",{children:_.score||0})]})]})]},_.id)})})]}),y.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-96 transition-all duration-300",children:[y.jsxs("section",{className:"flex justify-center items-center gap-8 md:gap-16 py-2 min-h-[140px] max-w-5xl mx-auto w-full",children:[y.jsxs("div",{className:`relative group ${t.phase==="DRAW"&&s?"cursor-pointer animate-pulse":"opacity-50 grayscale cursor-not-allowed"}`,onClick:()=>{s?t.drawFromDeck():t.triggerMessage("Not your turn!")},children:[y.jsx("div",{className:"w-16 h-24 md:w-20 md:h-28 bg-[var(--color-stroke-primary)] rounded-[12px] flex items-center justify-center text-white font-zcool text-xl border-[3px] border-[var(--color-stroke-primary)] shadow-[0_6px_0_rgba(0,0,0,0.2)] transition-transform group-active:translate-y-1 group-active:shadow-none",children:y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-xl md:text-2xl",children:""}),y.jsx("span",{className:"text-xs md:text-sm mt-1",children:((A=t.deck)==null?void 0:A.length)||0})]})}),y.jsx("span",{className:"absolute -bottom-6 w-full text-center text-[10px] md:text-xs font-bold uppercase tracking-wider text-[var(--color-stroke-primary)]",children:"Draw"})]}),y.jsxs("div",{className:`relative ${t.phase==="DRAW"&&(((p=t.discardPile)==null?void 0:p.length)||0)>0&&s?"cursor-pointer":"cursor-default"}`,onClick:()=>{s&&t.drawFromDiscard()},children:[(((f=t.discardPile)==null?void 0:f.length)||0)>0?y.jsxs("div",{className:"relative",children:[y.jsx(lr,{card:t.discardPile[0],size:"md"}),(((m=t.discardPile)==null?void 0:m.length)||0)>1&&y.jsx("div",{className:"absolute top-1 left-1 w-full h-full bg-white border-[3px] border-[var(--color-stroke-primary)] rounded-[12px] -z-10"})]}):y.jsx("div",{className:"w-16 h-24 md:w-20 md:h-28 border-[3px] border-dashed border-[var(--color-stroke-primary)] rounded-[12px] opacity-30 flex items-center justify-center",children:y.jsx("span",{className:"text-2xl opacity-50",children:""})}),y.jsx("span",{className:"absolute -bottom-6 w-full text-center text-[10px] md:text-xs font-bold uppercase tracking-wider text-[var(--color-stroke-primary)]",children:"Market"})]})]}),y.jsxs("section",{className:"space-y-6 max-w-5xl mx-auto w-full",children:[y.jsxs("div",{className:"flex items-center gap-2 opacity-50",children:[y.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] flex-1"}),y.jsx("h2",{className:"text-xs font-bold uppercase tracking-widest text-[var(--color-stroke-primary)]",children:r==="LESSON"?"Your Answer":"Table"}),y.jsx("div",{className:"h-[2px] bg-[var(--color-stroke-primary)] flex-1"})]}),y.jsx("div",{className:"flex flex-col gap-6 items-center",children:n==null?void 0:n.map(_=>{var x,M;return(((x=_==null?void 0:_.melds)==null?void 0:x.length)||0)===0?null:y.jsxs("div",{className:"relative bg-white/40 p-3 rounded-2xl border border-[var(--color-stroke-primary)]/10 w-full max-w-2xl",children:[y.jsx("div",{className:"absolute -top-3 left-3 bg-[var(--color-stroke-primary)] text-white text-[10px] px-2 py-0.5 rounded-full font-bold",children:(_==null?void 0:_.name)||"Unknown"}),y.jsx("div",{className:"flex flex-col gap-2 mt-2",children:(M=_.melds)==null?void 0:M.map((T,Y)=>y.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 justify-center",children:T==null?void 0:T.map($=>y.jsx(lr,{card:$,size:"sm"},$.id))},Y))})]},(_==null?void 0:_.id)||Math.random())})})]})]}),y.jsx("div",{className:`
        fixed bottom-80 left-0 w-full px-4 py-2 flex justify-center gap-4 pointer-events-none z-40
        transition-all duration-300
        ${t.phase==="MELD"&&s?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
      `,children:t.phase==="MELD"&&y.jsxs("div",{className:"flex gap-4 pointer-events-auto bg-[var(--color-bg-canvas)] p-2 rounded-2xl shadow-xl border-2 border-[var(--color-stroke-primary)]",children:[y.jsx("button",{onClick:t.confirmMeld,disabled:(((w=t.selectionQueue)==null?void 0:w.length)||0)<1,className:"bg-[var(--color-verb-red)] text-white px-6 py-2 rounded-xl font-bold border-2 border-[var(--color-stroke-primary)] shadow-[0_4px_0_#A05D49] active:translate-y-1 active:shadow-none disabled:opacity-50 disabled:shadow-none transition-all",children:r==="LESSON"?"Submit":"Meld"}),y.jsx("button",{onClick:t.skipMeld,className:"bg-[var(--color-bg-surface)] text-[var(--color-stroke-primary)] px-6 py-2 rounded-xl font-bold border-2 border-[var(--color-stroke-primary)] shadow-[0_4px_0_#ccc] active:translate-y-1 active:shadow-none transition-all",children:"Pass"})]})}),!s&&y.jsx("div",{className:"fixed bottom-80 w-full text-center pointer-events-none z-30",children:y.jsx("span",{className:"bg-white/80 backdrop-blur text-[var(--color-stroke-primary)] px-4 py-2 rounded-full font-bold text-sm border border-[var(--color-stroke-primary)]",children:t.challengeState&&t.challengeState.challengerId!==null&&t.challengeState.challengerId!==void 0&&(n!=null&&n[t.challengeState.challengerId||0])?`Challenged by ${((I=n[t.challengeState.challengerId||0])==null?void 0:I.name)||"Unknown Player"}...`:`Waiting for ${(e==null?void 0:e.name)||((k=n==null?void 0:n[t.currentTurn||0])==null?void 0:k.name)||"Unknown Player"}...`})}),g&&y.jsxs("div",{className:`
                fixed bottom-60 left-2 flex flex-col items-center p-2 bg-[#8FB996] border-2 border-[#2D5A27] rounded-xl shadow-lg z-40 transition-all
                ${t.phase==="DRAW"?"opacity-50 grayscale pointer-events-none":""}
          `,children:[y.jsx("div",{className:"text-[#1A3317] text-[10px] font-bold uppercase tracking-wider mb-2",children:"Core Words"}),y.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[40vh] overflow-y-auto no-scrollbar p-1",children:ym.map(_=>{const x=Tr.find(T=>T.id===_);if(!x)return null;const M=t.selectionQueue.some(T=>T.type==="SHELF"&&T.identifier===_);return y.jsxs("div",{className:"scale-[1.05] relative",children:[y.jsx(lr,{card:x,size:"sm",isSelected:M,onClick:()=>{t.phase==="DRAW"?t.triggerMessage("Draw first!"):t.togglePowerUp(_)}}),M&&y.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(T=>T.type==="SHELF"&&T.identifier===_)+1})]},_)})})]}),y.jsxs("footer",{className:"hand-dock fixed bottom-0 w-full z-30 flex flex-col items-center",children:[(t.phase==="MELD"&&s||t.phase==="DRAW"&&s)&&y.jsxs("div",{className:`
                absolute -top-28 bg-[#5D4037] border-2 border-[#D4AF37] p-3 rounded-xl shadow-lg flex flex-col items-center max-w-[95vw] z-50 animate-in slide-in-from-bottom-4 transition-all
                ${t.phase==="DRAW"?"opacity-50 grayscale pointer-events-none":""}
            `,children:[y.jsxs("div",{className:"flex items-center gap-3 mb-1 w-full justify-between px-1",children:[y.jsx("span",{className:"text-[#D4AF37] text-[10px] font-bold uppercase tracking-wider",children:"Magic Shelf"}),y.jsx("span",{className:"text-white/80 text-[10px] font-mono",children:" +2 Pts |  x2 Mult"})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto w-full no-scrollbar pb-1",children:xv.map(_=>{const x=Tr.find(T=>T.id===_);if(!x)return null;const M=t.selectionQueue.some(T=>T.type==="SHELF"&&T.identifier===_);return y.jsxs("div",{className:`scale-[1.15] mx-1.5 relative ${t.phase==="DRAW"?"cursor-not-allowed":""}`,children:[y.jsx(lr,{card:x,size:"sm",isSelected:M,onClick:()=>{t.phase==="DRAW"?t.triggerMessage("Draw first!"):t.togglePowerUp(_)}}),M&&y.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(T=>T.type==="SHELF"&&T.identifier===_)+1})]},_)})})]}),y.jsxs("div",{className:"w-full flex justify-between items-center px-4 py-1",children:[y.jsx("div",{className:"w-8"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"w-12 h-1.5 bg-[var(--color-stroke-primary)] opacity-20 rounded-full mb-1"}),y.jsx("div",{className:"text-[10px] font-bold text-[var(--color-stroke-primary)] opacity-50 uppercase tracking-widest",children:"YOUR HAND"})]}),y.jsx("button",{onClick:t.sortHand,className:"text-[10px] font-bold bg-white/50 hover:bg-white px-2 py-1 rounded border border-[var(--color-stroke-primary)]",children:"Sort "})]}),y.jsx("div",{className:"w-full overflow-x-auto pb-6 px-4 no-scrollbar",children:y.jsx("div",{className:"flex gap-2 md:gap-4 min-w-max mx-auto px-4 justify-center",children:o==null?void 0:o.map((_,x)=>{var T;const M=(T=t.selectionQueue)==null?void 0:T.some(Y=>Y.type==="HAND"&&Y.identifier===x);return y.jsxs("div",{className:"relative pt-4 transition-all duration-300",children:[M&&y.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-[var(--color-stroke-primary)] text-white text-[10px] px-1.5 rounded-full z-50",children:t.selectionQueue.findIndex(Y=>Y.type==="HAND"&&Y.identifier===x)+1}),y.jsx("div",{className:`
                            absolute -top-1 left-1/2 -translate-x-1/2 text-xl z-40 transition-all duration-200
                            ${M?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
                        `,children:""}),y.jsx(lr,{card:_,isSelected:M,onClick:()=>{if(!s&&i!=="OFFLINE")return t.triggerMessage("Wait for your turn!");t.phase==="MELD"?t.toggleSelect(x):t.phase==="DISCARD"?t.discardCard(x):t.phase==="DRAW"&&t.triggerMessage("Draw first!")}})]},(_==null?void 0:_.id)||x)})})})]})]})}const Gg=document.getElementById("root");if(!Gg)throw new Error("Could not find root element to mount to");const NC=ta.createRoot(Gg);NC.render(y.jsx(dy.StrictMode,{children:y.jsx(TC,{})}));
